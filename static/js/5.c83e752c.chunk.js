(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{5174:function(e,t,n){e.exports={radioBtn:"ProposalListFilters_radioBtn__2_8YL"}},5176:function(e,t,n){e.exports={input:"NewProposal_input__KvbCb"}},5259:function(e,t,n){"use strict";n.r(t);var a=n(26),i=n(1),o=n.n(i),s=n(7),r=n(5),l=n(6),c=n(10),u=n(8),p=n(9),h=n(0),d=n.n(h),m=n(71),f=n(2),g=n(5076),v=n(5086),b=n(84),w=n(5081),y=n(360),x=n(361),E=n(29),k=n(114),C=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={},n.functionsUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new E.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=null,t=null,n=null,a=this.props.fieldInfo,i=Object.assign({},this.props.proposal),o={fontWeight:3,fontSize:[0,2],color:"cellText",style:{maxWidth:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},flexProps:{justifyContent:"flex-start"}};switch(a.props&&Object.keys(a.props).length&&Object.keys(a.props).forEach(function(e){o[e]=a.props[e]}),a.name){case"date":var s=this.functionsUtil.strToMoment(1e3*i.timestamp).format("DD MMM, YYYY");n=d.a.createElement(f.u,o,s);break;case"statusIcon":switch(a.state?a.state:i.state){case"Pending":e="HourglassEmpty",t="#a5a5a5";break;case"Active":e="Adjust",t="#a5a5a5";break;case"Canceled":e="Cancel",t="#fa0000";break;case"Defeated":e="Block",t="#fa0000";break;case"Succeeded":e="Done",t="#00b84a";break;case"Queued":e="Timelapse",t="#ff9900";break;case"Expired":e="ErrorOutline",t="#a5a5a5";break;case"Executed":e="CheckCircle",t="#00b84a"}n=d.a.createElement(f.h,Object.assign({},o,{alignItems:"center",justifyContent:"center"}),d.a.createElement(f.k,{name:e,color:t,align:"center",size:o.size?o.size:this.props.isMobile?"1em":"1.8em"}));break;case"id":n=d.a.createElement(f.u,o,i.id);break;case"title":n=d.a.createElement(f.u,o,i.title);break;case"votes":var r=this.functionsUtil.BNify(i.forVotes).div(1e18),l=this.functionsUtil.BNify(i.againstVotes).div(1e18),c=r.plus(l);n=d.a.createElement(f.u,o,this.functionsUtil.formatMoney(c.toFixed(0,1),0));break;case"status":n=d.a.createElement(f.u,o,i.state);break;case"support":var u=null;if(this.props.delegate){var p=this.props.delegate.delegate.toLowerCase(),h=i.votes.find(function(e){return e.voter.toLowerCase()===p});h&&(u=h.support)}n=d.a.createElement(f.u,o,null===u?"NONE":u?"FOR":"AGAINST");break;case"forVotes":n=d.a.createElement(k.a,Object.assign({},o,{number:i.forVotes}));break;case"againstVotes":n=d.a.createElement(k.a,Object.assign({},o,{number:i.againstVotes}))}return n}}]),t}(h.Component),D=n(74),j=n(28),O=n(5174),I=n.n(O),U=n(32),S=n(772),P=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={maxWidth:.4,minWidth:.18,maxHeight:425,isOpened:!1,activeFilters:{status:null,assets:null,actions:null}},n.setFilter=function(e,t){n.setState(function(n){return{activeFilters:Object(j.a)({},n.activeFilters,Object(D.a)({},e,t))}})},n.applyFilters=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];"function"===typeof n.props.applyFilters&&n.props.applyFilters(n.state.activeFilters),e&&n.toggleOpened()},n.resetFilter=function(e){n.setState(function(t){return{activeFilters:Object(j.a)({},t.activeFilters,Object(D.a)({},e,null))}},function(){n.applyFilters(!1)})},n.resetFilters=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.setState({activeFilters:{status:null,assets:null,actions:null}},function(){"function"===typeof n.props.resetFilters&&n.props.resetFilters(),e&&n.toggleOpened()})},n.toggleOpened=function(){n.setState(function(e){return{isOpened:!e.isOpened}})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return d.a.createElement(f.h,{mb:3,top:0,width:1,zIndex:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center",position:["relative","absolute"]},d.a.createElement(U.a,{cardProps:{py:2,px:3,width:[1,this.state.isOpened?this.state.maxWidth:this.state.minWidth],style:{transition:"width 0.3s ease-in-out"}},isInteractive:!this.state.isOpened,handleClick:this.state.isOpened?null:this.toggleOpened},d.a.createElement(f.h,{width:1,style:{cursor:"pointer"},alignItems:"center",flexDirection:"row",justifyContent:"space-between",onClick:this.state.isOpened?this.toggleOpened:null},d.a.createElement(f.u,{fontSize:2,fontWeight:500,color:"copyColor"},"Filters"),d.a.createElement(f.k,{color:"copyColor",size:this.props.isMobile?"1.3em":"1.5em",name:this.state.isOpened?"Close":"Tune"})),d.a.createElement(f.h,{flexDirection:"column",style:{overflow:"hidden",transition:"max-height 0.3s ease-in-out",maxHeight:this.state.isOpened?this.state.maxHeight:0}},d.a.createElement(f.h,{mt:2,py:2,width:1,flexDirection:"row",borderTop:"1px solid ".concat(this.props.theme.colors.divider)},Object.keys(this.props.filters).map(function(t){var n=e.props.filters[t];return d.a.createElement(f.h,{flexDirection:"column",key:"filter_".concat(t),style:{flexBasis:"0",flex:"1 1 0px"}},d.a.createElement(S.a,{pb:2,fontWeight:3,fontSize:[0,2],color:"cellText"},t.toUpperCase()),Object.keys(n).map(function(a){var i=n[a],o=e.state.activeFilters[t]===a;return d.a.createElement(f.s,{my:2,fontSize:[0,2],label:i,checked:o,className:I.a.radioBtn,key:"filter_".concat(t,"_").concat(a),onChange:function(n){return e.setFilter(t,a)}})}))})),d.a.createElement(f.h,{flexDirection:"row"},d.a.createElement(f.c.Text,{fontWeight:4,fontSize:[2,3],mainColor:"copyColor",onClick:this.applyFilters},"Apply filters"),d.a.createElement(f.c.Text,{ml:3,fontWeight:4,fontSize:[2,3],mainColor:"copyColor",onClick:this.resetFilters},"Reset")))),!this.state.isOpened&&this.props.activeFilters&&Object.values(this.props.activeFilters).filter(function(e){return null!==e}).length>0&&d.a.createElement(f.h,{mt:3,width:1,flexDirection:["column","row"],alignItems:["flex-start","flex-end"],justifyContent:["flex-end","flex-start"]},Object.keys(this.props.activeFilters).map(function(t){var n=e.props.activeFilters[t];if(null!==n){var a=e.props.filters[t][n];return d.a.createElement(U.a,{cardProps:{py:2,px:3,mb:[2,0],mr:[0,3],width:[1,e.state.minWidth]},isInteractive:!0,key:"filter_".concat(t)},d.a.createElement(f.h,{width:1,style:{cursor:"pointer"},alignItems:"center",flexDirection:"row",justifyContent:"space-between",onClick:function(n){return e.resetFilter(t)}},d.a.createElement(f.u,{fontSize:2,fontWeight:500,color:"cellText",style:{textTransform:"capitalize"}},a),d.a.createElement(f.k,{name:"Close",color:"cellText",size:e.props.isMobile?"1.3em":"1.5em"})))}return null}),d.a.createElement(f.n,{mt:[2,0],fontSize:[3,2],fontWeight:[3],color:"dark-gray",hoverColor:"copyColor",textAlign:["center","left"],onClick:function(t){return e.resetFilters(!1)}},"Clear all filters")))}}]),t}(h.Component),A=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={page:1,loading:!0,rowsPerPage:10,totalRows:null,totalPages:null,activeFilters:{status:null},filters:{status:{pending:"Pending",active:"Active",canceled:"Canceled",defeated:"Defeated",succeeded:"Succeeded",queued:"Queued",expired:"Expired",executed:"Executed"}},processedRows:null,lastBlockNumber:null},n.functionsUtil=null,n.applyFilters=function(e){n.setState({activeFilters:e},function(){n.processList()})},n.resetFilters=function(){n.setState({activeFilters:{status:null}},function(){n.processList()})},n.processList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!n.props.proposals)return!1;e=e||n.state.page;var t=n.props.rowsPerPage?n.props.rowsPerPage:n.state.rowsPerPage,a=Object.values(n.props.proposals).filter(function(e){return null===n.state.activeFilters.status||e.state.toLowerCase()===n.state.activeFilters.status.toLowerCase()}).sort(function(e,t){return e.timestamp>t.timestamp?-1:1}),i=a.length,o=Math.ceil(i/t),s=[];a.forEach(function(n,a){a>=(e-1)*t&&a<(e-1)*t+t&&s.push(n)});n.setState({loading:!1,totalRows:i,totalPages:o,processedRows:s})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new E.a(this.props)}},{key:"prevPage",value:function(e){e&&e.preventDefault();var t=Math.max(1,this.state.page-1);this.setState({page:t})}},{key:"nextPage",value:function(e){e&&e.preventDefault();var t=Math.min(this.state.totalPages,this.state.page+1);this.processList(t),this.setState({page:t})}},{key:"componentDidMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.processList();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),a=n.page!==this.state.page,i=JSON.stringify(t.proposals)!==JSON.stringify(this.props.proposals),(a||i)&&this.processList();case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t="undefined"===typeof this.props.filtersEnabled||this.props.filtersEnabled,n=t&&Object.values(this.state.activeFilters).filter(function(e){return null!==e}).length>0,a=this.state.processedRows?Object.values(this.state.processedRows):null,i=a&&a.length>0;return d.a.createElement(f.h,{flexDirection:"column",width:1,m:"0 auto"},this.state.loading||null===!this.state.processedRows?d.a.createElement(m.a,{flexProps:{minHeight:"50vh",flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading Proposals..."}):d.a.createElement(f.h,{width:1,position:"relative",flexDirection:"column",id:"proposals-list-container",pt:[0,t&&i?n?"116px":5:0]},i?d.a.createElement(f.h,{width:1,flexDirection:"column"},t&&d.a.createElement(P,Object.assign({},this.props,{filters:this.state.filters,activeFilters:this.state.activeFilters,resetFilters:this.resetFilters.bind(this),applyFilters:this.applyFilters.bind(this)})),d.a.createElement(x.a,{cols:this.props.cols,isMobile:this.props.isMobile}),d.a.createElement(f.h,{id:"proposals-list",flexDirection:"column"},a.map(function(t,n){var a=t.id;return d.a.createElement(y.a,Object.assign({},e.props,{rowProps:{isInteractive:!0},id:a,proposal:t,handleClick:function(t){return a?e.props.goToSection("proposals/".concat(a)):null},key:"proposal-".concat(a),fieldComponent:C,rowId:"proposal-col-".concat(a),cardId:"proposal-card-".concat(a)}))})),d.a.createElement(f.h,{height:"50px",alignItems:"center",flexDirection:"row",justifyContent:"flex-end",id:"proposals-list-pagination"},d.a.createElement(f.h,{mr:3},d.a.createElement(f.n,{mr:1,onClick:function(t){return e.prevPage(t)}},d.a.createElement(f.k,{name:"KeyboardArrowLeft",size:"2em",color:this.state.page>1?"pageActive":"pageInactive"})),d.a.createElement(f.n,{onClick:function(t){return e.nextPage(t)}},d.a.createElement(f.k,{name:"KeyboardArrowRight",size:"2em",color:this.state.page<this.state.totalPages?"pageActive":"pageInactive"}))),d.a.createElement(f.h,{alignItems:"center"},d.a.createElement(f.u,{fontSize:1,fontWeight:3,color:"cellText"},"Page ",this.state.page," of ",this.state.totalPages)))):d.a.createElement(f.j.h3,{fontWeight:2,fontSize:[2,3],color:"dark-gray",textAlign:"center",fontFamily:"sansSerif"},"There are no proposals")))}}]),t}(h.Component),T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={value:null},n.functionsUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new E.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),JSON.stringify(t.delegate)!==JSON.stringify(this.props.delegate)&&this.loadData();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.fieldInfo,n=Object.assign({},this.props.delegate),a=n[t.name],e.t0=t.name,e.next="votes"===e.t0?6:"delegate"===e.t0?8:13;break;case 6:return a=this.functionsUtil.formatMoney(this.functionsUtil.BNify(a).toFixed(2,1),2),e.abrupt("break",14);case 8:return e.next=10,this.functionsUtil.getENSName(a);case 10:return i=e.sent,a=i||a,e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:this.setState({value:a});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=null,t=this.props.fieldInfo,n=Object.assign({},this.props.delegate),a={fontWeight:3,fontSize:[0,2],color:"cellText",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},flexProps:{justifyContent:"flex-start"}};switch(t.props&&Object.keys(t.props).length&&Object.keys(t.props).forEach(function(e){a[e]=t.props[e]}),t.name){case"avatar":e=d.a.createElement(f.h,Object.assign({},a,{alignItems:"center",justifyContent:"center"}),d.a.createElement(f.a,{opts:{size:7,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:n.delegate}}));break;default:e=null!==this.state.value?d.a.createElement(f.u,a,this.state.value):d.a.createElement(f.o,{size:"20px"})}return e}}]),t}(h.Component),M=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={page:1,filters:{},loading:!0,rowsPerPage:10,totalRows:null,totalPages:null,activeFilters:{},processedRows:null,lastBlockNumber:null},n.functionsUtil=null,n.applyFilters=function(e){n.setState({activeFilters:e},function(){n.processList()})},n.resetFilters=function(){n.setState({activeFilters:{status:null}},function(){n.processList()})},n.processList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!n.props.delegates)return!1;e=e||n.state.page;var t=n.props.rowsPerPage?n.props.rowsPerPage:n.state.rowsPerPage,a=Object.values(n.props.delegates).sort(function(e,t){return e.timestamp>t.timestamp?-1:1});null!==n.props.maxRows&&n.props.maxRows>0&&(a=a.splice(0,n.props.maxRows));var i=a.length,o=Math.ceil(i/t),s=[];a.forEach(function(n,a){a>=(e-1)*t&&a<(e-1)*t+t&&s.push(n)});n.setState({loading:!1,totalRows:i,totalPages:o,processedRows:s})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new E.a(this.props)}},{key:"prevPage",value:function(e){e&&e.preventDefault();var t=Math.max(1,this.state.page-1);this.setState({page:t})}},{key:"nextPage",value:function(e){e&&e.preventDefault();var t=Math.min(this.state.totalPages,this.state.page+1);this.processList(t),this.setState({page:t})}},{key:"componentDidMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.processList();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),a=n.page!==this.state.page,i=JSON.stringify(t.delegates)!==JSON.stringify(this.props.delegates),(a||i)&&this.processList();case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.processedRows?Object.values(this.state.processedRows):null;return d.a.createElement(f.h,{flexDirection:"column",width:1,m:"0 auto"},this.state.loading||null===!this.state.processedRows?d.a.createElement(m.a,{flexProps:{minHeight:"50vh",flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading Leaderboard..."}):d.a.createElement(f.h,{width:1,position:"relative",flexDirection:"column",id:"delegates-list-container"},t&&t.length>0?d.a.createElement(f.h,{width:1,flexDirection:"column"},d.a.createElement(x.a,{cols:this.props.cols,isMobile:this.props.isMobile}),d.a.createElement(f.h,{id:"delegates-list",flexDirection:"column"},t.map(function(t,n){var a=t.delegate;return d.a.createElement(y.a,Object.assign({},e.props,{rowProps:{isInteractive:!0},id:a,delegate:t,key:"delegate-".concat(n),handleClick:function(t){return a?e.props.goToSection("leaderboard/".concat(a)):null},fieldComponent:T,rowId:"delegate-col-".concat(n),cardId:"delegate-card-".concat(n)}))})),d.a.createElement(f.h,{height:"50px",alignItems:"center",flexDirection:"row",justifyContent:"flex-end",id:"delegates-list-pagination"},d.a.createElement(f.h,{mr:3},d.a.createElement(f.n,{mr:1,onClick:function(t){return e.prevPage(t)}},d.a.createElement(f.k,{size:"2em",name:"KeyboardArrowLeft",color:this.state.page>1?"pageActive":"pageInactive"})),d.a.createElement(f.n,{onClick:function(t){return e.nextPage(t)}},d.a.createElement(f.k,{size:"2em",name:"KeyboardArrowRight",color:this.state.page<this.state.totalPages?"pageActive":"pageInactive"}))),d.a.createElement(f.h,{alignItems:"center"},d.a.createElement(f.u,{fontSize:1,fontWeight:3,color:"cellText"},"Page ",this.state.page," of ",this.state.totalPages)))):d.a.createElement(f.j.h3,{fontWeight:2,fontSize:[2,3],color:"dark-gray",textAlign:"center",fontFamily:"sansSerif"},"There are no delegates")))}}]),t}(h.Component),F=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={delegates:[],proposals:[],totalSupply:0,dataLoaded:!1,votesDelegated:0},n.functionsUtil=null,n.governanceUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,i,s,r,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.governanceUtil.getDelegates(),this.governanceUtil.getProposals(),this.governanceUtil.getTotalSupply()]);case 2:t=e.sent,n=Object(a.a)(t,3),i=n[0],s=n[1],r=n[2],l=i.reduce(function(e,t){return e+=parseFloat(t.votes)},0),!0,this.setState({delegates:i,proposals:s,dataLoaded:!0,totalSupply:r,votesDelegated:l});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.a.createElement(f.b,{width:1},d.a.createElement(b.a,{mb:[3,4]},"Governance Overview"),this.state.dataLoaded?d.a.createElement(f.b,{width:1},d.a.createElement(f.h,{width:1,mb:[3,4],alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},d.a.createElement(f.h,{mb:[2,0],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,labelTooltip:null,title:"Votes Delegated",minHeight:["130px","143px"],titleMinHeight:["auto","50px"],value:this.functionsUtil.formatMoney(this.state.votesDelegated.toFixed(2,1),2)})),d.a.createElement(f.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,labelTooltip:null,title:"Voting Addresses",minHeight:["130px","143px"],titleMinHeight:["auto","50px"],value:this.state.delegates.length})),d.a.createElement(f.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,labelTooltip:null,title:"Proposals",minHeight:["130px","143px"],titleMinHeight:["auto","50px"],value:this.state.proposals.length})),d.a.createElement(f.h,{pl:[0,1],mb:[2,0],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,labelTooltip:null,title:"IDLE Circulating",minHeight:["130px","143px"],titleMinHeight:["auto","50px"],value:this.functionsUtil.formatMoney(this.state.totalSupply,0)}))),d.a.createElement(f.b,{width:1,mt:[4,5]},d.a.createElement(b.a,{mb:[3,4]},"Recent Proposals"),d.a.createElement(f.h,{mb:[3,4],width:1,id:"transactions",flexDirection:"column"},d.a.createElement(A,Object.assign({},this.props,{rowsPerPage:5,filtersEnabled:!1,proposals:this.state.proposals,cols:[{title:"#",props:{width:[.1,.05]},fields:[{name:"id",props:{}}]},{title:"DATE",mobile:!1,props:{width:[.15,.12]},fields:[{name:"date"}]},{title:"TITLE",props:{width:[.75,.6]},fields:[{name:"title"}]},{mobile:!1,title:"VOTES",props:{width:[.11,.11]},fields:[{name:"votes"}]},{title:"STATUS",props:{width:[.15,.12],alignItems:["center","flex-start"],justifyContent:["center","flex-start"]},parentProps:{justifyContent:["center","flex-start"]},fields:[{name:"statusIcon",props:{mr:[0,2]}},{mobile:!1,name:"status"}]}]})))),d.a.createElement(f.b,{width:1},d.a.createElement(b.a,{mb:[3,4]},"Leaderboard"),d.a.createElement(f.h,{mb:[3,4],width:1,id:"transactions",flexDirection:"column"},d.a.createElement(M,Object.assign({maxRows:100},this.props,{rowsPerPage:5,delegates:this.state.delegates,cols:[{title:"RANK",props:{width:[.13,.08]},fields:[{name:"rank"}]},{title:"ADDRESS",props:{width:[.6,.5]},fields:[{mobile:!1,name:"avatar",props:{mr:2}},{name:"delegate"}]},{title:"VOTES",props:{width:[.27,.12]},fields:[{name:"votes"}]},{mobile:!1,title:"VOTE WEIGHT",props:{width:[.15,.15]},fields:[{name:"vote_weight",parentProps:{alignItems:"center"}}]},{mobile:!1,title:"PROPOSALS VOTED",props:{width:[.15,.15]},fields:[{name:"proposals",parentProps:{alignItems:"center"}}]}]}))))):d.a.createElement(m.a,{flexProps:{minHeight:"50vh",flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading Data..."}))}}]),t}(h.Component),z=n(1146),B=n(488),H=n(77),V=n(166),W=n(5100),L=n.n(W),N=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={newDelegate:"",processing:{txHash:null,loading:!1}},n.functionsUtil=null,n.governanceUtil=null,n.checkNewDelegate=function(){return n.functionsUtil.checkAddress(n.state.newDelegate)&&n.state.newDelegate.toLowerCase()!==n.props.currentDelegate.toLowerCase()},n.changeDelegate=function(e){var t=e.target.value;n.setState({newDelegate:t})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelTransaction",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setDelegate",value:function(e){var t=this;if(this.functionsUtil.checkAddress(e)){this.governanceUtil.setDelegate(e,function(n,a){var i={eventCategory:"Delegate",eventAction:e,eventLabel:n.status};a&&(i.eventLabel=t.functionsUtil.getTransactionError(a)),(a||"error"!==i.status)&&t.functionsUtil.sendGoogleAnalyticsEvent(i),"function"===typeof t.props.loadUserData&&"success"===n.status&&t.props.loadUserData(),t.setState({processing:{txHash:null,loading:!1}})},function(e){var n=e.transactionHash;t.setState(function(e){return{processing:Object(j.a)({},e.processing,{txHash:n})}})}),this.setState(function(e){return{processing:Object(j.a)({},e.processing,{loading:!0})}})}return null}},{key:"render",value:function(){var e=this,t=0===parseInt(this.props.currentDelegate);return d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},this.props.account?this.props.currentDelegate?d.a.createElement(U.a,{cardProps:{mb:2,py:[2,3],px:[3,4],width:[1,.5],position:"relative"},isInteractive:!1},this.props.canClose&&d.a.createElement(f.b,{top:"0",zIndex:1,right:"0",position:"absolute"},d.a.createElement(f.c.Text,{icononly:!0,icon:"Close",size:"2.5em",mainColor:"statValue",onClick:this.props.closeFunc})),d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.u,{mb:1,fontWeight:3,color:"statValue",textAlign:"center"},"Current Delegate:"),d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",justifyContent:t?"center":"stretch"},t?d.a.createElement(f.u,{fontWeight:3,fontSize:[1,2],color:"dark-gray",textAlign:"center"},"Undelegated"):d.a.createElement(f.f,{width:1,address:this.props.currentDelegate,className:"light"===this.props.themeMode?L.a.ethInput:L.a.ethInputDark})),this.state.processing&&this.state.processing.loading?d.a.createElement(f.h,{width:1,flexDirection:"column"},d.a.createElement(V.a,Object.assign({},this.props,{waitText:"Delegate estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing delegate request...",cancelTransaction:this.cancelTransaction.bind(this)}))):d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.u,{mb:1,fontWeight:3,color:"statValue",textAlign:"center"},"Set New Delegate:"),d.a.createElement(f.m,{min:0,type:"text",width:"100%",required:!0,height:"3.4em",borderRadius:2,fontWeight:500,textAlign:"center",borderColor:"cardBorder",backgroundColor:"cardBg",boxShadow:"none !important",value:this.state.newDelegate,placeholder:"Insert delegate address",onChange:this.changeDelegate.bind(this),border:"1px solid ".concat(this.props.theme.colors.divider)}),d.a.createElement(f.h,{mt:3,width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(H.a,{buttonProps:{mx:1,fontSize:[1,2],width:["auto","10em"],disabled:!this.checkNewDelegate()},handleClick:function(t){return e.setDelegate(e.state.newDelegate)}},"Delegate"),d.a.createElement(H.a,{buttonProps:{mx:1,fontSize:[1,2],width:["auto","10em"],mainColor:this.props.theme.colors.redeem,disabled:this.props.currentDelegate.toLowerCase()===this.props.account.toLowerCase()},handleClick:function(t){return e.setDelegate(e.props.account)}},"Self-delegate"))))):d.a.createElement(m.a,{flexProps:{minHeight:"50vh",flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading Delegate..."}):d.a.createElement(f.h,{width:[1,.36],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},d.a.createElement(B.a,this.props)))}}]),t}(h.Component),R=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return d.a.createElement(f.b,{width:1},d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},d.a.createElement(z.a,Object.assign({},this.props,{text:"Governance",path:["Delegate votes"],isMobile:this.props.isMobile,handleClick:function(t){return e.props.goToSection("")}}))),d.a.createElement(f.b,{width:1},d.a.createElement(b.a,{mb:[3,4]},"Delegate Votes"),d.a.createElement(f.h,{px:[0,3],mb:[3,4],width:1,flexDirection:"column",id:"delegate-container"},d.a.createElement(N,this.props))))}}]),t}(h.Component),_=n(5176),G=n.n(_),q=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={title:"",actions:[],txError:!1,actionValue:0,customABI:null,description:"",processing:{txHash:null,loading:!1},validated:!1,newAction:!1,editAction:null,actionInputs:null,actionValid:!1,customAddress:null,contractOptions:[],proposalCreated:!1,functionsOptions:null,selectedContract:null,selectedFunction:null,selectedSignature:null,availableFunctions:null,availableContracts:null},n.functionsUtil=null,n.governanceUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.validateForm(),this.checkInputs(),n.customABI!==this.state.customABI&&"custom"===this.state.selectedContract&&this.loadFunctionsOptions();case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=this.functionsUtil.getGlobalConfig(["governance","props","availableContracts"]),t=[{label:"Select a Contract",value:null}];Object.keys(e).forEach(function(e){t.push({label:e,value:e})}),t.push({label:"Custom",value:"custom"}),this.setState({contractOptions:t,availableContracts:e})}},{key:"handleInput",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=t.target.value;this.setState(Object(D.a)({},e,n))}},{key:"validateForm",value:function(){var e=this.state.title.length>0&&this.state.description.length>0&&Object.values(this.state.actions).length>0;e!==this.state.validated&&this.setState({validated:e})}},{key:"getContractABI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=e||this.state.selectedContract;var t=null;try{t="custom"===e?JSON.parse(this.state.customABI):this.state.availableContracts[e]}catch(n){}return t}},{key:"loadFunctionsOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null,n=null,a=this.getContractABI(e);a&&(t=(n=a.filter(function(e){return!e.constant&&"function"===e.type&&e.inputs.length>0&&["nonpayable","payable"].includes(e.stateMutability)})).map(function(e,t){return{label:e.name,value:t}})).unshift({label:"Select a Function",value:null}),this.setState({actionInputs:null,functionsOptions:t,selectedFunction:null,selectedSignature:null,availableFunctions:n})}},{key:"changeContract",value:function(e){var t=e.target.value;if(t!==this.state.selectedContract){var n={selectedContract:t,selectedFunction:null,selectedSignature:null};if(null!==t)this.getContractABI(t)?this.loadFunctionsOptions(t):n.functionsOptions=null;this.setState(n)}}},{key:"changeFunction",value:function(e){var t=null,n=e.target.value,a=this.state.availableFunctions.find(function(e,t){return t===parseInt(n)});a?t=new Array(a.inputs.length):a=null,this.setState({actionValue:0,actionInputs:t,selectedFunction:a,selectedSignature:n})}},{key:"validateField",value:function(e,t){if(null===e)return!1;var n=!0;if("json"===t)n=this.functionsUtil.isValidJSON(e);else{var a=this.getPatternByFieldType(t);a&&(n=null!==e.toString().match(a))}return n}},{key:"getPatternByFieldType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;switch(e){case"address":n="^0x[a-fA-F0-9]{40}$";break;case"address[]":n="^((0x[a-fA-F0-9]{40})[,]?)+$";break;case"string":n="[\\w]+";break;case"bool":n="(0|1)";break;case"uint256":case"uint8":n="[\\d]+";break;default:n=null}return!t&&n&&(n=new RegExp(n)),n}},{key:"checkInputs",value:function(){var e=this;if(!this.state.actionInputs||!this.state.selectedFunction)return!1;var t=this.state.selectedFunction.inputs,n=Object.values(this.state.actionInputs).length===t.length;n&&Object.values(this.state.actionInputs).forEach(function(a,i){var o=t[i],s=e.getPatternByFieldType(o.type),r=!s||null!==a.match(s);n=n&&r}),n&&"custom"===this.state.selectedContract&&(n=n&&this.validateField(this.state.customABI,"json")&&this.validateField(this.state.customAddress,"address")),n!==this.state.actionValid&&this.setState({actionValid:n})}},{key:"valueChange",value:function(e,t){var n=e.target.value;this.setState({actionValue:n})}},{key:"inputChange",value:function(e,t){var n=e.target.value;this.setState(function(e){return{actionInputs:Object(j.a)({},e.actionInputs,Object(D.a)({},t,n))}})}},{key:"deleteAction",value:function(){if(null!==this.state.editAction){var e=this.state.actions;if(e[this.state.editAction]){delete e[this.state.editAction],e=Object.values(e);this.setState({actions:e,editAction:null,actionInputs:null,selectedContract:null,selectedFunction:null,selectedSignature:null})}}}},{key:"addAction",value:function(){var e=this,t=Object.values(this.state.actionInputs).filter(function(e){return e.length>0}).map(function(t,n){var a=e.state.selectedFunction.inputs[n];switch(a.type){case"address[]":t=t.split(",");break;case"uint256[]":t=t.split(",").map(function(t){return e.functionsUtil.toBN(t)});break;case"uint256":t=e.functionsUtil.toBN(t);break;default:"[]"===a.type.substr(-2)&&(t=t.split(","))}return t});if(t.length<this.state.selectedFunction.inputs.length)return!1;var n=null;if("custom"!==this.state.selectedContract){var a=this.functionsUtil.getContractByName(this.state.selectedContract);if(!a)return!1;n=a._address}else{if(!this.functionsUtil.isValidJSON(this.state.customABI))return!1;n=this.state.customAddress}var i=this.state.customABI,o=this.state.customAddress,s=this.state.selectedFunction.inputs.map(function(e){return e.type}),r=this.props.web3.eth.abi.encodeParameters(s,t),l=this.state.selectedFunction.name+"("+s.join(",")+")",c={params:{value:this.state.actionValue?this.functionsUtil.BNify(this.state.actionValue).toFixed(0):this.functionsUtil.BNify(0).toFixed(0),target:n,calldata:r,signature:l},customABI:i,customAddress:o,inputs:this.state.actionInputs,function:this.state.selectedFunction,contract:this.state.selectedContract,signature:this.state.selectedSignature},u=Object.values(this.state.actions);null===this.state.editAction?u.push(c):u[this.state.editAction]=c;this.setState({actions:u,newAction:!1,editAction:null})}},{key:"setEditAction",value:function(e){if(!this.state.actions[e])return!1;if(e===this.state.editAction)return!1;var t=this.state.actions[e],n=t.inputs,a=t.customABI,i=t.params.value,o=t.contract,s=t.function,r=t.customAddress,l=t.signature;this.setState({customABI:a,newAction:!1,editAction:e,actionValue:i,actionInputs:n,customAddress:r,selectedContract:o,selectedFunction:s,selectedSignature:l})}},{key:"setNewAction",value:function(e){if(e===this.state.newAction)return!1;this.setState({newAction:e,editAction:null,selectedContract:null,selectedFunction:null})}},{key:"cancelTransaction",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=[],a=[],i=[],o=[],s="#"+this.state.title+"\n"+this.state.description;return Object.values(this.state.actions).forEach(function(e){a.push(e.params.value),n.push(e.params.target),o.push(e.params.calldata),i.push(e.params.signature)}),this.governanceUtil.propose(n,a,i,o,s,function(e,n){var a={eventLabel:e.status,eventAction:"propose",eventCategory:"Proposal"};n&&(a.eventLabel=t.functionsUtil.getTransactionError(n)),(n||"error"!==a.status)&&t.functionsUtil.sendGoogleAnalyticsEvent(a);var i={processing:{txHash:null,loading:!1}};"success"===e.status?(i.actionValue=0,i.customABI=null,i.newAction=null,i.editAction=null,i.actionInputs=null,i.customAddress=null,i.proposalCreated=!0,i.selectedContract=null,i.functionsOptions=null,i.selectedFunction=null,i.selectedSignature=null):i.txError=!0,t.setState(i)},function(e){var n=e.transactionHash;t.setState(function(e){return{processing:Object(j.a)({},e.processing,{txHash:n})}})}),this.setState(function(e){return{processing:Object(j.a)({},e.processing,{loading:!0})}}),!1}},{key:"formValidated",value:function(){}},{key:"render",value:function(){var e=this;return d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(b.a,{mb:[3,4]},"Create Proposal"),this.state.proposalCreated?d.a.createElement(U.a,{cardProps:{py:3,px:4,width:[1,"auto"]}},d.a.createElement(f.h,{alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.k,{name:"Done",align:"center",size:this.props.isMobile?"1.4em":"2.2em",color:this.props.theme.colors.transactions.status.completed}),d.a.createElement(f.u,{mt:1,fontWeight:3,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"The proposal has been successfully created"))):this.props.votes&&this.functionsUtil.BNify(this.props.votes).gte(this.props.proposalThreshold)?d.a.createElement(f.i,{width:1,validated:this.state.validated,onSubmit:this.handleSubmit.bind(this)},d.a.createElement(f.h,{mb:2,width:1,flexDirection:["column","row"],justifyContent:["center","space-between"]},d.a.createElement(f.h,{width:[1,.48],flexDirection:"column"},d.a.createElement(f.h,{pb:2,width:1,mb:[2,3],borderColor:"divider",borderBottom:"1px solid transparent"},d.a.createElement(f.j.h4,{fontSize:[2,3],fontWeight:[2,3]},"Proposal Description")),d.a.createElement(f.h,{flexDirection:"column"},d.a.createElement(f.g,{width:1,label:"Title",validated:this.state.validated},d.a.createElement(f.m,{required:!0,width:1,type:"text",className:G.a.input,value:this.state.title,borderColor:"cardBorder",backgroundColor:"cardBg",placeholder:"Title of your proposal",onChange:function(t){return e.handleInput("title",t)}}))),d.a.createElement(f.h,{flexDirection:"column"},d.a.createElement(f.g,{width:1,label:"Description",validated:this.state.validated},d.a.createElement(f.v,{required:!0,rows:8,width:1,className:G.a.input,borderColor:"cardBorder",backgroundColor:"cardBg",value:this.state.description,placeholder:"Description of your proposal",onChange:function(t){return e.handleInput("description",t)}})))),d.a.createElement(f.h,{width:[1,.48],flexDirection:"column"},d.a.createElement(f.h,{pb:2,width:1,mb:[2,3],borderColor:"divider",borderBottom:"1px solid transparent"},d.a.createElement(f.j.h4,{fontSize:[2,3],fontWeight:[2,3]},"Actions")),d.a.createElement(f.h,{flexDirection:"column"},Object.values(this.state.actions).map(function(t,n){return d.a.createElement(U.a,{cardProps:{py:2,px:3,mb:3,width:1},titleParentProps:{ml:0,my:1,justifyContent:"center"},titleProps:{fontSize:2,fontWeight:3},isInteractive:!0,key:"action_".concat(n),handleClick:function(t){return e.setEditAction(n)},title:e.state.editAction===n?"Edit Action":null},e.state.editAction===n?d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Contract"},d.a.createElement(f.t,{style:{width:"100%",color:e.props.theme.colors.counter,backgroundColor:e.props.theme.colors.cardBg},required:!0,value:e.state.selectedContract,options:e.state.contractOptions,onChange:e.changeContract.bind(e)})),e.state.selectedContract&&"custom"===e.state.selectedContract&&d.a.createElement(f.h,{width:1,flexDirection:"column"},d.a.createElement(f.g,{width:1,label:"Contract Address",validated:e.state.validated},d.a.createElement(f.m,{required:!0,width:1,type:"text",className:G.a.input,borderColor:"cardBorder",backgroundColor:"cardBg",placeholder:"Custom contract address",pattern:e.getPatternByFieldType("address",!0),onChange:function(t){return e.handleInput("customAddress",t,"address")},value:e.state.customAddress?e.state.customAddress:""})),d.a.createElement(f.g,{width:1,label:"Custom ABI",validated:e.state.validated},d.a.createElement(f.v,{required:!0,rows:8,width:1,className:G.a.input,placeholder:"Insert the ABI of your contract",onChange:function(t){return e.handleInput("customABI",t,"json")},value:e.state.customABI?e.state.customABI:""}))),e.state.selectedContract&&e.state.functionsOptions&&d.a.createElement(f.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Function"},d.a.createElement(f.t,{style:{width:"100%",color:e.props.theme.colors.counter,backgroundColor:e.props.theme.colors.cardBg},required:!0,options:e.state.functionsOptions,onChange:e.changeFunction.bind(e),value:e.state.selectedSignature?e.state.selectedSignature:""})),e.state.selectedFunction&&e.state.selectedFunction.payable&&d.a.createElement(f.g,{label:"Value",style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"}},d.a.createElement(f.m,{required:!0,width:1,type:"number",className:G.a.input,borderColor:"cardBorder",backgroundColor:"cardBg",placeholder:"Enter ETH value",onChange:function(t){return e.valueChange(t)},value:e.state.actionValue?e.state.actionValue:0})),e.state.selectedFunction&&e.state.selectedFunction.inputs.map(function(t,n){var a=["uint256","bool"].includes(t.type)?"number":"text",i=e.getPatternByFieldType(t.type,!0);return d.a.createElement(f.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},key:"input_".concat(n),label:"".concat(t.name," (").concat(t.type,")")},d.a.createElement(f.m,{required:!0,width:1,type:a,pattern:i,className:G.a.input,borderColor:"cardBorder",backgroundColor:"cardBg",placeholder:"".concat(t.name," (").concat(t.type,")"),onChange:function(t){return e.inputChange(t,n)},value:e.state.actionInputs[n]?e.state.actionInputs[n]:""}))}),e.state.selectedContract&&e.state.selectedFunction&&d.a.createElement(f.h,{mb:2,width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(H.a,{buttonProps:{px:[0,4],width:[1,"auto"],type:"button",disabled:!e.state.actionValid},handleClick:e.addAction.bind(e)},"Save Action"),d.a.createElement(f.n,{mt:2,color:"red",hoverColor:"red",onClick:e.deleteAction.bind(e)},"Delete Action"))):d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},d.a.createElement(f.u,null,t.contract," - ",t.params.signature),d.a.createElement(f.h,{p:["4px","7px"],borderRadius:"50%",alignItems:"center",justifyContent:"center",backgroundColor:e.props.theme.colors.transactions.actionBg.redeem},d.a.createElement(f.k,{name:"Edit",align:"center",color:"redeem",size:e.props.isMobile?"1.2em":"1.4em"}))))}),(!this.state.actions||Object.values(this.state.actions).length<this.props.proposalMaxOperations)&&d.a.createElement(U.a,{cardProps:{py:2,px:3,mb:3,width:1},titleParentProps:{ml:0,my:1,justifyContent:"center"},titleProps:{fontSize:2,fontWeight:3},isInteractive:!0,handleClick:function(t){return e.setNewAction(!0)},title:this.state.newAction?"Add Action":null},this.state.newAction?d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Contract"},d.a.createElement(f.t,{style:{width:"100%",color:this.props.theme.colors.counter,backgroundColor:this.props.theme.colors.cardBg},required:!0,options:this.state.contractOptions,onChange:this.changeContract.bind(this)})),this.state.selectedContract&&"custom"===this.state.selectedContract&&d.a.createElement(f.h,{width:1,flexDirection:"column"},d.a.createElement(f.g,{width:1,label:"Contract Address",validated:this.state.validated},d.a.createElement(f.m,{required:!0,width:1,type:"text",className:G.a.input,borderColor:"cardBorder",backgroundColor:"cardBg",placeholder:"Custom contract address",pattern:this.getPatternByFieldType("address",!0),onChange:function(t){return e.handleInput("customAddress",t,"address")},value:this.state.customAddress?this.state.customAddress:""})),d.a.createElement(f.g,{width:1,label:"Custom ABI",validated:this.state.validated},d.a.createElement(f.v,{required:!0,rows:8,width:1,className:G.a.input,placeholder:"Insert the ABI of your contract",onChange:function(t){return e.handleInput("customABI",t,"json")},value:this.state.customABI?this.state.customABI:""}))),this.state.selectedContract&&this.state.functionsOptions&&d.a.createElement(f.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Function"},d.a.createElement(f.t,{style:{width:"100%",color:this.props.theme.colors.counter,backgroundColor:this.props.theme.colors.cardBg},required:!0,options:this.state.functionsOptions,onChange:this.changeFunction.bind(this),value:this.state.selectedSignature?this.state.selectedSignature:""})),this.state.selectedFunction&&this.state.selectedFunction.payable&&d.a.createElement(f.g,{label:"Value",style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"}},d.a.createElement(f.m,{required:!0,width:1,type:"number",className:G.a.input,borderColor:"cardBorder",backgroundColor:"cardBg",placeholder:"Enter ETH value",onChange:function(t){return e.valueChange(t)},value:this.state.actionValue?this.state.actionValue:0})),this.state.selectedFunction&&this.state.selectedFunction.inputs.map(function(t,n){var a=["uint256","bool"].includes(t.type)?"number":"text",i=e.getPatternByFieldType(t.type,!0);return d.a.createElement(f.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},key:"input_".concat(n),label:"".concat(t.name," (").concat(t.type,")")},d.a.createElement(f.m,{required:!0,width:1,type:a,pattern:i,className:G.a.input,borderColor:"cardBorder",backgroundColor:"cardBg",placeholder:"".concat(t.name," (").concat(t.type,")"),onChange:function(t){return e.inputChange(t,n)},value:e.state.actionInputs[n]?e.state.actionInputs[n]:""}))}),this.state.selectedContract&&this.state.selectedFunction&&d.a.createElement(f.h,{width:1,alignItems:"center",justifyContent:"center"},d.a.createElement(H.a,{buttonProps:{px:[0,4],type:"button",width:[1,"auto"],disabled:!this.state.actionValid},handleClick:this.addAction.bind(this)},"Add Action"))):d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},d.a.createElement(f.u,null,"Add Action"),d.a.createElement(f.h,{p:["4px","7px"],borderRadius:"50%",alignItems:"center",justifyContent:"center",backgroundColor:this.props.theme.colors.transactions.actionBg.redeem},d.a.createElement(f.k,{name:"Add",align:"center",color:"redeem",size:this.props.isMobile?"1.2em":"1.4em"}))))))),d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",justifyContent:"center"},this.state.processing&&this.state.processing.loading?d.a.createElement(V.a,Object.assign({},this.props,{hash:this.state.processing.txHash,waitText:"Proposal creation estimated in",endMessage:"Finalizing proposal creation request...",cancelTransaction:this.cancelTransaction.bind(this)})):d.a.createElement(H.a,{buttonProps:{type:"submit",width:[1,"15em"],disabled:!this.state.validated}},"Submit Proposal"))):this.props.balance&&this.functionsUtil.BNify(this.props.balance).gte(this.props.proposalThreshold)?d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.u,{mb:3,fontWeight:2,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"Please delegate your votes to yourself to create a new proposal."),d.a.createElement(N,this.props)):d.a.createElement(f.u,{fontWeight:2,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"You need at least ",this.functionsUtil.formatMoney(this.functionsUtil.fixTokenDecimals(this.props.proposalThreshold,18),0)," delegated votes to send a new proposal."))}}]),t}(h.Component),Y=n(121),J=n(85),K=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={vote:null,loaded:!1,userVote:null,processing:{txHash:null,loading:!1},voteSucceed:!1,showDelegateBox:!1},n.functionsUtil=null,n.governanceUtil=null,n.setVote=function(e){n.setState({vote:e})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),t.account!==this.props.account&&this.loadData();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.account&&(t=this.props.proposal.votes.find(function(e){return e.voter.toLowerCase()===n.props.account.toLowerCase()}),this.setState({userVote:t,loaded:!0}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancelTransaction",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleDelegateBox",value:function(e){this.setState({showDelegateBox:e})}},{key:"castVote",value:function(){var e=this;if(null===this.state.vote)return!1;var t="for"===this.state.vote,n=parseInt(this.props.proposal.id);this.governanceUtil.castVote(n,t,function(t,n){var a={eventCategory:"Proposal",eventAction:"CastVote",eventLabel:e.state.vote};n&&(a.eventLabel=e.functionsUtil.getTransactionError(n)),(n||"error"!==a.status)&&e.functionsUtil.sendGoogleAnalyticsEvent(a);var i=null;"success"===t.status&&(i={voter:e.props.account,votes:e.props.votes.toString(),support:"for"===e.state.vote,proposalId:e.props.proposal.id},"function"===typeof e.props.callback&&e.props.callback()),e.setState({userVote:i,processing:{txHash:null,loading:!1}})},function(t){var n=t.transactionHash;e.setState(function(e){return{processing:Object(j.a)({},e.processing,{txHash:n})}})}),this.setState(function(e){return{processing:Object(j.a)({},e.processing,{loading:!0})}})}},{key:"render",value:function(){var e=this;return this.state.userVote?d.a.createElement(f.h,{p:3,width:1,mb:[2,3],alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.u,{mb:2,fontWeight:4,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"You have voted for the proposal #",this.props.proposal.id,":"),d.a.createElement(U.a,{cardProps:{mb:2,py:[2,3],px:[3,4],width:"auto"},isInteractive:!1},d.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(C,{fieldInfo:{name:"statusIcon",state:this.state.userVote.support?"Executed":"Canceled",props:{mr:2}}}),d.a.createElement(f.u,{fontWeight:3,fontSize:[2,3]},this.state.userVote.support?"For":"Against"))),d.a.createElement(f.u,{fontSize:1,fontWeight:500,color:"statValue",textAlign:"center"},"voted with ",this.functionsUtil.formatMoney(this.functionsUtil.fixTokenDecimals(this.state.userVote.votes,18).toFixed(0,1),0)," votes")):"Active"===this.props.proposal.state&&d.a.createElement(f.b,{p:3,width:1,mb:[2,3]},this.state.loaded?!this.props.votes||this.functionsUtil.BNify(this.props.votes).lte(0)||this.state.showDelegateBox?d.a.createElement(N,Object.assign({},this.props,{canClose:this.state.showDelegateBox,closeFunc:function(t){return e.toggleDelegateBox(!1)}})):d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.u,{mb:1,fontWeight:4,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"Cast your vote for the proposal #",this.props.proposal.id,":"),d.a.createElement(f.u,{mb:2,fontSize:1,color:"red",fontWeight:500,textAlign:"center"},"Make sure you have been delegated before this proposal has been submitted"),this.state.processing&&this.state.processing.loading?d.a.createElement(f.h,{width:1,flexDirection:"column"},d.a.createElement(V.a,Object.assign({},this.props,{waitText:"Vote estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing vote request...",cancelTransaction:this.cancelTransaction.bind(this)}))):d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.h,{mb:2,width:[1,.4],alignItems:"center",flexDirection:"row",justifyContent:"space-between"},d.a.createElement(U.a,{cardProps:{p:[2,3],width:.48,onMouseDown:function(){e.setVote("for")}},isInteractive:!0,isActive:"for"===this.state.vote},d.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(C,{fieldInfo:{name:"statusIcon",state:"Executed",props:{mr:2}}}),d.a.createElement(f.u,{fontWeight:3,fontSize:[2,3]},"For"))),d.a.createElement(U.a,{cardProps:{p:[2,3],width:.48,onMouseDown:function(){e.setVote("against")}},isInteractive:!0,isActive:"against"===this.state.vote},d.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(C,{fieldInfo:{name:"statusIcon",state:"Canceled",props:{mr:2}}}),d.a.createElement(f.u,{fontWeight:3,fontSize:[2,3]},"Against")))),d.a.createElement(f.u,{mb:0,fontSize:1,fontWeight:500,color:"statValue",textAlign:"center"},"You have ",this.functionsUtil.formatMoney(this.functionsUtil.fixTokenDecimals(this.props.votes,18).toFixed(0,1),0)," votes delegated"),this.props.balance&&this.functionsUtil.BNify(this.props.balance).gt(0)&&d.a.createElement(f.n,{mt:0,mainColor:"primary",hoverColor:"primary",onClick:function(t){return e.toggleDelegateBox(!0)}},"change delegate"),d.a.createElement(H.a,{buttonProps:{mt:2,width:[1,.2],disabled:null===this.state.vote},handleClick:this.castVote.bind(this)},"Vote"))):d.a.createElement(m.a,{flexProps:{flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading data..."}))}}]),t}(h.Component),Q=n(1149),$=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={showActionParams:null,processing:{action:null,txHash:null,loading:!1}},n.functionsUtil=null,n.governanceUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"toggleShowParams",value:function(e){this.state.showActionParams===e&&(e=null),this.setState({showActionParams:e})}},{key:"cancelTransaction",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({processing:{action:null,txHash:null,loading:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"queueProposal",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e,t){var n={eventAction:"queue",eventCategory:"Governance",eventLabel:a.props.proposal.id};(t||"error"!==n.status)&&a.functionsUtil.sendGoogleAnalyticsEvent(n),"function"===typeof a.props.loadData&&"success"===e.status&&a.props.loadData(),a.setState({processing:{action:null,txHash:null,loading:!1}})},n=function(e){var t=e.transactionHash;a.setState(function(e){return{processing:Object(j.a)({},e.processing,{txHash:t})}})},this.governanceUtil.queueProposal(this.props.proposal.id,t,n),this.setState(function(e){return{processing:Object(j.a)({},e.processing,{loading:!0,action:"Queue"})}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"executeProposal",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e,t){var n={eventAction:"execute",eventCategory:"Governance",eventLabel:a.props.proposal.id};(t||"error"!==n.status)&&a.functionsUtil.sendGoogleAnalyticsEvent(n),"function"===typeof a.props.loadData&&"success"===e.status&&a.props.loadData(),a.setState({processing:{action:null,txHash:null,loading:!1}})},n=function(e){var t=e.transactionHash;a.setState(function(e){return{processing:Object(j.a)({},e.processing,{txHash:t})}})},this.governanceUtil.executeProposal(this.props.proposal.id,t,n),this.setState(function(e){return{processing:Object(j.a)({},e.processing,{loading:!0,action:"Execute"})}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),window.loadData=this.props.loadData;case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.proposal,n=1e3*t.states[0].start_time,a=Object.values(t.states).pop(),i=t.votes&&t.votes.length>0,o=this.functionsUtil.BNify(t.forVotes).div(1e18),s=this.functionsUtil.BNify(t.againstVotes).div(1e18),r=o.plus(s),l=o.div(r).times(100).toFixed(2),c=s.div(r).times(100).toFixed(2),u=1e3*(t.states[0].start_time+parseInt(this.functionsUtil.blocksToSeconds(this.props.votingPeriod))),p=t.votes.filter(function(e){return e.support}).sort(function(t,n){return e.functionsUtil.BNify(t.votes).lt(e.functionsUtil.BNify(n.votes))?1:-1}),h=t.votes.filter(function(e){return!e.support}).sort(function(t,n){return e.functionsUtil.BNify(t.votes).lt(e.functionsUtil.BNify(n.votes))?1:-1}),m="succeeded"===t.state.toLowerCase(),g="queued"===t.state.toLowerCase()&&parseInt((new Date).getTime()/1e3)-parseInt(t.states[t.states.length-1].start_time)>=parseInt(this.props.timelockDelay);return d.a.createElement(f.b,{width:1},d.a.createElement(b.a,{mb:[3,4]},t.title),d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},d.a.createElement(f.h,{mb:[2,0],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{labelTooltip:null,title:"Proposal ID",value:"#".concat(t.id),minHeight:["110px","143px"],titleMinHeight:["auto","50px"],label:"Created on ".concat(this.functionsUtil.strToMoment(n).utc().format("DD MMM, YYYY @ HH:mm")," UTC")})),d.a.createElement(f.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{titleMinHeight:["auto","50px"],minHeight:["110px","143px"],labelTooltip:null,title:"Proposer",label:null},d.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(f.a,{opts:{size:12,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:t.address}}),d.a.createElement(J.a,{href:this.functionsUtil.getEtherscanAddressUrl(t.proposer)},d.a.createElement(f.h,{flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start"},d.a.createElement(Q.a,Object.assign({ml:2,lineHeight:1},this.props,{fontSize:[3,4],fontWeight:[3,4],color:"statValue",hash:t.proposer})),d.a.createElement(f.k,{ml:1,size:"1.2em",name:"OpenInNew",color:"statValue"})))))),d.a.createElement(f.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{title:"Status",labelTooltip:null,minHeight:["110px","143px"],titleMinHeight:["auto","50px"],label:"Active"===t.state?"Ending on ".concat(this.functionsUtil.strToMoment(u).utc().format("DD MMM, YYYY @ HH:mm")," UTC"):"Updated on ".concat(this.functionsUtil.strToMoment(1e3*a.start_time).utc().format("DD MMM, YYYY @ HH:mm")," UTC")},d.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(C,Object.assign({},this.props,{proposal:t,fieldInfo:{name:"statusIcon",props:{size:this.props.isMobile?"1.7em":"2em"}}})),d.a.createElement(f.u,{ml:2,lineHeight:1,fontSize:[4,5],fontWeight:[3,4],color:"statValue"},t.state)))),d.a.createElement(f.h,{pl:[0,1],mb:[2,0],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,title:"Total Votes",labelTooltip:null,minHeight:["110px","143px"],titleMinHeight:["auto","50px"],value:this.functionsUtil.formatMoney(r.toFixed(0,1),0)}))),this.props.account&&d.a.createElement(K,Object.assign({},this.props,{callback:this.props.loadData})),d.a.createElement(f.h,{width:1,mb:[2,3],id:"details-container",justifyContent:"space-between",flexDirection:["column","row"]},d.a.createElement(U.a,{cardProps:{p:3,mb:[2,0],mr:[0,1],width:[1,.5]},title:"Actions",titleParentProps:{mt:0,ml:0}},d.a.createElement(f.h,{pt:2,width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},t.actions.signatures.map(function(n,a){var i=t.actions.calldatas[a],o=null,s=n.match(/\(([a-z0-9,]+(\[\])?)\)/i);return(s=s?s[1].split(","):null)&&(o=e.props.web3.eth.abi.decodeParameters(s,i))&&(o=Object.values(o).splice(0,s.length)),d.a.createElement(f.h,{py:1,width:1,flexDirection:"column",alignItems:"flex-start",key:"action_".concat(a),justifyContent:"flex-start",borderBottom:"1px solid ".concat(e.props.theme.colors["near-white"])},d.a.createElement(f.h,{mb:1,width:1,flexDirection:["column","row"],alignItems:["flex-start","center"]},d.a.createElement(f.h,{flexDirection:"row"},d.a.createElement(f.u,{fontSize:1,fontWeight:3,color:"dark-gray"},parseInt(a)+1),d.a.createElement(f.u,{ml:2,fontSize:1,fontWeight:2,color:"dark-gray"},n)),o&&d.a.createElement(f.n,{mt:[1,0],ml:[0,1],fontSize:1,fontWeight:2,textAlign:"left",lineHeight:"initial",hoverColor:"primary",onClick:function(t){return e.toggleShowParams(a)}},e.state.showActionParams===a?"(hide params)":"(show params)")),o&&e.state.showActionParams===a&&d.a.createElement(f.h,{pl:[0,3],width:1,flexDirection:"column"},o.map(function(e,t){return d.a.createElement(f.u,{fontSize:0,color:"statValue",key:"param_".concat(t)},e)})))}))),d.a.createElement(U.a,{cardProps:{p:3,ml:[0,1],width:[1,.5]}},d.a.createElement(f.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Proposal History"),d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Date")),d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},t.states.map(function(n,a){return d.a.createElement(f.h,{py:2,width:1,alignItems:"center",key:"state_".concat(a),justifyContent:"space-between",borderBottom:"1px solid ".concat(e.props.theme.colors["near-white"])},d.a.createElement(f.h,{alignItems:"center",flexDirection:"row"},d.a.createElement(C,Object.assign({},e.props,{proposal:t,fieldInfo:{name:"statusIcon",state:n.state,props:{size:e.props.isMobile?"1.3em":"1.5em"}}})),d.a.createElement(f.n,{ml:2,fontSize:1,fontWeight:2,target:"_blank",textAlign:"left",color:"dark-gray",lineHeight:"initial",hoverColor:"primary",rel:"nofollow noopener noreferrer",href:e.functionsUtil.getEtherscanTransactionUrl(n.trx_hash)},n.state)),d.a.createElement(f.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"dark-gray",lineHeight:"initial"},e.functionsUtil.strToMoment(1e3*n.start_time).utc().format("DD MMM, YYYY @ HH:mm")," UTC"))}),this.state.processing&&this.state.processing.loading?d.a.createElement(f.h,{mt:3,width:1,flexDirection:"column"},d.a.createElement(V.a,Object.assign({},this.props,{hash:this.state.processing.txHash,cancelTransaction:this.cancelTransaction.bind(this),waitText:"".concat(this.state.processing.action," estimated in"),endMessage:"Finalizing ".concat(this.state.processing.action.toLowerCase()," request...")}))):m?d.a.createElement(H.a,{buttonProps:{mt:3,width:[1,"auto"]},handleClick:this.queueProposal.bind(this)},"Queue Proposal"):g&&d.a.createElement(H.a,{buttonProps:{mt:3,width:[1,"auto"]},handleClick:this.executeProposal.bind(this)},"Execute Proposal")))),d.a.createElement(U.a,{cardProps:{p:3,mb:[2,3]},title:"Details",titleParentProps:{mt:0,ml:0}},d.a.createElement(f.u,{mt:2,fontSize:[1,2],style:{wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:t.description}})),i&&d.a.createElement(U.a,{cardProps:{p:3,mb:[2,3]}},d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"For (",l,"%)"),d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Against (",c,"%)")),d.a.createElement(f.h,{mb:2,width:1,height:"20px",alignItems:"center",flexDirection:"row",id:"votes-cursor-container"},d.a.createElement(f.h,{height:"100%",width:"".concat(l,"%"),style:{background:"rgba(0, 211, 149, 1)"},borderRadius:100===parseFloat(l)?"20px":"20px 0 0 20px"}),d.a.createElement(f.h,{height:"100%",width:"".concat(c,"%"),style:{background:"rgba(211, 0, 0, 1)"},borderRadius:100===parseFloat(c)?"20px":"0 20px 20px 0"})),d.a.createElement(f.h,{width:1,height:"20px",alignItems:"center",flexDirection:"row",id:"votes-number-container"},d.a.createElement(f.h,{width:.5,height:"100%",justifyContent:"flex-end"},d.a.createElement(f.h,{width:1,height:"100%",justifyContent:"flex-start"},d.a.createElement(f.u,{fontWeight:3,fontSize:[1,2],textAlign:"left",color:"statValue",lineHeight:"initial"},this.functionsUtil.formatMoney(o.toFixed(0,1),0)))),d.a.createElement(f.h,{width:.5,height:"100%",justifyContent:"flex-start"},d.a.createElement(f.h,{width:1,height:"100%",minWidth:"10%",justifyContent:"flex-end"},d.a.createElement(f.u,{fontWeight:3,fontSize:[1,2],textAlign:"right",color:"statValue",lineHeight:"initial"},this.functionsUtil.formatMoney(s.toFixed(0,1),0))))))),i&&d.a.createElement(f.h,{mb:4,width:1,id:"votes-addresses-container",justifyContent:"space-between",flexDirection:["column","row"]},d.a.createElement(U.a,{cardProps:{p:3,mb:[2,0],mr:[0,1],width:[1,.5]},id:"for-votes-addresses-container"},d.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"For Addresses (",p.length,")"),d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Votes")),d.a.createElement(f.h,{width:1,style:{overflow:"scroll"},maxHeight:"400px",flexDirection:"column"},p.map(function(t,n){var a=e.functionsUtil.formatMoney(e.functionsUtil.BNify(t.votes).div(1e18).toFixed(4,1),4);return d.a.createElement(f.h,{py:2,width:1,alignItems:"center",flexDirection:"row",key:"vote_for_".concat(n),justifyContent:"space-between",borderBottom:"1px solid ".concat(e.props.theme.colors["near-white"])},d.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},d.a.createElement(f.a,{opts:{size:7,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:t.voter}}),d.a.createElement(f.n,{ml:2,fontSize:1,fontWeight:2,target:"_blank",textAlign:"left",color:"statValue",lineHeight:"initial",hoverColor:"primary",rel:"nofollow noopener noreferrer",href:"/#/governance/leaderboard/".concat(t.voter)},e.props.isMobile?d.a.createElement(Q.a,Object.assign({fontSize:1,fontWeight:2},e.props,{textAlign:"left",color:"statValue",hash:t.voter,lineHeight:"initial"})):t.voter)),d.a.createElement(f.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"statValue",lineHeight:"initial"},a))})))),d.a.createElement(U.a,{cardProps:{p:3,ml:[0,1],width:[1,.5]},id:"against-votes-addresses-container"},d.a.createElement(f.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Against Addresses (",h.length,")"),d.a.createElement(f.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Votes")),d.a.createElement(f.h,{width:1,style:{overflow:"scroll"},maxHeight:"400px",flexDirection:"column"},h.map(function(t,n){var a=e.functionsUtil.formatMoney(e.functionsUtil.BNify(t.votes).div(1e18).toFixed(4,1),4);return d.a.createElement(f.h,{py:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between",key:"vote_against_".concat(n),borderBottom:"1px solid ".concat(e.props.theme.colors["near-white"])},d.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},d.a.createElement(f.a,{opts:{size:7,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:t.voter}}),d.a.createElement(f.n,{ml:2,fontSize:1,fontWeight:2,target:"_blank",textAlign:"left",color:"statValue",lineHeight:"initial",hoverColor:"primary",rel:"nofollow noopener noreferrer",href:"/#/governance/leaderboard/".concat(t.voter)},t.voter)),d.a.createElement(f.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"statValue",lineHeight:"initial"},a))})))))}}]),t}(h.Component),X=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={proposals:null,addProposal:!1,selectedProposal:null},n.governanceUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.props.contractsInitialized&&t.contractsInitialized!==this.props.contractsInitialized&&this.loadData();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.contractsInitialized){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.governanceUtil.getProposals();case 4:t=e.sent,n=this.props.match.params,a=!1,i=null,n.item_id&&parseInt(n.item_id)?(s=parseInt(n.item_id),(r=t.find(function(e){return parseInt(e.id)===s}))&&(i=r)):n.item_id&&"new"===n.item_id.toLowerCase()&&(a=!0),this.setState({proposals:t,addProposal:a,selectedProposal:i});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.a.createElement(f.b,{width:1},d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",flexDirection:"row",justifyContent:this.state.selectedProposal||this.state.addProposal?"space-between":"flex-end"},this.state.selectedProposal?d.a.createElement(f.h,{alignItems:"center",width:.5},d.a.createElement(z.a,Object.assign({},this.props,{text:"Governance",pathLink:["proposals"],isMobile:this.props.isMobile,handleClick:function(t){return e.props.goToSection("/")},path:["Proposals",this.state.selectedProposal.title]}))):this.state.addProposal?d.a.createElement(f.h,{alignItems:"center",width:.5},d.a.createElement(z.a,Object.assign({},this.props,{text:"Governance",pathLink:["proposals"],isMobile:this.props.isMobile,path:["Proposals","Add proposal"],handleClick:function(t){return e.props.goToSection("/")}}))):d.a.createElement(f.h,{alignItems:"center",width:.5},d.a.createElement(z.a,Object.assign({},this.props,{text:"Governance",path:["Proposals"],isMobile:this.props.isMobile,handleClick:function(t){return e.props.goToSection("/")}}))),!this.state.addProposal&&d.a.createElement(f.h,{width:.5,alignItems:"center",justifyContent:"flex-end"},d.a.createElement(Y.a,Object.assign({icon:"Add"},this.props,{text:"New Proposal",handleClick:function(t){return e.props.goToSection("proposals/new")}})))),this.state.selectedProposal?d.a.createElement(f.b,{width:1},d.a.createElement($,Object.assign({},this.props,{loadData:this.loadData.bind(this),proposal:this.state.selectedProposal}))):this.state.addProposal?d.a.createElement(f.b,{width:1},d.a.createElement(q,this.props)):d.a.createElement(f.b,{width:1},d.a.createElement(b.a,{mb:[3,4]},"Governance Proposals"),d.a.createElement(f.h,{mb:3,width:1,id:"proposals",flexDirection:"column"},d.a.createElement(A,Object.assign({},this.props,{proposals:this.state.proposals,cols:[{title:"#",props:{width:[.1,.05]},fields:[{name:"id",props:{}}]},{title:"DATE",mobile:!1,props:{width:[.15,.12]},fields:[{name:"date"}]},{title:"TITLE",props:{width:[.75,.6]},fields:[{name:"title"}]},{mobile:!1,title:"VOTES",props:{width:[.11,.11]},fields:[{name:"votes"}]},{title:"STATUS",props:{width:[.15,.12],alignItems:["center","flex-start"],justifyContent:["center","flex-start"]},parentProps:{justifyContent:["center","flex-start"]},fields:[{name:"statusIcon",props:{mr:[0,2]}},{mobile:!1,name:"status"}]}]})))))}}]),t}(h.Component),Z=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={proposals:null},n.functionsUtil=null,n.governanceUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadProposals();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),JSON.stringify(t.delegate)!==JSON.stringify(this.props.delegate)&&this.loadProposals();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadProposals",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.delegate,e.next=3,this.governanceUtil.getProposals(t.delegate);case 3:n=e.sent,this.setState({proposals:n});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.delegate;return d.a.createElement(f.b,{width:1},d.a.createElement(b.a,{mb:[3,4]},"Delegate Details"),d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},d.a.createElement(f.h,{mb:[2,0],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,title:"Rank",value:e.rank,labelTooltip:null,minHeight:["100px","143px"],titleMinHeight:["auto","50px"]})),d.a.createElement(f.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{titleMinHeight:["auto","50px"],minHeight:["100px","143px"],labelTooltip:null,title:"Address",label:null},d.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(f.a,{opts:{size:12,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:e.delegate}}),d.a.createElement(J.a,{href:this.functionsUtil.getEtherscanAddressUrl(e.delegate)},d.a.createElement(f.h,{flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start"},d.a.createElement(Q.a,Object.assign({ml:2,lineHeight:1},this.props,{fontSize:[3,4],fontWeight:[3,4],color:"statValue",hash:e.delegate})),d.a.createElement(f.k,{ml:1,size:"1.2em",name:"OpenInNew",color:"statValue"})))))),d.a.createElement(f.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,title:"Votes",labelTooltip:null,minHeight:["100px","143px"],titleMinHeight:["auto","50px"],value:this.functionsUtil.formatMoney(this.functionsUtil.BNify(e.votes).toFixed(2,1),2)})),d.a.createElement(f.h,{pl:[0,1],mb:[2,0],width:[1,.25],flexDirection:"column"},d.a.createElement(w.a,{label:null,labelTooltip:null,title:"Proposals Voted",value:e.proposals,minHeight:["100px","143px"],titleMinHeight:["auto","50px"]}))),d.a.createElement(f.b,{width:1,mt:[4,5]},d.a.createElement(b.a,{mb:[2,3]},"Voting History"),d.a.createElement(f.h,{mb:[3,4],width:1,id:"transactions",flexDirection:"column"},d.a.createElement(A,Object.assign({},this.props,{rowsPerPage:5,delegate:e,filtersEnabled:!1,proposals:this.state.proposals,cols:[{title:"#",props:{width:[.08,.05]},fields:[{name:"id",props:{}}]},{title:"DATE",mobile:!1,props:{width:.12},fields:[{name:"date"}]},{title:"TITLE",props:{width:[.66,.57]},fields:[{name:"title"}]},{title:"VOTE",props:{width:[.14,.14],textAlign:"center"},fields:[{name:"support",parentProps:{alignItems:"center"}}]},{title:"STATUS",props:{width:[.12,.12],justifyContent:["center","flex-start"]},parentProps:{justifyContent:["center","flex-start"]},fields:[{name:"statusIcon",props:{mr:[0,2]}},{mobile:!1,name:"status"}]}]})))))}}]),t}(h.Component),ee=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={maxRows:100,delegates:null,selectedDelegate:null},n.governanceUtil=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.governanceUtil.getDelegates();case 2:t=e.sent,n=this.props.match.params,a=null,n.item_id&&(i=n.item_id.toLowerCase(),(s=t.find(function(e){return e.delegate.toLowerCase()===i}))&&(a=s)),this.setState({delegates:t,selectedDelegate:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.a.createElement(f.b,{width:1},this.state.selectedDelegate?d.a.createElement(f.b,{width:1},d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},d.a.createElement(f.h,{width:1},d.a.createElement(z.a,Object.assign({},this.props,{text:"Governance",pathLink:["leaderboard"],isMobile:this.props.isMobile,handleClick:function(t){return e.props.goToSection("")},path:["Leaderboard",this.state.selectedDelegate.delegate]})))),d.a.createElement(Z,Object.assign({},this.props,{delegate:this.state.selectedDelegate}))):d.a.createElement(f.b,{width:1},d.a.createElement(f.h,{mb:3,width:1,alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},d.a.createElement(z.a,Object.assign({},this.props,{text:"Governance",path:["Leaderboard"],isMobile:this.props.isMobile,handleClick:function(t){return e.props.goToSection("")}}))),d.a.createElement(b.a,{mb:[3,4]},"Governance Leaderboard"),d.a.createElement(f.h,{mb:3,width:1,id:"leaderboard",flexDirection:"column"},d.a.createElement(M,Object.assign({},this.props,{delegates:this.state.delegates,cols:[{title:"RANK",props:{width:[.13,.08]},fields:[{name:"rank"}]},{title:"ADDRESS",props:{width:[.6,.5]},fields:[{mobile:!1,name:"avatar",props:{mr:2}},{name:"delegate"}]},{title:"VOTES",props:{width:[.27,.12]},fields:[{name:"votes"}]},{mobile:!1,title:"VOTE WEIGHT",props:{width:[.15,.15]},fields:[{name:"vote_weight",parentProps:{alignItems:"center"}}]},{mobile:!1,title:"PROPOSALS VOTED",props:{width:[.15,.15]},fields:[{name:"proposals",parentProps:{alignItems:"center"}}]}]})))))}}]),t}(h.Component),te=n(5095),ne=n(5096),ae=n(5101),ie=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={menu:[],votes:null,balance:null,baseRoute:null,modalTitle:null,clickEvent:null,activeModal:null,menuOpened:!1,blockNumber:null,currentRoute:null,votingPeriod:null,modalContent:null,pageComponent:null,timelockDelay:null,currentSection:null,selectedSection:null,currentDelegate:null,proposalThreshold:null,selectedSubsection:null,proposalMaxOperations:null},n.timeoutId=null,n.functionsUtil=null,n.governanceUtil=null,n.resetModal=function(){n.setState({activeModal:null})},n.openTooltipModal=function(e,t){n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:e,eventLabel:"TooltipModal"}),n.setState({modalTitle:e,modalContent:t},function(){n.setActiveModal("tooltip")})},n.setActiveModal=function(e){n.setState({activeModal:e})},n.logout=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setConnector("Infura","Infura"),e.next=3,n.props.initWeb3("Infura");case 3:case"end":return e.stop()}},e,this)})),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new g.a(this.props),window.governanceUtil=this.governanceUtil,window.functionsUtil=this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"loadMenu",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=this.functionsUtil.getGlobalConfig(["governance","baseRoute"]),a=this.functionsUtil.getGlobalConfig(["extraicons"]),t.push({submenu:[],selected:!0,route:n,label:"Overview",color:"dark-gray",component:F,bgColor:this.props.theme.colors.primary,image:a.overview.icon,imageDark:a.overview.iconDark,imageInactive:a.overview.iconInactive,imageInactiveDark:a.overview.iconInactiveDark}),t.push({submenu:[],selected:!1,label:"Proposals",bgColor:"#00acff",color:"dark-gray",component:X,route:"".concat(n,"/proposals"),image:a.proposals.icon,imageDark:a.proposals.iconDark,imageInactive:a.proposals.iconInactive,imageInactiveDark:a.proposals.iconInactiveDark}),t.push({submenu:[],selected:!1,bgColor:"#ff0000",color:"dark-gray",label:"Leaderboard",component:ee,route:"".concat(n,"/leaderboard"),image:a.leaderboard.icon,imageDark:a.leaderboard.iconDark,imageInactive:a.leaderboard.iconInactive,imageInactiveDark:a.leaderboard.iconInactiveDark}),t.push({submenu:[],selected:!1,label:"Delegate",color:"dark-gray",bgColor:"#ff0000",component:R,route:"".concat(n,"/delegate"),image:a.delegate.icon,imageDark:a.delegate.iconDark,imageInactive:a.delegate.iconInactive,imageInactiveDark:a.delegate.iconInactiveDark}),t.push({submenu:[],mobile:!1,label:"Forum",selected:!1,component:null,color:"dark-gray",bgColor:"#ff0000",isExternalLink:!0,route:this.functionsUtil.getGlobalConfig(["forumURL"]),image:a.forum.icon,imageDark:a.forum.iconDark,imageInactive:a.forum.iconInactive,imageInactiveDark:a.forum.iconInactiveDark}),e.next=10,this.setState({menu:t,baseRoute:n});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadParams",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params,n=this.state.baseRoute,a=window.location.hash.substr(1),i=null,s=null,r=this.state.menu,l=null,c=null,r.forEach(function(e){e.selected=!1;var o=n+"/"+t.section;a.toLowerCase()===e.route.toLowerCase()||!e.submenu.length&&e.route.toLowerCase()===o.toLowerCase()?(e.selected=!0,null===i&&(i=e.component)):e.submenu.length&&e.submenu.forEach(function(t){t.selected=!1,(e.route+"/"+t.route).toLowerCase()===a.toLowerCase()&&(e.selected=!0,t.selected=!0,null===i&&(i=t.component?t.component:e.component)),t.selected&&(c=t)}),e.selected&&(l=e)}),i){e.next=11;break}return e.abrupt("return",this.goToSection("/",!1));case 11:return this.functionsUtil.sendGoogleAnalyticsPageview(a),e.next=14,this.setState({menu:r,params:t,baseRoute:n,currentRoute:a,pageComponent:i,currentSection:s,selectedSection:l,selectedSubsection:c});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},{key:"componentWillMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setCurrentSection("governance"),this.loadUtils(),e.next=4,this.loadMenu();case 4:this.loadParams();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.timeoutId=window.setTimeout(function(){t.props.accountInizialized&&t.props.contractsInitialized||t.setState({showResetButton:!0})},2e4),this.loadUtils(),e.next=4,this.loadMenu();case 4:this.loadParams(),this.loadData();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkEnabled",value:function(){var e=this.functionsUtil.getRequiredNetwork(),t=this.functionsUtil.getGlobalConfig(["governance"]),n=t.enabled&&t.availableNetworks.includes(e.id);return console.log("governanceEnabled",e,n),n||this.goToSection("/",!1),n}},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark(function e(t,n){var a,i,s,r,l,c=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadUtils(),a=t.match.params,i=this.props.match.params,JSON.stringify(a)===JSON.stringify(i)){e.next=6;break}return e.next=6,this.setState({pageComponent:null},function(){c.loadParams()});case 6:s=t.account!==this.props.account,r=this.props.accountInizialized&&t.accountInizialized!==this.props.accountInizialized,l=this.props.contractsInitialized&&t.contractsInitialized!==this.props.contractsInitialized,(s||r||l)&&this.loadData();case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"goToSection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e=e.replace(this.state.baseRoute+"/",""));var n=(t?this.state.baseRoute+(e.length>0?"/"+e:""):e).replace(/[\/]+$/,"");window.location.hash=n,this.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventLabel:n,eventAction:"goToSection"}),window.scrollTo(0,0)}},{key:"loadData",value:function(){var e=Object(s.a)(o.a.mark(function e(){var t,n,i,s,r,l,c,u,p,h,d,m,f,g;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.web3&&this.props.contractsInitialized){e.next=2;break}return e.abrupt("return",!1);case 2:return t={},e.next=5,Promise.all([this.functionsUtil.getBlockNumber(),this.governanceUtil.getVotingPeriod(),this.governanceUtil.getTimelockDelay(),this.governanceUtil.getProposalParams()]);case 5:if(n=e.sent,i=Object(a.a)(n,4),s=i[0],r=i[1],l=i[2],c=i[3],u=c.proposalThreshold,p=c.proposalMaxOperations,t.blockNumber=s,t.votingPeriod=r,t.timelockDelay=l,t.proposalThreshold=u,t.proposalMaxOperations=p,!this.props.account){e.next=29;break}return e.next=21,Promise.all([this.governanceUtil.getCurrentVotes(this.props.account),this.governanceUtil.getTokensBalance(this.props.account),this.governanceUtil.getCurrentDelegate(this.props.account)]);case 21:h=e.sent,d=Object(a.a)(h,3),m=d[0],f=d[1],g=d[2],t.votes=m,t.balance=f,t.currentDelegate=g;case 29:this.setState(t);case 30:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setMenu",value:function(e){this.setState({menuOpened:e})}},{key:"toggleMenu",value:function(){var e=!this.state.menuOpened;this.setMenu(e)}},{key:"swipeCallback",value:function(e){"Right"===e.dir?this.setMenu(!0):"Left"===e.dir&&this.setMenu(!1)}},{key:"render",value:function(){var e=this,t=this.state.pageComponent?this.state.pageComponent:null;return d.a.createElement(te.a,{callback:this.swipeCallback.bind(this)},d.a.createElement(f.h,{height:"100vh",position:"fixed",flexDirection:"row",className:this.props.themeMode,backgroundColor:["dashboardBg","white"],width:this.props.isMobile&&this.state.menuOpened?"180vw":"100vw"},(!this.props.isMobile||this.state.menuOpened)&&d.a.createElement(f.h,{bottom:0,zIndex:99999,width:["80vw",1/6],position:"relative",flexDirection:"column"},d.a.createElement(f.d,{p:3,border:0,width:"auto",height:"100vh",backgroundColor:"menuBg",borderColor:this.props.theme.colors.menuRightBorder,borderRight:"1px solid ".concat(this.props.theme.colors.menuRightBorder)},d.a.createElement(v.a,Object.assign({},this.props,{menu:this.state.menu,closeMenu:function(t){return e.setMenu(!1)}})))),d.a.createElement(f.h,{py:3,mb:0,px:[3,5],width:["100vw",5/6],style:{overflowY:"scroll",overflowX:"hidden"},height:["100vh","auto"],flexDirection:"columns",backgroundColor:"dashboardBg"},this.props.accountInizialized&&this.props.contractsInitialized&&t?d.a.createElement(f.h,{width:1,flexDirection:"column"},d.a.createElement(ae.a,Object.assign({menuOpened:this.state.menuOpened,clickEvent:this.state.clickEvent,toggleMenu:this.toggleMenu.bind(this),goToSection:this.goToSection.bind(this)},this.props)),t&&d.a.createElement(t,Object.assign({},this.props,{votes:this.state.votes,balance:this.state.balance,urlParams:this.state.params,blockNumber:this.state.blockNumber,votingPeriod:this.state.votingPeriod,loadUserData:this.loadData.bind(this),timelockDelay:this.state.timelockDelay,goToSection:this.goToSection.bind(this),currentDelegate:this.state.currentDelegate,selectedSection:this.state.selectedSection,proposalThreshold:this.state.proposalThreshold,selectedSubsection:this.state.selectedSubsection,openTooltipModal:this.openTooltipModal.bind(this),proposalMaxOperations:this.state.proposalMaxOperations}))):d.a.createElement(f.h,{width:1,minHeight:"50vg",alignItems:"center",flexDirection:"column",justifyContent:"center"},this.props.network.isCorrectNetwork?this.state.showResetButton?d.a.createElement(U.a,{cardProps:{p:3,mt:3,width:[1,.35]}},d.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},d.a.createElement(f.k,{size:"2.3em",name:"Warning",color:"cellText"}),d.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Idle can't connect to your wallet!",d.a.createElement("br",null),"Make sure that your wallet is unlocked and try again."),d.a.createElement(H.a,{buttonProps:{mt:3,width:[1,.5]},handleClick:this.logout.bind(this)},"Logout"))):d.a.createElement(m.a,{textProps:{textSize:4,fontWeight:2},loaderProps:{mb:3,size:"40px"},flexProps:{my:3,flexDirection:"column"},text:this.props.accountInizialized?this.props.contractsInitialized?"Loading assets...":"Loading contracts...":"Loading account..."}):d.a.createElement(U.a,{cardProps:{p:3,mt:3,width:[1,.35]}},d.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},d.a.createElement(f.k,{size:"2.3em",name:"Warning",color:"cellText"}),d.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"The"," ",d.a.createElement("strong",null,this.functionsUtil.capitalize(this.props.network.current.name)," ","Network")," ","is not supported, please switch to the correct network."))))),d.a.createElement(ne.a,{closeModal:this.resetModal,title:this.state.modalTitle,content:this.state.modalContent,isOpen:"tooltip"===this.state.activeModal})))}}]),t}(h.Component);t.default=ie}}]);
//# sourceMappingURL=5.c83e752c.chunk.js.map