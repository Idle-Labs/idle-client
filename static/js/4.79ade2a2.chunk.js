(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{5081:function(e,t,n){"use strict";var a=n(1),o=n.n(a),i=n(7),s=n(5),r=n(6),l=n(10),c=n(8),u=n(9),p=n(82),h=n(218),d=n.n(h),m=n(0),f=n.n(m),g=n(2),b=n(28),k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={totalAUM:null,totalAUMEndOfYear:null},n.functionsUtil=null,n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new b.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadTotalAUM();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),a=t.contractsInitialized!==this.props.contractsInitialized,(!t.availableStrategies&&JSON.stringify(t.availableStrategies)!==JSON.stringify(this.props.availableStrategies)||a)&&this.loadTotalAUM();case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadTotalAUM",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.availableStrategies&&this.props.contractsInitialized){e.next=2;break}return e.abrupt("return",!0);case 2:return t=this.props.allNetworks||!1,e.next=5,this.functionsUtil.getAggregatedStats(!0,t);case 5:n=e.sent,a=n.avgAPY,i=n.totalAUM,s=i.plus(i.times(a.div(100))),this.setState({totalAUM:i,totalAUMEndOfYear:s});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.totalAUM?f.a.createElement(g.b,{width:1},f.a.createElement(d.a,{delay:0,decimals:4,decimal:".",separator:"",useEasing:!1,duration:31536e3,start:parseFloat(this.state.totalAUM),end:parseFloat(this.state.totalAUMEndOfYear),formattingFn:function(t){return"$ "+e.functionsUtil.formatMoney(t,4)}},function(t){var n=t.countUpRef;t.start;return f.a.createElement("span",{style:e.props.counterStyle?e.props.counterStyle:{display:"block",color:"dark-gray",whiteSpace:"nowrap",fontFamily:e.props.theme.fonts.counter,fontWeight:e.props.theme.fontWeights[5],textAlign:e.props.isMobile?"center":"right",fontSize:e.props.isMobile?"1.6em":e.props.theme.fontSizes[6]},ref:n})}),("undefined"===typeof this.props.subtitle||this.props.subtitle)&&f.a.createElement(p.a,Object.assign({fontWeight:3,fontSize:[2,2],color:"cellTitle",textAlign:["center","right"]},this.props.subtitleProps),this.props.subtitle?this.props.subtitle:f.a.createElement(g.u.span,{fontWeight:"inherit",color:"inherit",fontSize:"inherit"},"Assets Under Management"))):f.a.createElement(g.h,{alignItems:"center",justifyContent:this.props.loaderAlign||"center"},f.a.createElement(g.o,{size:"30px"}))}}]),t}(m.Component);t.a=k},5137:function(e,t,n){},5258:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(7),s=n(5),r=n(6),l=n(10),c=n(8),u=n(9),p=n(0),h=n.n(p),d=n(71),m=n(28),f=n(2),g=n(5082),b=n(256),k=n.n(b),v=n(82),x=n(29),y=n(5083),w=n(403),T=n(42),C=n(217),E=n(32),S=n(1287),U=n(1289),M=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={chartProps:{},chartType:null,chartData:null,chartWidth:null},n.functionsUtil=null,n.parseAum=function(e){return(parseInt(e)>=1e3?parseFloat(e/1e3).toFixed(1)+"K":parseFloat(e))+" "+n.props.selectedToken},n.loadApiData=Object(i.a)(o.a.mark(function e(){var t,a,s,r,l,c,u,p,d,m,f,g,b,v,C,M,j,D,O,A,I,P,B,F,z,Y,G,N,H,R,V,W,L,_,q,J,X,K,$,Z,Q,ee,te,ne,ae;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.tokenConfig&&n.props.selectedToken&&n.props.chartMode&&n.props.apiResults){e.next=2;break}return e.abrupt("return",!1);case 2:t=4,a=n.props.apiResults,s=n.props.apiResults_unfiltered,r=a.length,l=Object.assign([],n.props.tokenConfig.protocols),c=T.a.stats.versions[n.props.idleVersion],u={},p={},d=0,m=0,f=0,g=[],b={},v=w.a,C=[],M=0,j=0,D=null,O=null,A=null,I=12,e.t0=n.props.chartMode,e.next="VOL"===e.t0?26:"AUM"===e.t0?45:"ALL"===e.t0?58:"ALL_PERC"===e.t0?73:"APR"===e.t0?81:"SCORE"===e.t0?96:"PRICE_V4"===e.t0?110:"PRICE"===e.t0?133:146;break;case 26:for(P={},B=parseInt(s[0].timestamp),F=parseInt(k()()._d.getTime()/1e3),z=B;z<=F;z+=86400)Y=k()(1e3*z).format("YYYY/MM/DD"),P[Y]||(P[Y]={date:Y,timestamp:z,deposits:0,redeems:0});for(G=null,s.forEach(function(e){var t=k()(1e3*e.timestamp).format("YYYY/MM/DD"),a=n.functionsUtil.fixTokenDecimals(e.idleSupply,18);if(P[t]||(P[t]={date:t,timestamp:e.timestamp,deposits:0,redeems:0}),G){var o=n.functionsUtil.fixTokenDecimals(G.idleSupply,18);if(!a.eq(o)){var i=a.minus(o);i.gte(0)?(P[t].deposits+=parseFloat(i),M=Math.max(M,P[t].deposits)):(P[t].redeems+=parseFloat(i),M=Math.max(M,Math.abs(P[t].deposits)))}}else P[t].deposits+=parseFloat(a);G=e}),g=Object.values(P).filter(function(e){return(!n.props.startTimestamp||e.timestamp>=n.props.startTimestamp)&&(!n.props.endTimestamp||e.timestamp<=n.props.endTimestamp)}).sort(function(e,t){return e.timestamp<t.timestamp?-1:1}),N=0,g.forEach(function(e){N=Math.max(N,Math.abs(e.deposits),Math.abs(e.redeems))}),v=y.a,d=parseFloat(M/t),C=[0],H=1;H<=5;H++)C.push(H*d);return j=0,I=6,f=k()(g[g.length-1].date,"YYYY/MM/DD").diff(k()(g[0].date,"YYYY/MM/DD"),"days"),D=Math.max(1,Math.ceil(f/I)),b={indexBy:"date",enableLabel:!1,minValue:-N,maxValue:N,label:function(e){return Math.abs(e.value)},axisBottom:n.props.isMobile?null:{tickSize:0,legend:"",tickPadding:15,orient:"bottom",legendOffset:0,tickValues:"every day",format:function(e){if(j++%D===0)return k()(e,"YYYY/MM/DD").format("MMM DD")},legendPosition:"middle"},axisLeft:null,axisRight:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:8,legendPosition:"middle",format:function(e){return n.functionsUtil.abbreviateNumber(Math.abs(e),0)}},markers:[{axis:"y",value:0,lineStyle:{strokeOpacity:0},textStyle:{fill:n.props.theme.colors.transactions.action.deposit},legend:"deposits",legendPosition:"top-left",legendOrientation:"vertical",legendOffsetX:-20},{axis:"y",value:0,lineStyle:{stroke:n.props.theme.colors["dark-gray"],strokeDasharray:"5 3"},textStyle:{fill:n.props.theme.colors.transactions.action.redeem},legend:"redeems",legendPosition:"bottom-left",legendOrientation:"vertical",legendOffsetX:-20}],keys:["deposits","redeems"],padding:.4,colors:[n.props.theme.colors.transactions.action.deposit,n.props.theme.colors.transactions.action.redeem],labelTextColor:"inherit:darker(1.4)",labelSkipWidth:16,labelSkipHeight:16,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,pointLabelYOffset:-12,legends:[{dataFrom:"keys",itemWidth:n.props.isMobile?80:100,itemHeight:18,translateX:0,translateY:n.props.isMobile?40:65,symbolSize:10,itemsSpacing:0,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:n.props.theme.colors.legend,effects:[{on:"hover",style:{itemTextColor:"light"===n.props.themeMode?"#000":"#fff"}}]}],theme:{axis:{ticks:{text:{fontSize:n.props.isMobile?12:14,fontWeight:600,fill:n.props.theme.colors.legend,fontFamily:n.props.theme.fonts.sansSerif}}},grid:{line:{stroke:n.props.theme.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontWeight:500,fill:n.props.theme.colors.legend,textTransform:"capitalize",fontFamily:n.props.theme.fonts.sansSerif,fontSize:n.props.isMobile?12:14}},tooltip:{container:{boxShadow:null,background:null}}},pointColor:{from:"color",modifiers:[]},margin:n.props.isMobile?{top:20,right:50,bottom:45,left:50}:{top:20,right:70,bottom:70,left:50},tooltip:function(e){var t=n.functionsUtil.strToMoment(1e3*e.data.timestamp).format("MMM DD HH:ss"),a={id:e.id,data:{xFormatted:t}},o=n.functionsUtil.abbreviateNumber(e.data.deposits,2)+" "+n.props.selectedToken,i=n.functionsUtil.abbreviateNumber(e.data.redeems,2)+" "+n.props.selectedToken;return h.a.createElement(S.a,{point:a},h.a.createElement(U.a,{label:"Deposits",color:n.props.theme.colors.deposit,value:o}),h.a.createElement(U.a,{label:"Redeem",color:n.props.theme.colors.redeem,value:i}))}},e.abrupt("break",147);case 45:for(M=0,g.push({id:"AUM",color:"hsl("+T.a.stats.tokens[n.props.selectedToken].color.hsl.join(",")+")",data:a.map(function(e,t){var a=n.functionsUtil.fixTokenDecimals(e.idleSupply,18),o=n.functionsUtil.fixTokenDecimals(e.idlePrice,n.props.tokenConfig.decimals),i=a.times(o),s=k()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),r=parseFloat(i.toString());return M=Math.max(M,r),{x:s,y:r}})}),n.props.tokenConfig.protocols.forEach(function(e,t){a.map(function(t,a){return t.protocolsData.filter(function(t,n){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()}).map(function(a,o){if(!n.functionsUtil.BNify(a.rate).eq(0)){var i=k()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),s=parseFloat(n.functionsUtil.fixTokenDecimals(a.allocation,n.props.tokenConfig.decimals));M=Math.max(M,s);var r=g[0].data.filter(function(e){return e.x===i});if(r){r=r[0];var l=g[0].data.indexOf(r);r.allocations||(r.allocations={}),r.allocations[e.name]=s,g[0].data[l]=r}}})[0]}).filter(function(e){return void 0!==e})}),v=w.a,d=parseFloat(M/t),C=[0],R=1;R<=5;R++)C.push(R*d);return j=0,I=6,f=k()(g[0].data[g[0].data.length-1].x,"YYYY/MM/DD HH:mm").diff(k()(g[0].data[0].x,"YYYY/MM/DD HH:mm"),"days"),D=Math.max(1,Math.ceil(f/I)),b={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return n.functionsUtil.formatMoney(e,e<1?3:0)},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:C,legendPosition:"middle",format:function(e){return n.functionsUtil.abbreviateNumber(e,e<1?3:0)}},axisBottom:n.props.isMobile?null:{legend:"",tickSize:0,format:function(e){if(j++%D===0)return k()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},tickPadding:15,orient:"bottom",legendOffset:0,tickValues:"every day",legendPosition:"middle"},gridYValues:C,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!0,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemWidth:n.props.isMobile?70:80,itemHeight:18,translateX:n.props.isMobile?-35:0,translateY:n.props.isMobile?40:65,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:n.props.theme.colors.legend,effects:[{on:"hover",style:{itemTextColor:"light"===n.props.themeMode?"#000":"#fff"}}]}],theme:{axis:{ticks:{text:{fontSize:n.props.isMobile?12:14,fontWeight:600,fill:n.props.theme.colors.legend,fontFamily:n.props.theme.fonts.sansSerif}}},grid:{line:{stroke:n.props.theme.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:n.props.isMobile?12:14,fill:n.props.theme.colors.legend,fontWeight:500,fontFamily:n.props.theme.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:n.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:70},sliceTooltip:function(e){var t=e.slice.points[0];return"object"===typeof t&&"object"===typeof t.data?h.a.createElement(S.a,{point:t},h.a.createElement(U.a,{label:t.serieId,color:t.serieColor,value:t.data.yFormatted}),t.data.allocations&&"object"===typeof t.data.allocations&&Object.keys(t.data.allocations).map(function(e){var a=T.a.stats.protocols[e],o="hsl("+a.color.hsl.join(",")+")",i=t.data.allocations[e],s=n.functionsUtil.formatMoney(i,i<1?3:0),r=n.functionsUtil.BNify(t.data.allocations[e]).div(n.functionsUtil.BNify(t.data.y)).times(100).toFixed(0)+"%";return h.a.createElement(U.a,{color:o,label:a.label,key:"".concat(t.id,"_").concat(e),value:"".concat(s," (").concat(r,")")})})):null}},e.abrupt("break",147);case 58:for(u={},p={},a.forEach(function(e,t){var a=k()(1e3*e.timestamp).format("YYYY/MM/DD"),o={date:a};e.protocolsData.forEach(function(e){var t=n.functionsUtil.BNify(e.rate).eq(0),a=n.props.tokenConfig.protocols.find(function(t){return t.address.toLowerCase()===e.protocolAddr.toLowerCase()});if(a){var i=T.a.stats.protocols[a.name];if(t)o[i.label]=0;else{var s=parseFloat(n.functionsUtil.fixTokenDecimals(e.allocation,n.props.tokenConfig.decimals));u[i.label]=1,o[i.label]=s,o["".concat(i.label,"Color")]="hsl("+i.color.hsl.join(",")+")",M=Math.max(M,s)}}}),p[a]=o}),V=Object.keys(p),g=Object.values(p),v=y.a,d=parseFloat(M/t),C=[0],W=1;W<=5;W++)C.push(W*d);return j=0,I=12,f=k()(V[V.length-1],"YYYY/MM/DD").diff(k()(V[0],"YYYY/MM/DD"),"days"),D=Math.max(1,Math.ceil(f/I)),b={padding:.2,animate:!1,indexBy:"date",enableLabel:!1,labelSkipWidth:16,labelSkipHeight:16,keys:Object.keys(u),labelTextColor:"inherit:darker(1.4)",colors:function(e){var t=e.id;return e.data["".concat(t,"Color")]},axisLeft:{format:function(e){return n.functionsUtil.abbreviateNumber(e,e<1?3:0)},orient:"left",tickSize:0,tickPadding:10,tickRotation:0,legend:"",legendOffset:-65,tickValues:C,legendPosition:"middle"},gridYValues:C,axisBottom:n.props.isMobile?null:{legend:"",format:function(e){if(j++%D===0)return k()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},tickSize:0,tickPadding:10,legendOffset:36,orient:"bottom-left",tickValues:"every day",legendPosition:"middle"},legends:[{dataFrom:"keys",itemWidth:n.props.isMobile?70:80,itemHeight:18,translateX:n.props.isMobile?-35:0,translateY:n.props.isMobile?40:65,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:n.props.theme.colors.legend,effects:[{on:"hover",style:{itemTextColor:"light"===n.props.themeMode?"#000":"#fff"}}]}],theme:{tooltip:{container:{padding:"0",boxShadow:"none",background:"transparent"},tableCell:{padding:"0"}},axis:{ticks:{text:{fontSize:n.props.isMobile?12:14,fontWeight:600,fill:n.props.theme.colors.legend,fontFamily:n.props.theme.fonts.sansSerif}}},grid:{line:{stroke:n.props.theme.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:n.props.isMobile?12:14,fill:n.props.theme.colors.legend,fontWeight:500,fontFamily:n.props.theme.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:n.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:60},tooltip:function(e){var t=e.id,a=e.value,o=e.color,i=n.functionsUtil.formatMoney(a,0);return h.a.createElement(E.a,{cardProps:{py:1,px:2,width:1}},h.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},h.a.createElement("tbody",null,h.a.createElement("tr",null,h.a.createElement("td",{style:{padding:"3px 5px"}},h.a.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:o}})),h.a.createElement("td",{style:{padding:"3px 5px",textTransform:"capitalize"}},t),h.a.createElement("td",{style:{padding:"3px 5px"}},h.a.createElement("strong",null,i," ",n.props.selectedToken))))))}},e.abrupt("break",147);case 73:return u={},p={},a.forEach(function(e,t){var a=k()(1e3*e.timestamp).format("YYYY/MM/DD"),o={date:k()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm")};p[a]&&(o=p[a]);var i=e.protocolsData.reduce(function(e,t){var a=n.functionsUtil.fixTokenDecimals(t.allocation,n.props.tokenConfig.decimals);return n.functionsUtil.BNify(e).plus(a)},0);e.protocolsData.forEach(function(e){var t=n.functionsUtil.BNify(e.rate).eq(0),a=n.props.tokenConfig.protocols.filter(function(t){return t.address.toLowerCase()===e.protocolAddr.toLowerCase()})[0].name;if(t)void 0!==typeof o[a]&&(o[a]=0);else{var s=n.functionsUtil.fixTokenDecimals(e.allocation,n.props.tokenConfig.decimals),r=parseFloat(s.div(i).times(100));u[a]=1,o[a]=r,o["".concat(a,"Color")]="hsl("+T.a.stats.protocols[a].color.hsl.join(",")+")"}}),p[a]=o}),g=Object.values(p),v=y.a,j=0,b={padding:.2,animate:!1,indexBy:"date",data:g,enableLabel:!1,labelSkipWidth:16,labelSkipHeight:16,keys:Object.keys(u),labelTextColor:"inherit:darker(1.4)",margin:n.props.isMobile?{top:20,right:20,bottom:40,left:50}:{top:20,right:40,bottom:40,left:60},colors:function(e){var t=e.id;return e.data["".concat(t,"Color")]},axisLeft:{format:function(e){return parseInt(e)+"%"}},axisBottom:n.props.isMobile?null:{legend:"",format:function(e){if(j++%3===0)return k()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},orient:"bottom",legendOffset:36,legendPosition:"middle",tickValues:"every 3 days"},tooltip:function(e){var t=e.id,a=e.value,o=e.color,i=100===parseInt(a)?n.functionsUtil.formatMoney(a,0):n.functionsUtil.formatMoney(a,2);return h.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},h.a.createElement("tbody",null,h.a.createElement("tr",null,h.a.createElement("td",{style:{padding:"3px 5px"}},h.a.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:o}})),h.a.createElement("td",{style:{padding:"3px 5px",textTransform:"capitalize"}},t),h.a.createElement("td",{style:{padding:"3px 5px"}},h.a.createElement("strong",null,i,"%")))))}},e.abrupt("break",147);case 81:for(M=0,c.additionalProtocols&&c.additionalProtocols.length>0&&c.additionalProtocols.forEach(function(e){var t=n.props.tokenConfig.protocols.find(function(t){return t.name===e.protocol});t&&e.enabledTokens.includes(n.props.selectedToken)&&(e.enabled=!0,e.address=t.address,l.unshift(e))}),l.forEach(function(e,t){var o=Object(x.a)({},T.a.stats.protocols[e.name]);if(o.enabled&&!g.filter(function(t){return t.name===e.name}).length){var i=o.rateField?o.rateField:"rate";g.push({id:o.label,color:"hsl("+T.a.stats.protocols[e.name].color.hsl.join(",")+")",data:a.map(function(t,a){return t.protocolsData.filter(function(t,n){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()}).map(function(e,a){var o="object"===typeof i&&i.length?i.reduce(function(t,a){return e[a]?n.functionsUtil.BNify(t).plus(n.functionsUtil.BNify(e[a])):n.functionsUtil.BNify(t)},0):n.functionsUtil.BNify(e[i]);if(!o.eq(0)){o.lt(0)&&e.aaveAdditionalAPR&&n.functionsUtil.BNify(e.aaveAdditionalAPR).gt(0)&&(o=o.plus(n.functionsUtil.BNify(e.aaveAdditionalAPR))),o=n.functionsUtil.fixTokenDecimals(o,18);var s=k()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),r=parseFloat(o);return M=Math.max(M,r),{x:s,y:r}}})[0]}).filter(function(e){return void 0!==e})})}}),g.push({id:"Idle",color:"hsl("+T.a.stats.protocols.idle.color.hsl.join(",")+")",data:a.map(function(e,t){var a=k()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),o=parseFloat(n.functionsUtil.fixTokenDecimals(e.idleRate,18));return M=Math.max(M,o),{x:a,y:o}})}),v=w.a,d=parseFloat(M/t),C=[0],L=1;L<=5;L++)C.push(L*d);return j=0,I=6,_=g[g.length-1].data.sort(function(e,t){return k()(e.x,"YYYY/MM/DD HH:mm").isBefore(k()(t.x,"YYYY/MM/DD HH:mm"))?-1:1}),f=k()(_[_.length-1].x,"YYYY/MM/DD HH:mm").diff(k()(_[0].x,"YYYY/MM/DD HH:mm"),"days"),D=Math.max(1,Math.ceil(f/I)),b={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(2)+"%"},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:C,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(1)+"%"}},axisBottom:n.props.isMobile?null:{legend:"",tickSize:0,tickPadding:15,legendOffset:0,orient:"bottom",format:function(e){if(j++%D===0)return k()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},tickValues:"every day",legendPosition:"middle"},gridYValues:C,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemWidth:n.props.isMobile?70:80,itemHeight:18,translateX:n.props.isMobile?-35:0,translateY:n.props.isMobile?40:65,symbolSize:10,itemsSpacing:0,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:n.props.theme.colors.legend,effects:[{on:"hover",style:{itemTextColor:"light"===n.props.themeMode?"#000":"#fff"}}]}],theme:{axis:{ticks:{text:{fontSize:n.props.isMobile?12:14,fontWeight:600,fill:n.props.theme.colors.legend,fontFamily:n.props.theme.fonts.sansSerif}}},grid:{line:{stroke:n.props.theme.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontWeight:500,fill:n.props.theme.colors.legend,textTransform:"capitalize",fontFamily:n.props.theme.fonts.sansSerif,fontSize:n.props.isMobile?12:14}}},pointColor:{from:"color",modifiers:[]},margin:n.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:70},sliceTooltip:function(e){var t=e.slice,n=t.points[0];return h.a.createElement(S.a,{point:n},"object"===typeof t.points&&t.points.length&&t.points.map(function(e){var t=e.serieId,n=e.data.yFormatted;return h.a.createElement(U.a,{key:e.id,color:e.color,label:t,value:n})}))}},e.abrupt("break",147);case 96:for(q=0,M=0,n.props.tokenConfig.protocols.forEach(function(e,t){var n=T.a.stats.protocols[e.name];n.enabled&&(g.filter(function(t){return t.name===e.name}).length||g.push({id:n.label,color:"hsl("+T.a.stats.protocols[e.name].color.hsl.join(",")+")",data:a.map(function(t,n){return t.protocolsData.filter(function(t,n){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()}).map(function(e,n){var a=k()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),o=parseFloat(e.defiScore);return o=isNaN(o)||!o?q:o,q=o,M=Math.max(M,o),{x:a,y:o}})[0]}).filter(function(e){return void 0!==e})}))}),g.push({id:"Idle",color:"hsl("+T.a.stats.protocols.idle.color.hsl.join(",")+")",data:a.map(function(e,t){var n=k()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),a=parseFloat(e.idleScore);return a=isNaN(a)||!a?q:a,q=a,M=Math.max(M,a),{x:n,y:a}})}),v=w.a,d=parseFloat(M/t),C=[0],J=1;J<=5;J++)C.push(J*d);return j=0,I=6,f=k()(g[0].data[g[0].data.length-1].x,"YYYY/MM/DD").diff(k()(g[0].data[0].x,"YYYY/MM/DD"),"days"),D=Math.max(1,Math.ceil(f/I)),b={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(1)},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:C,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(1)}},axisBottom:n.props.isMobile?null:{legend:"",tickSize:0,tickPadding:15,orient:"bottom",legendOffset:0,tickValues:"every day",format:function(e){if(j++%D===0)return k()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},legendPosition:"middle"},gridYValues:C,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemWidth:n.props.isMobile?70:80,itemHeight:18,translateX:n.props.isMobile?-35:0,translateY:n.props.isMobile?40:65,symbolSize:10,itemsSpacing:0,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:n.props.theme.colors.legend,effects:[{on:"hover",style:{itemTextColor:"light"===n.props.themeMode?"#000":"#fff"}}]}],theme:{axis:{ticks:{text:{fontSize:n.props.isMobile?12:14,fontWeight:600,fill:n.props.theme.colors.legend,fontFamily:n.props.theme.fonts.sansSerif}}},grid:{line:{stroke:n.props.theme.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontWeight:500,fill:n.props.theme.colors.legend,textTransform:"capitalize",fontFamily:n.props.theme.fonts.sansSerif,fontSize:n.props.isMobile?12:14}}},pointColor:{from:"color",modifiers:[]},margin:n.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:70},sliceTooltip:function(e){var t=e.slice,n=t.points[0];return h.a.createElement(S.a,{point:n},"object"===typeof t.points&&t.points.length&&t.points.map(function(e){var t=e.serieId,n=e.data.yFormatted;return h.a.createElement(U.a,{key:e.id,color:e.color,label:t,value:n})}))}},e.abrupt("break",147);case 110:for(m=0,M=0,X=null,K=null,$=n.functionsUtil.BNify(0),Z=n.functionsUtil.BNify(1),Q=n.functionsUtil.BNify(1),O=[],ee=l.find(function(e){return"aavev2"===e.name}),a.forEach(function(e,t){var a=n.functionsUtil.BNify(e.idleRate),o=0,i=0,s=k()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm");if("WETH"===n.props.selectedToken&&k()(s).isSameOrBefore(k()("2021-05-19 12:20","YYYY-MM-DD HH:mm"))){var l=ee?e.protocolsData.find(function(e,t){return e.protocolAddr.toLowerCase()===ee.address.toLowerCase()}):null;l.aaveAdditionalAPR&&n.functionsUtil.BNify(l.aaveAdditionalAPR).gt(0)&&(a=a.plus(n.functionsUtil.BNify(l.aaveAdditionalAPR)))}var c=n.functionsUtil.fixTokenDecimals(a,18).div(100);if($=$.plus(c.times(100)),X){var u=(e.timestamp-K.timestamp)/86400,p=Q.times(X.times(u).div(365)),h=(Q=Q.plus(p)).div(Z).minus(1).times(100);o=parseFloat(h);var d=O.length>0?Math.max(1,k()(1e3*e.timestamp).diff(k()(O[0].x,"YYYY/MM/DD HH:mm"),"days")):1;i=parseFloat(365*o/d).toFixed(2)}K=e,X=c,null===A&&(A=parseInt(e.blocknumber)),M=Math.max(M,o);var f=Math.floor(m/r*100),g=e.blocknumber;m++,i>0&&O.push({x:s,y:o,apy:i,blocknumber:g,itemPos:f})}),c.additionalProtocols&&c.additionalProtocols.length>0&&c.additionalProtocols.forEach(function(e){var t=n.props.tokenConfig.protocols.find(function(t){return t.name===e.protocol});t&&e.enabledTokens.includes(n.props.selectedToken)&&(e.enabled=!0,e.address=t.address,l.unshift(e))}),l.forEach(function(e){var t=Object(x.a)({},T.a.stats.protocols[e.name]);if(t.tokensProps&&t.tokensProps[n.props.selectedToken]){var o=t.tokensProps[n.props.selectedToken];Object.keys(o).forEach(function(e){t[e]=o[e]})}if(!(!t.enabled||t.startTimestamp&&n.functionsUtil.strToMoment(t.startTimestamp).isAfter(Date.now()))){var i=t.rateField?t.rateField:"rate",s={id:t.label,color:"hsl("+t.color.hsl.join(",")+")",data:[]};m=0,X=null,K=null;var l=0,c=null,u=null;$=n.functionsUtil.BNify(0),Z=n.functionsUtil.BNify(1),Q=n.functionsUtil.BNify(1),a.filter(function(e){return!t.startTimestamp||k()(t.startTimestamp).isSameOrBefore(k()(1e3*e.timestamp))}).forEach(function(t,a){var o=t.protocolsData.find(function(t,n){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()});if(o){c||(c=o);var p="object"===typeof i&&i.length?i.reduce(function(e,t){return o[t]?n.functionsUtil.BNify(e).plus(n.functionsUtil.BNify(o[t])):n.functionsUtil.BNify(e)},0):n.functionsUtil.BNify(o[i]);if(p.lt(0)&&o.aaveAdditionalAPR&&n.functionsUtil.BNify(o.aaveAdditionalAPR).gt(0)&&(p=p.plus(n.functionsUtil.BNify(o.aaveAdditionalAPR))),!p.eq(0)){var h={},d=0,f=k()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),g=n.functionsUtil.fixTokenDecimals(p,18).div(100);if($=$.plus(g.times(100)),null===u&&(u=parseInt(t.blocknumber))>A){var b=O.find(function(e){return e.blocknumber>=u});b&&(d=l=b.y,$.toFixed(2))}if(m++,K){var v=(t.timestamp-K.timestamp)/86400,x=Q.times(X.times(v).div(365)),y=(Q=Q.plus(x)).div(Z).minus(1).times(100);d=parseFloat(y)+l;var w=Math.max(1,k()(1e3*t.timestamp).diff(k()(O[0].x,"YYYY/MM/DD HH:mm"),"days"));h={x:f,y:d,apy:parseFloat(365*d/w).toFixed(2),itemPos:Math.floor(m/r*100)},m++,s.data.push(h)}K=t,X=g,null===A&&(A=parseInt(t.blocknumber)),M=Math.max(M,d)}}}),g.push(s)}}),d=parseFloat(M/t),C=[0],te=1;te<=5;te++)C.push(te*d);return g.push({id:"Idle",data:O,color:"hsl("+T.a.stats.protocols.idle.color.hsl.join(",")+")"}),v=w.a,j=0,I=12,f=k()(O[O.length-1].x,"YYYY/MM/DD HH:mm").diff(k()(O[0].x,"YYYY/MM/DD HH:mm"),"days"),D=Math.max(1,Math.ceil(f/I)),b={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(3)+"%"},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:C,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(2)+"%"}},axisBottom:n.props.isMobile?null:{legend:"",tickSize:0,format:function(e){if(j++%D===0)return k()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},tickPadding:10,legendOffset:0,orient:"bottom",tickValues:"every day",legendPosition:"middle"},gridYValues:C,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"monotoneX",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemHeight:18,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:n.props.theme.colors.legend,itemWidth:n.props.isMobile?70:160,translateX:n.props.isMobile?-35:0,translateY:n.props.isMobile?40:65,effects:[{on:"hover",style:{itemTextColor:"light"===n.props.themeMode?"#000":"#fff"}}]}],theme:{axis:{ticks:{text:{fontSize:n.props.isMobile?12:14,fontWeight:600,fill:n.props.theme.colors.legend,fontFamily:n.props.theme.fonts.sansSerif}}},grid:{line:{stroke:n.props.theme.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:n.props.isMobile?12:14,fill:n.props.theme.colors.legend,fontWeight:500,fontFamily:n.props.theme.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:n.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:80,left:80},sliceTooltip:function(e){var t=e.slice,n=t.points[0];return h.a.createElement(S.a,{point:n},"object"===typeof t.points&&t.points.length&&t.points.map(function(e){var t=e.serieId,n=e.data.yFormatted,a=e.data.apy;return h.a.createElement(U.a,{key:e.id,label:t,color:e.color,value:"".concat(n," <small>(").concat(a,"% APY)</small>")})}))}},e.abrupt("break",147);case 133:return M=0,ne=null,O=a.map(function(e,t){var o=0,i=0,s=0,l=k()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),c=n.functionsUtil.fixTokenDecimals(e.idlePrice,n.props.tokenConfig.decimals);ne?(o=parseFloat(c.div(ne).minus(1).times(100)),s=(e.timestamp-a[0].timestamp)/86400,i=c.div(ne).minus(1).times(100).times(365).div(s).toFixed(2)):ne=c;null===A&&(A=parseInt(e.blocknumber)),M=Math.max(M,o);var u=Math.floor(m/r*100),p=e.blocknumber;return m++,{x:l,y:o,apy:i,blocknumber:p,itemPos:u}}),c.additionalProtocols&&c.additionalProtocols.length>0&&c.additionalProtocols.forEach(function(e){var t=n.props.tokenConfig.protocols.find(function(t){return t.name===e.protocol});t&&e.enabledTokens.includes(n.props.selectedToken)&&(e.enabled=!0,e.address=t.address,l.unshift(e))}),e.next=139,n.functionsUtil.asyncForEach(l,function(){var e=Object(i.a)(o.a.mark(function e(t){var s,l,c,u,p,h,d,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=T.a.stats.protocols[t.name]).enabled){e.next=3;break}return e.abrupt("return");case 3:return l=s.rateField?s.rateField:"rate",c={id:s.label,color:"hsl("+s.color.hsl.join(",")+")",data:[]},m=0,u=0,ne=null,p=null,h=null,d=null,f=null,e.next=14,n.functionsUtil.asyncForEach(a,function(){var e=Object(i.a)(o.a.mark(function e(i){var g,b,v,x,y,w,C,E,S,U,j,D;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(g=i.protocolsData.find(function(e,n){return e.protocolAddr.toLowerCase()===t.address.toLowerCase()}))&&g[l]&&(d||(d=g),n.functionsUtil.BNify(g[l]).eq(0)||(null===f&&(f=parseInt(i.blocknumber))>A&&(b=O.find(function(e){return e.blocknumber>=f}))&&(u=b.y),{},x=g.price,y=n.functionsUtil.fixTokenDecimals(x,t.decimals),w=k()(1e3*i.timestamp).format("YYYY/MM/DD HH:mm"),s&&s.data&&s.data[t.address.toLowerCase()]&&s.data[t.address.toLowerCase()][i.blocknumber]&&(x=n.functionsUtil.BNify(T.a.stats.protocols[t.name].data[t.address.toLowerCase()][i.blocknumber]),y=n.functionsUtil.fixTokenDecimals(x,t.decimals)),C=u,E=0,ne?(y.lt(h)?(ne=y,S=c.data[c.data.length-1].y-c.data[c.data.length-2].y,C=p.y+S,u=C):C+=parseFloat(y.div(ne).minus(1).times(100)),U=(i.timestamp-a[0].timestamp)/86400,j=y.div(ne).minus(1).times(100),E=j.times(365).div(U).toFixed(2)):ne=y,C=Math.max(0,C),M=Math.max(M,C),D=Math.floor(m/r*100),m++,p=v={x:w,y:C,apy:E,itemPos:D},c.data.push(v),h=y));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 14:g.push(c);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 139:for(d=parseFloat(M/t),C=[0],ae=1;ae<=5;ae++)C.push(ae*d);return g.push({id:"Idle",color:"hsl("+T.a.stats.protocols.idle.color.hsl.join(",")+")",data:O}),v=w.a,b={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(3)+"%"},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:C,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(2)+"%"}},axisBottom:n.props.isMobile?null:{legend:"",tickSize:0,format:"%b %d",tickPadding:10,legendOffset:0,orient:"bottom",legendPosition:"middle",tickValues:n.props.isMobile?"every 4 days":n.props.showAdvanced?"every 3 days":"every 2 days"},gridYValues:C,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"monotoneX",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemHeight:18,itemWidth:n.props.isMobile?70:100,translateX:n.props.isMobile?-35:0,translateY:n.props.isMobile?40:65,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:n.props.theme.colors.legend,effects:[{on:"hover",style:{itemTextColor:"light"===n.props.themeMode?"#000":"#fff"}}]}],theme:{axis:{ticks:{text:{fontSize:n.props.isMobile?12:14,fontWeight:600,fill:n.props.theme.colors.legend,fontFamily:n.props.theme.fonts.sansSerif}}},grid:{line:{stroke:n.props.theme.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontWeight:500,fill:n.props.theme.colors.legend,textTransform:"capitalize",fontFamily:n.props.theme.fonts.sansSerif,fontSize:n.props.isMobile?12:14}}},pointColor:{from:"color",modifiers:[]},margin:n.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:80,left:80},sliceTooltip:function(e){var t=e.slice,n=t.points[0];return h.a.createElement(S.a,{point:n},"object"===typeof t.points&&t.points.length&&t.points.map(function(e){var t=e.serieId,n=e.data.yFormatted,a=e.data.apy;return h.a.createElement(U.a,{key:e.id,label:t,color:e.color,value:"".concat(n," <small>(").concat(a,"% APY)</small>")})}))}},e.abrupt("break",147);case 146:return e.abrupt("break",147);case 147:n.setState({chartType:v,chartProps:b,chartData:g});case 148:case"end":return e.stop()}},e,this)})),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({chartData:null,chartType:null,chartProps:null}),this.loadUtils(),this.loadApiData();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t){var n,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.showAdvanced!==this.props.showAdvanced,a=t.apiResults!==this.props.apiResults,i=t.selectedToken!==this.props.selectedToken||JSON.stringify(t.tokenConfig)!==JSON.stringify(this.props.tokenConfig),(a||n||i)&&this.componentDidMount();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"render",value:function(){return h.a.createElement(C.a,Object.assign({showLoader:!0},this.state.chartProps,{height:this.props.height,type:this.state.chartType,data:this.state.chartData,width:this.state.chartWidth,isMobile:this.props.isMobile,parentId:this.props.parentId,parentIdHeight:this.props.parentIdHeight}))}}]),t}(p.Component),j=n(77),D=n(164),O=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,processing:{rebalance:{txHash:null,loading:!1}},shouldRebalance:null},n.functionsUtil=null,n.componentUnmounted=!1,n.checkRebalance=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setStateSafe({loading:!0}),e.next=3,n.functionsUtil.checkRebalance(n.props.tokenConfig);case 3:t=e.sent,n.setStateSafe({loading:!1,shouldRebalance:t});case 5:case"end":return e.stop()}},e,this)})),n.rebalance=function(){var e=Object(i.a)(o.a.mark(function e(t){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=function(e,t){if(e){var a={eventLabel:e.status,eventCategory:"Rebalance",eventAction:n.props.selectedToken};t&&(a.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==a.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(a),"success"===e.status?window.toastProvider.addMessage("Rebalance completed",{secondaryMessage:"Now the pool is balanced!",colorTheme:"light",actionHref:"",actionText:"",variant:"success"}):window.toastProvider.addMessage("Rebalance error",{secondaryMessage:"The rebalance has failed, try again...",colorTheme:"light",actionHref:"",actionText:"",variant:"failure"})}n.setStateSafe(function(e){return{processing:Object(x.a)({},e.processing,{rebalance:{txHash:null,loading:!1}})}}),n.checkRebalance()},i=function(e){var t=e.transactionHash;n.setStateSafe(function(e){return{processing:Object(x.a)({},e.processing,{rebalance:Object(x.a)({},e.processing.rebalance,{txHash:t})})}})},e.next=5,n.setStateSafe({processing:{rebalance:{txHash:null,loading:!0}}});case 5:n.props.contractMethodSendWrapper(n.props.tokenConfig.idle.token,"rebalance",[],null,a,i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillUnmount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.componentUnmounted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.checkRebalance();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),a=t.account!==this.props.account,(t.selectedToken!==this.props.selectedToken||a)&&this.checkRebalance();case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setStateSafe",value:function(){var e=Object(i.a)(o.a.mark(function e(t){var n,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:null,this.componentUnmounted){e.next=3;break}return e.abrupt("return",this.setState(t,n));case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return h.a.createElement(f.h,{px:3,width:1,minHeight:"100px",alignItems:"center",flexDirection:"column",justifyContent:"center"},this.state.loading?h.a.createElement(d.a,{flexProps:{flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Checking rebalance..."}):this.state.processing.rebalance.loading?h.a.createElement(D.a,Object.assign({},this.props,{waitText:"Rebalance estimated in",endMessage:"Finalizing rebalance request...",hash:this.state.processing.rebalance.txHash})):h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.u,{mt:0,mb:3,textAlign:"center"},this.state.shouldRebalance?"Rebalance the entire pool. All users will bless you.":"The pool is already balanced."),h.a.createElement(j.a,{buttonProps:{width:"auto",disabled:!this.state.shouldRebalance},handleClick:function(t){return e.rebalance(t)}},"Rebalance")))}}]),t}(p.Component),A=n(5077),I=n(503),P=n(1149),B=n(112),F=n(181),z=n(132),Y=n(1160),G=n(616),N=n(1288),H=(n(5137),n(59)),R=(n(5139),n(5141)),V=(n(5153),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={quickSelection:"",ranges:{startDate:n.props.startDate?n.props.startDate:new Date,endDate:n.props.endDate?n.props.endDate:new Date,key:"selection"},options:Object.keys(n.props.quickSelections).map(function(e){return{value:e,label:n.props.quickSelections[e].label}})},n.componentDidUpdate=function(e){e.startDate===n.props.startDate&&e.endDate===n.props.endDate||n.setState({ranges:{startDate:n.props.startDate?n.props.startDate:new Date,endDate:n.props.endDate?n.props.endDate:new Date,key:"selection"}})},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleSelect",value:function(e){this.setState({quickSelection:"",ranges:e.selection})}},{key:"handleQuickSelect",value:function(e){var t=this,n=null,a=k()(new Date),o=e.target.value;if(o&&this.props.quickSelections[o]){var i=this.props.quickSelections[o];n=a.clone().subtract(i.value,i.type)}else n=null,a=null;if(n&&a){var s={startDate:n=n._d,endDate:a=a._d,key:"selection"};this.setState({ranges:s,quickSelection:o},function(){t.closeModal()})}}},{key:"closeModal",value:function(){var e=this.props.handleSelect(this.state.ranges,this.state.quickSelection),t={startDate:e.startTimestampObj?e.startTimestampObj._d:new Date,endDate:e.endTimestampObj?e.endTimestampObj._d:new Date,key:"selection"};this.setState({ranges:t}),this.props.closeModal()}},{key:"render",value:function(){var e=this;return h.a.createElement(f.p,{isOpen:this.props.isOpen},h.a.createElement(H.a,{closeFunc:this.props.closeModal},h.a.createElement(H.a.Header,{title:"Select Date Range"}),h.a.createElement(H.a.Body,null,h.a.createElement(f.h,{width:1,flexDirection:"column",alignItems:"center"},h.a.createElement(f.g,{label:"Quick Date Selection",style:{display:"flex",width:"100%",alignItems:"stretch",justifyContent:"center"}},h.a.createElement(f.t,{style:{fontSize:"14px",height:"2.5em",boxShadow:"none",color:this.props.theme.colors.counter,backgroundColor:this.props.theme.colors.cardBg},width:"100%",required:!0,options:this.state.options,value:this.state.quickSelection,onChange:this.handleQuickSelect.bind(this)})),h.a.createElement(R.DateRange,{ranges:[this.state.ranges],minDate:this.props.minDate,maxDate:this.props.maxDate,className:this.props.themeMode,onChange:this.handleSelect.bind(this)}))),h.a.createElement(H.a.Footer,null,h.a.createElement(f.h,{px:[2,0],flexDirection:["column","row"],width:1,justifyContent:"center"},h.a.createElement(f.c,{my:2,mx:[0,2],borderRadius:4,mainColor:"blue",onClick:function(t){return e.closeModal(t)},size:this.props.isMobile?"small":"medium"},"APPLY")))))}}]),t}(h.a.Component)),W=n(220),L=n(5081),_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={aum:null,apr:null,days:"-",delta:null,earning:null,minDate:null,maxDate:null,carouselMax:1,rebalances:"-",buttonGroups:[],apiResults:null,carouselIndex:0,idleVersion:null,statsVersions:{},minStartTime:null,endTimestamp:null,showAdvanced:!0,govTokensPool:null,unlentBalance:null,quickSelection:null,startTimestamp:null,endTimestampObj:null,shouldRebalance:null,carouselOffsetLeft:0,startTimestampObj:null,showRefreshIdleSpeed:!1,apiResults_unfiltered:null,dateRangeModalOpened:!1},n.quickSelections={day:{value:1,type:"day",label:"Last day"},week:{value:1,type:"week",label:"Last week"},weeks:{value:2,type:"week",label:"Last 2 weeks"},month:{value:1,type:"month",label:"Last month"},ytd:{type:"day",label:"Year to date",value:k()().diff(k()("01/01/YYYY","DD/MM/YYYY"),"days")}},n.functionsUtil=null,n.componentUnmounted=null,n.setDateRange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=k()(T.a.stats.tokens[n.props.selectedToken].startTimestamp),o=k()(e.startDate).isSameOrAfter(a)?k()(e.startDate):a,i=k()(e.endDate);o.isSame(i)&&i.add(1,"day"),i=k()(i.format("YYYY-MM-DD 23:59"),"YYYY-MM-DD HH:mm"),o.isBefore(n.state.minStartTime)&&(o=n.state.minStartTime),i.isAfter(n.state.maxEndDate)&&(i=n.state.maxEndDate);var s=parseInt(o._d.getTime()/1e3),r={minStartTime:a,endTimestamp:parseInt(i._d.getTime()/1e3),quickSelection:t,startTimestamp:s,endTimestampObj:i,startTimestampObj:o};return n.setStateSafe(r),r},n.toggleAdvancedCharts=function(e){e.preventDefault(),n.setStateSafe({showAdvanced:!n.state.showAdvanced})},n.setDateRangeModal=function(e){e!==n.state.dateRangeModalOpened&&n.setStateSafe({dateRangeModalOpened:e})},n.filterTokenData=function(e){return e.filter(function(e,t){return(!n.state.startTimestamp||e.timestamp>=n.state.startTimestamp)&&(!n.state.endTimestamp||e.timestamp<=n.state.endTimestamp)})},n.setIdleVersion=function(e){n.setStateSafe({idleVersion:e})},n.loadApiData=Object(i.a)(o.a.mark(function e(){var t,a,i,s,r,l,c,u,p,h,d,m,f,g,b,v,x,y,w,C,E,S,U,M,j,D,O,A;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.selectedToken&&n.props.tokenConfig){e.next=2;break}return e.abrupt("return",!1);case 2:return t=n.state.minDate?parseInt(n.functionsUtil.strToMoment(n.functionsUtil.strToMoment(n.state.minDate).format("DD/MM/YYYY 00:00:00"),"DD/MM/YYYY HH:mm:ss")._d.getTime()/1e3):null,a=n.state.maxDate?parseInt(n.functionsUtil.strToMoment(n.functionsUtil.strToMoment(n.state.maxDate).format("DD/MM/YYYY 23:59:59"),"DD/MM/YYYY HH:mm:ss")._d.getTime()/1e3):null,i=["v3","v4"].includes(n.state.idleVersion)&&"risk"===n.props.selectedStrategy,e.next=7,n.functionsUtil.getTokenApiData(n.props.tokenConfig.address,i,t,a,!0,7200);case 7:if(s=e.sent,(r=n.filterTokenData(s))&&s&&r.length&&s.length){e.next=11;break}return e.abrupt("return",!1);case 11:return l=r[0],c=Object.values(r).pop(),window.moment=k.a,0===(u=(c.timestamp-l.timestamp)/86400)&&(u=1),p=null,h="N/A",d=n.functionsUtil.fixTokenDecimals(c.idleSupply,18),m=n.functionsUtil.fixTokenDecimals(l.idlePrice,n.props.tokenConfig.decimals),f=n.functionsUtil.fixTokenDecimals(c.idlePrice,n.props.tokenConfig.decimals),g=d.times(f),e.next=24,n.functionsUtil.convertTokenBalance(g,n.props.selectedToken,n.props.tokenConfig,i);case 24:return g=e.sent,b=n.props.tokenConfig.protocols.filter(function(e){return"compound"===e.name})[0],v=b?l.protocolsData.filter(function(e){return e.protocolAddr.toLowerCase()===b.address.toLowerCase()})[0]:null,x=b?c.protocolsData.filter(function(e){return e.protocolAddr.toLowerCase()===b.address.toLowerCase()})[0]:null,"v4"===n.state.idleVersion?(p=(p=r.reduce(function(e,t){var a=n.functionsUtil.fixTokenDecimals(t.idleRate,18);return n.functionsUtil.BNify(e).plus(a)},0)).div(r.length),b&&(y=T.a.stats.protocols.compoundWithCOMP,w=y.rateField?y.rateField:"rate",C=(C=r.reduce(function(e,t){var a=t.protocolsData.find(function(e,t){return e.protocolAddr.toLowerCase()===b.address.toLowerCase()}),o="object"===typeof w&&w.length?w.reduce(function(e,t){return a&&a[t]?n.functionsUtil.BNify(e).plus(n.functionsUtil.BNify(a[t])):n.functionsUtil.BNify(e)},0):n.functionsUtil.BNify(a[w]);return o=n.functionsUtil.fixTokenDecimals(o,18),n.functionsUtil.BNify(e).plus(o)},0)).div(r.length),h=p.minus(C),parseFloat(h)<0&&(h=0),h=h.toFixed(2)),p=p.toFixed(2)):(E=f.div(m).minus(1).times(100),p=E.times(365).div(u).toFixed(2),v&&x&&(S=n.functionsUtil.fixTokenDecimals(v.price,n.props.tokenConfig.decimals),U=n.functionsUtil.fixTokenDecimals(x.price,n.props.tokenConfig.decimals),M=U.div(S).minus(1).times(100),h=E.minus(M).times(365).div(u),parseFloat(h)<0&&(h=0),h=h.toFixed(2))),j=0,r.forEach(function(e,t){if(t){var a=r[t-1],o=e.protocolsData.reduce(function(e,t){var a=n.functionsUtil.fixTokenDecimals(t.allocation,n.props.tokenConfig.decimals);return n.functionsUtil.BNify(e).plus(a)},0),i=a.protocolsData.reduce(function(e,t){var a=n.functionsUtil.fixTokenDecimals(t.allocation,n.props.tokenConfig.decimals);return n.functionsUtil.BNify(e).plus(a)},0),s=!1;e.protocolsData.forEach(function(e){if(!s){var t=a.protocolsData.find(function(t){return t.protocolAddr.toLowerCase()===e.protocolAddr.toLowerCase()}),r=n.functionsUtil.fixTokenDecimals(e.allocation,n.props.tokenConfig.decimals),l=t?n.functionsUtil.fixTokenDecimals(t.allocation,n.props.tokenConfig.decimals):n.functionsUtil.BNify(0);parseInt(parseFloat(r.div(o).times(100)))!==parseInt(parseFloat(l.div(i).times(100)))&&(j++,s=!0)}})}}),(D={})[n.props.selectedToken]=n.props.tokenConfig,e.next=35,n.functionsUtil.getGovTokenPool(null,D,"DAI");case 35:return(O=e.sent)&&(g=g.plus(O)),e.next=39,n.functionsUtil.getUnlentBalance(n.props.tokenConfig);case 39:(A=e.sent)&&(A=n.functionsUtil.formatMoney(parseFloat(A))),n.setStateSafe({aum:g,apr:p,days:u,delta:h,apiResults:r,rebalances:j,govTokensPool:O,unlentBalance:A,apiResults_unfiltered:s});case 42:case"end":return e.stop()}},e,this)})),n.selectToken=function(){var e=Object(i.a)(o.a.mark(function e(t,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.setStrategyToken(t,a);case 2:n.props.changeToken(a);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.handleCarousel=function(e){var t=n.state.carouselIndex;"next"===e&&t<n.state.carouselMax?t++:"back"===e&&t>0&&t--;var a=window.jQuery("#carousel-cursor > div:eq(".concat(t,")")),o=-parseFloat(a.position().left)+"px";n.setStateSafe({carouselIndex:t,carouselOffsetLeft:o})},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUtils(),e.next=3,this.loadParams();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.componentUnmounted=!0}},{key:"setStateSafe",value:function(){var e=Object(i.a)(o.a.mark(function e(t){var n,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:null,this.componentUnmounted){e.next=3;break}return e.abrupt("return",this.setState(t,n));case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showRefreshIdleSpeed",value:function(){this.setState({showRefreshIdleSpeed:!0})}},{key:"getLatestAvailableVersion",value:function(){var e=this,t=T.a.stats.versions,n=null;return Object.keys(t).forEach(function(a){t[a].enabledStrategies.includes(e.props.selectedStrategy)&&(n=a)}),n}},{key:"getVersionInfo",value:function(e){if(e||(e=this.state.idleVersion),!T.a.stats.versions[e])return null;var t=Object.assign({},T.a.stats.versions[e]);if(t.strategiesParams&&t.strategiesParams[this.props.selectedStrategy]){var n=t.strategiesParams[this.props.selectedStrategy];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t}},{key:"loadParams",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.selectedToken&&this.props.tokenConfig){e.next=2;break}return e.abrupt("return",!1);case 2:if(t={},n=this.props.match.params,a=Object.keys(this.props.availableTokens),n.customToken&&-1!==a.indexOf(n.customToken.toUpperCase())?t.selectedToken=n.customToken.toUpperCase():t.selectedToken=this.props.selectedToken.toUpperCase(),t.tokenConfig=this.props.availableTokens[t.selectedToken],t.minStartTime=k()(T.a.stats.tokens[this.props.selectedToken].startTimestamp,"YYYY-MM-DD"),t.maxEndDate=k()(),t.endTimestampObj=k()(k()().format("YYYY-MM-DD 23:59"),"YYYY-MM-DD HH:mm"),t.latestVersion=this.getLatestAvailableVersion(),t.idleVersion=null===this.state.idleVersion?t.latestVersion:this.state.idleVersion,i=this.getVersionInfo(t.idleVersion),t.idleVersion&&i.endTimestamp&&(s=k()(k()(1e3*i.endTimestamp).format("YYYY-MM-DD HH:mm"),"YYYY-MM-DD HH:mm"),t.endTimestampObj.isAfter(s)&&(t.endTimestampObj=s,t.endTimestamp=parseInt(t.endTimestampObj._d.getTime()/1e3)),t.maxEndDate&&!t.maxEndDate.isAfter(s)||(t.maxEndDate=s)),t.endTimestamp=parseInt(t.endTimestampObj._d.getTime()/1e3),t.startTimestampObj=t.endTimestampObj.clone().subtract(1,"month"),t.startTimestamp=parseInt(t.startTimestampObj._d.getTime()/1e3),t.idleVersion&&i.startTimestamp&&(r=k()(k()(1e3*i.startTimestamp).format("YYYY-MM-DD HH:mm"),"YYYY-MM-DD HH:mm"),t.startTimestampObj.isBefore(r)&&(t.startTimestampObj=r,t.startTimestamp=parseInt(t.startTimestampObj._d.getTime()/1e3)),t.minStartTime.isBefore(r)&&(t.minStartTime=r)),t.minDate=t.minStartTime._d,t.maxDate=t.maxEndDate._d,t===this.state){e.next=23;break}return e.next=23,this.setStateSafe(t);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.web3){e.next=3;break}return this.props.initWeb3(),e.abrupt("return",!1);case 3:return this.loadUtils(),e.next=6,this.loadParams();case 6:this.loadApiData(),this.loadCarousel();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadCarousel",value:function(){var e=this.props.isMobile?3:2;this.setStateSafe({carouselMax:e})}},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i,s,r,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.contractsInitialized!==this.props.contractsInitialized,i=t.selectedStrategy!==this.props.selectedStrategy,s=t.selectedToken!==this.props.selectedToken||JSON.stringify(t.tokenConfig)!==JSON.stringify(this.props.tokenConfig),r=n.startTimestamp!==this.state.startTimestamp||n.endTimestamp!==this.state.endTimestamp,l=n.idleVersion!==this.state.idleVersion,t.isMobile!==this.props.isMobile&&this.loadCarousel(),!(a||s||i||l)){e.next=12;break}return e.next=10,this.componentDidMount();case 10:e.next=13;break;case 12:r&&this.loadApiData();case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.functionsUtil.getRequiredNetworkId(),n=this.functionsUtil.getGlobalConfig(["govTokens","IDLE","availableNetworks"]),a=this.functionsUtil.getGlobalConfig(["govTokens","IDLE","enabled"])&&n.includes(t),o=this.functionsUtil.getGlobalConfig(["contract","methods","refreshIdleSpeed"]),i=o.enabled&&o.availableNetworks.includes(t),s=this.functionsUtil.getGlobalConfig(["messages","apyLong"]);if(!this.props.availableStrategies)return h.a.createElement(d.a,{textProps:{textSize:4,fontWeight:2},loaderProps:{mb:3,size:"40px"},flexProps:{minHeight:"50vh",flexDirection:"column"},text:"Loading assets..."});var r=this.functionsUtil.getGlobalConfig(["stats","tokens"]);if(this.props.selectedToken){var l=r[this.props.selectedToken],c=Object.keys(T.a.stats.versions).filter(function(t){var n=e.getVersionInfo(t);return n.enabledTokens.includes(e.props.selectedToken)&&n.enabledStrategies.includes(e.props.selectedStrategy)}).map(function(t){return{value:t,label:e.getVersionInfo(t).label}}),u=this.getVersionInfo(this.state.idleVersion),p=null;if(this.state.idleVersion&&u)p=this.functionsUtil.getGlobalConfig(["stats","versions",this.state.idleVersion,"showPerformanceTooltip"])?this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"performanceTooltip"]):null;var m=c.find(function(t){return t.value===e.state.idleVersion});return h.a.createElement(f.h,{p:0,width:1,flexDirection:"column"},h.a.createElement(f.b,{mb:[3,4]},h.a.createElement(f.h,{flexDirection:["column","row"]},h.a.createElement(f.h,{width:[1,.4]},h.a.createElement(P.a,Object.assign({},this.props,{showPathMobile:!0,text:"ASSETS OVERVIEW",isMobile:this.props.isMobile,handleClick:function(t){return e.props.goToSection("stats")},path:[this.functionsUtil.getGlobalConfig(["strategies",this.props.selectedStrategy,"title"])]}))),h.a.createElement(f.h,{mt:[3,0],width:[1,.6],flexDirection:["column","row"],justifyContent:["center","space-between"]},h.a.createElement(f.h,{width:[1,.26],flexDirection:"column"},h.a.createElement(z.a,{innerProps:{p:1,height:["100%","46px"]},name:"idle-version",options:c,defaultValue:m,onChange:function(t){return e.setIdleVersion(t)}})),h.a.createElement(f.h,{mt:[3,0],width:[1,.3],flexDirection:"column"},h.a.createElement(F.a,Object.assign({innerProps:{p:1}},this.props))),h.a.createElement(f.h,{mt:[3,0],width:[1,.39],flexDirection:"column"},h.a.createElement(E.a,{cardProps:{p:1,display:"flex",alignItems:"center",height:["46px","100%"],justifyContent:"center"},isInteractive:!0,handleClick:function(t){return e.setDateRangeModal(!0)}},h.a.createElement(f.u,{fontWeight:3,color:"copyColor"},this.state.quickSelection?this.quickSelections[this.state.quickSelection].label:this.state.startTimestampObj&&this.state.endTimestampObj&&"".concat(this.state.startTimestampObj.format("DD/MM/YY")," - ").concat(this.state.endTimestampObj.format("DD/MM/YY")))))))),l.enabled?this.state.idleVersion&&this.functionsUtil.strToMoment(u.startTimestamp).isAfter(Date.now())?h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{p:3,width:[1,.5]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",color:"cellText",name:"AccessTime"}),h.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Idle Stats ",this.state.idleVersion," will be available shortly!")))):this.functionsUtil.strToMoment(l.startTimestamp).isAfter(Date.now())?h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{p:3,width:[1,.5]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",color:"cellText",name:"AccessTime"}),h.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Stats for ",this.props.selectedToken," will be available shortly!")))):h.a.createElement(f.b,{width:1},h.a.createElement(f.b,{mt:[3,0],mb:[3,4]},h.a.createElement(f.h,{width:1,alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},h.a.createElement(f.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},h.a.createElement(A.a,{title:"Asset Under Management",label:this.state.unlentBalance?"Unlent funds: ".concat(this.state.unlentBalance," ").concat(this.props.selectedToken):this.props.selectedToken,labelTooltip:this.state.unlentBalance?this.functionsUtil.getGlobalConfig(["messages","cheapRedeem"]):null},h.a.createElement(B.a,Object.assign({precision:2,type:"money"},{lineHeight:1,fontSize:[4,5],fontWeight:[3,4],color:"statValue"},{unitProps:{ml:2,lineHeight:1,fontWeight:[2,3],color:"statValue",fontSize:[3,"23px"]},number:this.state.aum,flexProps:{alignItems:"baseline",justifyContent:"flex-start"},unit:this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"conversionRateField"])?"$":null})))),h.a.createElement(f.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},h.a.createElement(A.a,{title:"Avg APY",label:"Annualized"},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:["column","row"]},h.a.createElement(G.a,{direction:"up",iconPos:"right",iconSize:"1.8em",justifyContent:"flex-start",width:1},h.a.createElement(f.u,{lineHeight:1,fontWeight:[3,4],color:"statValue",fontSize:[4,5]},this.state.apr,h.a.createElement(f.u.span,{color:"statValue",fontWeight:3,fontSize:["90%","70%"]},"%")))))),h.a.createElement(f.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},h.a.createElement(A.a,{title:"Overperformance on Compound",label:"Annualized"},this.state.delta&&!isNaN(this.state.delta)?h.a.createElement(G.a,{direction:"up",iconPos:"right",iconSize:"1.8em",justifyContent:"flex-start"},h.a.createElement(f.u,{lineHeight:1,fontSize:[4,5],fontWeight:[3,4],color:"statValue"},this.state.delta,h.a.createElement(f.u.span,{color:"statValue",fontWeight:3,fontSize:["90%","70%"]},"%"))):h.a.createElement(f.u,{lineHeight:1,fontSize:[4,5],fontWeight:[3,4],color:"statValue"},this.state.delta))),h.a.createElement(f.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},h.a.createElement(A.a,{label:" ",title:"Rebalances",value:this.state.rebalances.toString()})))),h.a.createElement(E.a,{title:"Historical Performance",description:p,cardProps:{mb:[3,4]}},h.a.createElement(f.h,{id:"chart-PRICE",width:1,mb:3},h.a.createElement(M,Object.assign({height:350},this.state,{parentId:"chart-PRICE",theme:this.props.theme,isMobile:this.props.isMobile,contracts:this.props.contracts,themeMode:this.props.themeMode,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,selectedToken:this.props.selectedToken,apiResults_unfiltered:this.state.apiResults_unfiltered,chartMode:this.state.idleVersion===this.state.latestVersion?"PRICE_V4":"PRICE"})))),h.a.createElement(E.a,{cardProps:{pb:3,mb:[3,4]}},h.a.createElement(f.h,{flexDirection:["column","row"],justifyContent:"space-between"},this.state.idleVersion===this.state.latestVersion&&h.a.createElement(f.h,{pt:2,width:[1,1/3],id:"allocation-chart",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},h.a.createElement(N.a,Object.assign({height:310},this.props,{parentId:"allocation-chart"})),h.a.createElement(O,this.props)),h.a.createElement(f.h,{mb:[0,3],id:"chart-ALL",pl:[0,this.state.idleVersion===this.state.latestVersion?0:3],width:[1,this.state.idleVersion===this.state.latestVersion?2/3:1]},h.a.createElement(f.h,{alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"column",width:1},h.a.createElement(f.j.h4,{mb:2,ml:3,mt:[3,4],fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Allocations over time"),h.a.createElement(M,Object.assign({height:350},this.state,{chartMode:"ALL",parentId:"chart-ALL",theme:this.props.theme,isMobile:this.props.isMobile,themeMode:this.props.themeMode,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered})))))),h.a.createElement(f.h,{position:"relative"},h.a.createElement(f.h,{width:1,id:"carousel-container",justifyContent:"flex-end"},h.a.createElement(Y.a,{buttonProps:{mr:3},iconName:"ArrowBack",disabled:0===this.state.carouselIndex,handleClick:function(t){return e.handleCarousel("back")}}),h.a.createElement(Y.a,{iconName:"ArrowForward",handleClick:function(t){return e.handleCarousel("next")},disabled:this.state.carouselIndex===this.state.carouselMax})),h.a.createElement(f.h,{mt:5,height:"400px",position:"absolute",id:"carousel-cursor",width:["444%","200%"],justifyContent:"flex-start",left:this.state.carouselOffsetLeft,style:{transition:"left 0.3s ease-in-out"}},h.a.createElement(E.a,{cardProps:{mr:4,height:"fit-content",style:this.props.isMobile?{width:"100%"}:{width:"32vw"}}},h.a.createElement(f.h,{width:1,id:"chart-AUM"},h.a.createElement(f.h,{mb:3,width:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},h.a.createElement(f.j.h4,{ml:3,mt:3,mb:2,fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Asset Under Management"),h.a.createElement(M,Object.assign({height:300},this.state,{chartMode:"AUM",parentId:"chart-AUM",theme:this.props.theme,isMobile:this.props.isMobile,themeMode:this.props.themeMode,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered}))))),h.a.createElement(E.a,{cardProps:{mr:4,height:"fit-content",style:this.props.isMobile?{width:"100%"}:{width:"32vw"}}},h.a.createElement(f.h,{id:"chart-APR",width:1},h.a.createElement(f.h,{mb:3,width:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},h.a.createElement(f.j.h4,{mb:2,ml:3,mt:3,fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"APRs"),h.a.createElement(M,Object.assign({height:300},this.state,{chartMode:"APR",parentId:"chart-APR",theme:this.props.theme,isMobile:this.props.isMobile,themeMode:this.props.themeMode,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered}))))),h.a.createElement(E.a,{cardProps:{mr:4,height:"fit-content",style:this.props.isMobile?{width:"100%"}:{width:"32vw"}}},h.a.createElement(f.h,{id:"chart-VOL",width:1},h.a.createElement(f.h,{mb:3,width:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},h.a.createElement(f.j.h4,{mb:2,ml:3,mt:3,fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Volume"),h.a.createElement(M,Object.assign({height:300},this.state,{chartMode:"VOL",parentId:"chart-VOL",theme:this.props.theme,isMobile:this.props.isMobile,themeMode:this.props.themeMode,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered})))))))):h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{p:3,width:[1,.5]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",color:"cellText",name:"DoNotDisturb"}),h.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Stats for ",this.props.selectedToken," are not available!")))),h.a.createElement(V,Object.assign({},this.props,{minDate:this.state.minDate,maxDate:this.state.maxDate,handleSelect:this.setDateRange,quickSelections:this.quickSelections,isOpen:this.state.dateRangeModalOpened,closeModal:function(t){return e.setDateRangeModal(!1)},startDate:this.state.startTimestampObj?this.state.startTimestampObj._d:null,endDate:this.state.endTimestampObj?this.state.endTimestampObj._d:null})))}var g=this.functionsUtil.getGlobalConfig(["strategies"]),b=[],k=this.functionsUtil.getGlobalConfig(["stats","protocols"]);return Object.keys(r).forEach(function(e){r[e].enabled&&b.push(e)}),h.a.createElement(f.h,{mb:3,width:1,flexDirection:"column"},h.a.createElement(L.a,Object.assign({},this.props,{loaderAlign:"flex-end"})),Object.keys(g).map(function(t){var n=g[t],a=e.props.availableStrategies[t];if(!a||!Object.keys(a).length)return!1;var o=[];Object.keys(a).forEach(function(e){a[e].protocols.forEach(function(e){o.indexOf(e.name)<0&&o.push(e.name)})});var i=o.map(function(e){return k[e]},{});return h.a.createElement(f.b,{mb:2,width:1,flexDirection:"column",justifyContent:"center",key:"strategy-container-".concat(t)},h.a.createElement(v.a,{mt:3,mb:[3,4]},h.a.createElement(f.h,{flexDirection:"row",alignItems:"baseline",justifyContent:"center"},n.title,n.titlePostfix&&h.a.createElement(f.u,{ml:2,fontWeight:3,fontSize:[2,4],color:"dark-gray"},n.titlePostfix))),h.a.createElement(I.a,Object.assign({enabledTokens:b,handleClick:function(n){return e.selectToken(t,n.token)},cols:[{title:"CURRENCY",props:{width:[.26,.15]},fields:[{name:"icon",props:{mr:2,height:["1.4em","2.3em"]}},{name:"tokenName"}]},{title:"POOL",props:{width:[.22,.15]},fields:[{name:"allocationChart",mobile:!1,parentProps:{width:.3},style:{overflow:"visible"},showLoader:!1},{name:"pool",props:{ml:1},parentProps:{width:[1,.7]}}]},{title:"APY",desc:s,props:{width:[.29,.15]},parentProps:{flexDirection:"column",alignItems:"flex-start"},fields:[{name:"apy",showTooltip:!0},{name:"idleDistribution",showLoader:!1,props:{decimals:e.props.isMobile?1:2,fontSize:e.props.isMobile?"9px":0}}]},{title:"FARMING",desc:e.functionsUtil.getGlobalConfig(["messages","yieldFarming"]),mobile:!1,props:{width:[.27,.14]},fields:[{name:"govTokens"}]},{title:"APR LAST WEEK",mobile:!1,props:{width:.25},parentProps:{width:1,pr:[2,4]},fields:[{name:"aprChart",style:{overflow:"visible"}}]},{title:"",props:{width:[.23,.16]},parentProps:{width:1},fields:[{name:"button",label:e.props.isMobile?"View":"View stats",props:{width:1,fontSize:3,fontWeight:3,height:"45px",borderRadius:4,boxShadow:null,mainColor:"redeem",size:e.props.isMobile?"small":"medium",handleClick:function(n){return e.selectToken(t,n.token)}}}]}]},e.props,{selectedStrategy:t,availableTokens:a})),!e.props.isMobile&&h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},i.filter(function(e){return e.legend}).map(function(e,t){return h.a.createElement(f.h,{mr:3,alignItems:"center",flexDirection:"row",key:"legend_".concat(t)},h.a.createElement(f.b,{mr:1,width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"rgb(".concat(e.color.rgb.join(","),")")}),h.a.createElement(f.u.span,{fontSize:1,color:"cellText"},e.label))})))}),a&&i&&!this.state.showRefreshIdleSpeed?h.a.createElement(f.h,{mb:4,width:1,mt:[2,3],alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(f.n,{hoverColor:"primary",onClick:this.showRefreshIdleSpeed.bind(this)},"Refresh Idle Speed")):a&&i&&this.state.showRefreshIdleSpeed&&h.a.createElement(E.a,{cardProps:{p:2,mb:4,width:1,mt:[2,3]},isActive:!0,isInteractive:!1},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.u,{fontWeight:500,color:"flashColor",textAlign:"center",fontSize:[1,"15px"]},"By executing this transaction you can adjust the IDLE distribution speed among the pools."),h.a.createElement(W.a,Object.assign({action:"Refresh",Component:f.c,parentProps:{mt:1},componentProps:{size:"small",mainColor:"blue",value:"REFRESH IDLE SPEED"},params:[],contractName:"IdleController",methodName:"refreshIdleSpeeds"},this.props),h.a.createElement(f.h,{flexDirection:"row",alignItems:"center",justifyContent:"center"},h.a.createElement(f.k,{mr:1,name:"Done",size:"1.4em",color:this.props.theme.colors.transactions.status.completed}),h.a.createElement(f.u,{fontWeight:500,fontSize:"15px",color:"copyColor",textAlign:"center"},"Idle Speed Refreshed"))))))}}]),t}(p.Component),q=n(171),J=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).functionsUtil=null,n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.selectedSubsection&&this.props.selectedSubsection.subComponent?this.props.selectedSubsection.subComponent:null,n="custom"===this.props.connectorName,a="undefined"===typeof this.props.showBreadCrumb||this.props.showBreadCrumb;return h.a.createElement(f.h,{width:1,flexDirection:"column"},this.props.selectedSubsection?h.a.createElement(f.b,{width:1},a&&h.a.createElement(f.h,{width:1},h.a.createElement(P.a,Object.assign({},this.props,{showPathMobile:!0,isMobile:this.props.isMobile,path:[this.props.selectedSubsection.label],text:this.props.selectedSection.label.toUpperCase(),handleClick:function(t){return e.props.goToSection(e.props.selectedSection.route)}}))),h.a.createElement(f.h,{my:[2,3],flexDirection:"column",justifyContent:"center"},h.a.createElement(v.a,{mb:2},this.props.selectedSubsection.label),h.a.createElement(f.u,{textAlign:"center",dangerouslySetInnerHTML:{__html:this.props.selectedSubsection.desc}})),h.a.createElement(t,Object.assign({},this.props,this.props.selectedSubsection.directProps,{toolProps:this.props.selectedSubsection.props}))):h.a.createElement(f.h,{my:[2,3],flexDirection:"column",justifyContent:"center"},h.a.createElement(v.a,{mb:3},"Tools"),h.a.createElement(f.h,{width:1,style:{flexWrap:"wrap"},justifyContent:n?"center":"flex-start"},n?h.a.createElement(q.a,{cardProps:{maxWidth:[1,"35em"]},icon:"Visibility",text:'You are using Idle in "Read-Only" mode.<br />Logout and connect with your wallet to interact.'}):this.props.selectedSection.submenu.map(function(t,n){return h.a.createElement(E.a,{isInteractive:!0,key:"tool_".concat(n),cardProps:{p:[3,4],mb:[3,3],mr:[0,"2%"],style:{flex:e.props.isMobile?"1 1 100%":"0 0 31%"},alignItems:"center",flexDirection:"column",justifyContent:"center"},handleClick:function(n){return e.props.goToSection(e.props.selectedSection.route+"/"+t.route)}},h.a.createElement(f.u,{fontSize:[3,4],textAlign:"center"},t.label),h.a.createElement(f.h,{justifyContent:"center"},t.image?h.a.createElement(f.l,{my:[0,2],height:"2.2em",src:t.image}):t.icon&&h.a.createElement(f.k,{my:[0,2],size:"3em",name:t.icon})),h.a.createElement(f.u,{fontSize:[2,2],textAlign:"center",dangerouslySetInnerHTML:{__html:t.desc}}))}))))}}]),t}(p.Component),X=n(26),K=n(288),$=n(92),Z=n(1292),Q=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={aggregatedValues:[],govTokensTotalApr:null,govTokensUserBalance:null,govTokensDistribution:null,govTokensTotalBalance:null,govTokensTotalAprTooltip:null,idleTokenUserDistribution:null,govTokensDistributionTooltip:null,govTokensTotalBalanceTooltip:null},n.functionsUtil=null,n.idleGovToken=null,n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props),this.idleGovToken=this.functionsUtil.getIdleGovToken()}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,d,m,g,b=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t={})[this.props.selectedToken]=this.props.tokenConfig,n="risk"===this.props.selectedStrategy,e.next=5,Promise.all([this.idleGovToken.getUserDistribution(this.props.account,t,!0),this.functionsUtil.getGovTokensUserBalances(this.props.account,t,null),this.functionsUtil.loadAssetField("apy",this.props.selectedToken,this.props.tokenConfig,this.props.account,!1),this.functionsUtil.loadAssetField("depositTimestamp",this.props.selectedToken,this.props.tokenConfig,this.props.account),this.functionsUtil.loadAssetField("daysFirstDeposit",this.props.selectedToken,this.props.tokenConfig,this.props.account)]);case 5:return a=e.sent,i=Object(X.a)(a,5),s=i[0],r=i[1],l=i[2],c=i[3],u=i[4],e.next=14,this.functionsUtil.getAvgAPYStats(this.props.tokenConfig.address,n,c);case 14:(p=e.sent)&&!this.functionsUtil.BNify(p).lte(0)||(p=l),d=r?Object.values(r).reduce(function(e,t){return e.plus(b.functionsUtil.BNify(t))},this.functionsUtil.BNify(0)):null,m=r?Object.keys(r).map(function(e){var t=r[e];return t.gt(0)?"+".concat(t.toFixed(2)," ").concat(e):null}).filter(function(e){return null!==e}):null,g=[{flexProps:{width:[1,.32]},props:{title:"Avg APY",desc:this.functionsUtil.getGlobalConfig(["messages","apyLong"]),children:h.a.createElement(f.h,{width:1,alignItems:"center",height:["55px","59px"],flexDirection:"column",justifyContent:"center"},h.a.createElement(f.u,{lineHeight:1,fontWeight:[3,4],color:"copyColor",fontFamily:"counter",fontSize:["1.7em","1.7em"],dangerouslySetInnerHTML:{__html:p?p.toFixed(2)+"%":"0.00%"}}))}},{flexProps:{width:[1,.32]},props:{title:"Current Allocation",children:h.a.createElement(f.h,{width:1,id:"allocationChart",height:["55px","59px"],flexDirection:"column"},h.a.createElement($.a,Object.assign({},this.props,{showLoader:!0,fieldInfo:{name:"allocationChart"},parentId:"allocationChart",token:this.props.selectedToken,tokenConfig:this.props.tokenConfig}))),label:""}},{flexProps:{width:[1,.32]},props:{title:"Days since first deposit",children:h.a.createElement(f.h,{width:1,alignItems:"center",height:["55px","59px"],flexDirection:"column",justifyContent:"center"},h.a.createElement(f.u,{lineHeight:1,fontWeight:[3,4],color:"copyColor",fontFamily:"counter",fontSize:["1.7em","1.7em"],dangerouslySetInnerHTML:{__html:u?parseInt(u):"-"}}))}}],this.setState({aggregatedValues:g,govTokensUserBalance:r,govTokensTotalBalance:d,idleTokenUserDistribution:s,govTokensTotalBalanceTooltip:m});case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return h.a.createElement(f.h,{width:1,flexDirection:"column"},this.state.aggregatedValues.length>0&&h.a.createElement(f.h,{width:1,mb:[0,3],mt:[2,0],alignItems:"center",flexDirection:["column","row"],justifyContent:"space-between"},this.state.aggregatedValues.map(function(e,t){return h.a.createElement(f.h,Object.assign({},e.flexProps,{flexDirection:"column",key:"aggregatedValue_".concat(t)}),h.a.createElement(E.a,{cardProps:{py:[2,3],mb:[3,0]}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},e.props.children?e.props.children:h.a.createElement(f.u,{lineHeight:1,fontWeight:[3,4],color:"copyColor",fontFamily:"counter",fontSize:[4,"1.7em"],dangerouslySetInnerHTML:{__html:e.props.value}}),h.a.createElement(f.h,{mt:2,width:1,alignItems:"center",justifyContent:"center"},h.a.createElement(f.u,{fontWeight:2,fontSize:[1,2],color:"cellText"},e.props.title),e.props.desc&&h.a.createElement(f.y,{placement:"bottom",message:e.props.desc},h.a.createElement(f.k,{ml:2,name:"Info",size:"1em",color:"cellTitle"}))))))})),h.a.createElement(E.a,{cardProps:{px:2,py:3}},h.a.createElement(f.h,{width:1,ml:[0,3],id:"funds-overview"},h.a.createElement(Z.a,Object.assign({},this.props,{chartHeight:350,parentId:"funds-overview",chartToken:this.props.selectedToken,enabledTokens:[this.props.selectedToken],frequencySeconds:this.functionsUtil.getFrequencySeconds("day",1)}))),h.a.createElement(f.h,{width:1,flexDirection:["column","row"]},h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Deposited"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"amountLent",props:{decimals:4,maxPrecision:8,fontWeight:300,fontSize:["1.8em","1.9em"],color:this.props.theme.colors.counter,flexProps:{justifyContent:"center"}}}}))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Redeemable"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"redeemableBalanceCounter",props:{decimals:7,maxPrecision:8,style:{fontWeight:300,color:this.props.theme.colors.counter,fontSize:this.props.isMobile?"1.8em":"1.9em"},flexProps:{justifyContent:"center"}}}})),h.a.createElement(f.h,{width:1,mt:"-9px"},h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"earningsPerc",props:{fontSize:1,fontWeight:2,color:"cellText",flexProps:{justifyContent:"center"}}}})))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Earnings"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"earningsCounter",props:{decimals:7,maxPrecision:8,style:{fontWeight:300,fontSize:this.props.isMobile?"1.8em":"1.9em",color:this.props.theme.colors.counter},flexProps:{justifyContent:"center"}}}})),this.state.govTokensTotalBalanceTooltip&&this.state.govTokensTotalBalanceTooltip.length>0&&h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},this.state.govTokensTotalBalanceTooltip.map(function(e,t){return h.a.createElement(f.u,{fontSize:1,lineHeight:1,fontWeight:2,color:"cellText",textAlign:"center",mt:t?1:0,key:"govToken_".concat(t)},e)}))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Fees"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"feesCounter",props:{decimals:7,maxPrecision:8,style:{fontWeight:300,fontSize:this.props.isMobile?"1.8em":"1.9em",color:this.props.theme.colors.counter},flexProps:{justifyContent:"center"}}}}))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Current APY"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"apy",props:{decimals:2,fontWeight:300,fontSize:["1.8em","1.9em"],color:this.props.theme.colors.counter,flexProps:{justifyContent:"center"}}}})),this.state.idleTokenUserDistribution&&h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.u,{mt:1,fontSize:1,lineHeight:1,fontWeight:2,color:"cellText",textAlign:"center"},this.state.idleTokenUserDistribution.toFixed(4)," ",this.idleGovToken.tokenName,"/",this.idleGovToken.tokenConfig.distributionFrequency))))))}}]),t}(p.Component),ee=n(87),te=n(74),ne=n(492),ae=n(490),oe=n(361),ie=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={processing:{txHash:null,loading:!1},inputValue:null,maxSlippage:.2,tokenConfig:null,unevenAmounts:null,selectedToken:null,availableTokens:null,buttonDisabled:!1,showMaxSlippage:!1,redeemUnderlying:!0,curveTokenConfig:null,curvePoolContract:null,curveSwapContract:null,curveTokenBalance:null,curveTokensAmounts:null,fastBalanceSelector:null,redeemUnevenAmounts:!1,curveRedeemableIdleTokens:null},n.functionsUtil=null,n.toggleUnevenAmounts=function(e){n.setState({redeemUnevenAmounts:e})},n.checkButtonDisabled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=n.state.inputValue);var t;t=!e||e.gt(n.state.curveTokenBalance),n.setState({buttonDisabled:t})},n.changeInputValue=function(e){var t=e.target.value.length&&!isNaN(e.target.value)?n.functionsUtil.BNify(e.target.value):n.functionsUtil.BNify(0);n.checkButtonDisabled(t);n.setState(function(e){return{inputValue:t,fastBalanceSelector:null}})},n.setFastBalanceSelector=function(e){n.setState({fastBalanceSelector:e})},n.setMaxSlippage=function(e){n.setState({maxSlippage:e})},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUtils(),e.next=3,this.initToken();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showMaxSlippage",value:function(){this.setState({showMaxSlippage:!0})}},{key:"calculateSlippage",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:null,(n=this.state.inputValue?this.functionsUtil.BNify(this.state.inputValue):null)&&!n.lte(0)){e.next=4;break}return e.abrupt("return",!1);case 4:if(a=this.functionsUtil.normalizeTokenAmount(n,this.state.curvePoolContract.decimals),i=null,s=null,r=null,!this.state.redeemUnevenAmounts){e.next=20;break}return e.next=11,Promise.all([this.functionsUtil.getCurveTokensAmounts(this.props.account,a,!0),this.functionsUtil.getCurveIdleTokensAmounts(this.props.account,a)]);case 11:return l=e.sent,c=Object(X.a)(l,2),s=c[0],r=c[1],e.next=17,this.functionsUtil.getCurveSlippage(this.state.tokenConfig.idle.token,a,!1,r);case 17:i=e.sent,e.next=29;break;case 20:return e.next=22,this.functionsUtil.getCurveSlippage(this.state.tokenConfig.idle.token,a,!1);case 22:return i=e.sent,e.next=25,this.functionsUtil.getCurveTokenPrice();case 25:u=e.sent,p=n.times(u).minus(n.times(i.times(100).plus(this.state.maxSlippage||this.functionsUtil.BNify(0)).div(100))),(s={})[this.state.selectedToken]=p;case 29:return i&&(i=i.times(100)),this.setState({withdrawSlippage:i,curveTokensAmounts:s,curveIdleTokensAmounts:r}),i&&t&&(i=i.plus(t)),e.abrupt("return",i);case 33:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadUtils(),!(t.tokenConfig.idle.token!==this.props.tokenConfig.idle.token)){e.next=5;break}return e.next=5,this.initToken();case 5:a=n.redeemUnevenAmounts!==this.state.redeemUnevenAmounts,(this.state.fastBalanceSelector!==n.fastBalanceSelector||a)&&this.setInputValue(),i=n.inputValue!==this.state.inputValue,s=parseFloat(n.maxSlippage)!==parseFloat(this.state.maxSlippage),r=JSON.stringify(n.tokenConfig)!==JSON.stringify(this.state.tokenConfig),(i||r||s)&&this.calculateSlippage(),n.selectedToken!==this.state.selectedToken&&this.loadSelectedTokenConfig();case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setInputValue",value:function(){if(null===this.state.fastBalanceSelector)return!1;var e,t=this.functionsUtil.BNify(this.state.fastBalanceSelector).div(100);e=this.state.curveTokenBalance?this.functionsUtil.BNify(this.state.curveTokenBalance).times(t):null,this.checkButtonDisabled(e),this.setState({inputValue:e})}},{key:"selectDestinationToken",value:function(e){this.setState({selectedToken:e})}},{key:"loadSelectedTokenConfig",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.functionsUtil.getGlobalConfig(["curve"]),n=this.state.availableTokens[this.state.selectedToken],a=t.availableTokens[n.idle.token],this.setState({tokenConfig:n,curveTokenConfig:a});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initToken",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h,d,m;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.functionsUtil.getCurvePoolContract(),this.functionsUtil.getCurveSwapContract()]);case 2:return t=e.sent,n=Object(X.a)(t,2),a=n[0],i=n[1],e.next=8,Promise.all([this.functionsUtil.getCurveTokenPrice(),this.functionsUtil.getCurveTokenBalance(this.props.account),this.functionsUtil.getCurveRedeemableIdleTokens(this.props.account)]);case 8:s=e.sent,r=Object(X.a)(s,3),l=r[0],c=r[1],u=r[2],p=[],h=c?c.times(l):this.functionsUtil.BNify(0),d=this.functionsUtil.getCurveAvailableTokens(),m=Object.keys(d)[0],this.setState({selectedToken:m,unevenAmounts:p,curveTokenPrice:l,availableTokens:d,curvePoolContract:a,curveSwapContract:i,curveTokenBalance:c,redeemableBalance:h,curveRedeemableIdleTokens:u});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"redeem",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h,d=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.curveTokenBalance){e.next=2;break}return e.abrupt("return",!1);case 2:return t=function(e,t){var n="success"===e.status,a={eventLabel:e.status,eventCategory:"CurveRedeem",eventAction:d.props.selectedToken,eventValue:d.state.curveTokenBalance.toFixed()};t&&(a.eventLabel=d.functionsUtil.getTransactionError(t)),(t||"error"!==a.status)&&d.functionsUtil.sendGoogleAnalyticsEvent(a),d.setState(function(e){return{processing:{txHash:null,loading:!1}}}),"function"===typeof d.props.callbackRedeem&&n&&d.props.callbackRedeem(e)},n=function(e){var t=e.transactionHash;d.setState(function(e){return{processing:Object(x.a)({},e.processing,{txHash:t})}})},a=this.state.curveSwapContract.name,e.next=7,this.calculateSlippage(this.state.maxSlippage);case 7:if(i=e.sent,s=this.functionsUtil.BNify(this.state.maxSlippage).div(100),r=this.state.inputValue?this.functionsUtil.BNify(this.state.inputValue):null,l=this.functionsUtil.normalizeTokenAmount(r,this.state.curvePoolContract.decimals),!this.state.redeemUnevenAmounts){e.next=26;break}if(!this.state.redeemUnderlying){e.next=18;break}return e.next=15,this.functionsUtil.getCurveTokensAmounts(this.props.account,l,!1,!0);case 15:e.t0=e.sent,e.next=21;break;case 18:return e.next=20,this.functionsUtil.getCurveIdleTokensAmounts(this.props.account,l,s);case 20:e.t0=e.sent;case 21:c=e.t0,console.log("remove_liquidity",l.toString(),c),this.props.contractMethodSendWrapper(a,"remove_liquidity",[l,c,this.state.redeemUnderlying],null,t,n),e.next=33;break;case 26:return u=this.state.curveTokenConfig.migrationParams.coinIndex,e.next=29,this.functionsUtil.getCurveTokenPrice();case 29:p=e.sent,h=this.functionsUtil.normalizeTokenAmount(r.times(p).minus(r.times(i.div(100))),this.state.tokenConfig.decimals),console.log("remove_liquidity_one_coin",l,u,h),this.props.contractMethodSendWrapper(a,"remove_liquidity_one_coin",[l,u,h,this.state.redeemUnderlying],null,t,n);case 33:this.setState(function(e){return{processing:Object(x.a)({},e.processing,{loading:!0})}});case 34:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancelTransaction",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getFastBalanceSelector",value:function(){return null!==this.state.fastBalanceSelector&&this.functionsUtil.BNify(this.state.fastBalanceSelector).div(100)}},{key:"render",value:function(){var e=this,t=!this.state.buttonDisabled&&this.state.withdrawSlippage,n=this.functionsUtil.getGlobalConfig(["curve","poolContract","token"]);return h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.h,{width:[1,.36],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},this.state.curveTokenBalance?this.state.processing.loading?h.a.createElement(E.a,{cardProps:{p:3,mt:3}},h.a.createElement(f.h,{flexDirection:"column"},h.a.createElement(D.a,{web3:this.props.web3,hash:this.state.processing.txHash,endMessage:"Finalizing redeem request...",cancelTransaction:this.cancelTransaction.bind(this),waitText:this.props.waitText?this.props.waitText:"Redeem estimated in"}))):h.a.createElement(f.h,{width:1,flexDirection:"column"},h.a.createElement(E.a,{cardProps:{p:3,mb:2}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"1.8em",color:"cellText",name:"FileUpload"}),h.a.createElement(f.u,{mt:1,fontSize:2,color:"cellText",textAlign:"center"},"Withdraw from the Curve Pool in a specific token or in uneven amounts of tokens (with no slippage)."),h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row"},h.a.createElement(f.e,{required:!1,label:"Redeem with no slippage",checked:this.state.redeemUnevenAmounts,onChange:function(t){return e.toggleUnevenAmounts(t.target.checked)}}),h.a.createElement(f.y,{placement:"top",message:"You will receive an uneven amounts of ".concat(Object.keys(this.state.availableTokens).join(", ")," proportional to the token availailability in the Curve pool.")},h.a.createElement(f.k,{size:"1em",color:"cellTitle",name:"InfoOutline"}))))),!this.state.redeemUnevenAmounts&&h.a.createElement(f.b,{mb:2,width:1},this.state.tokenConfig&&h.a.createElement(f.b,{width:1},h.a.createElement(f.u,{mb:1},"Select destination token:"),h.a.createElement(F.a,Object.assign({},this.props,{id:"token-from",showBalance:!1,tokenConfig:this.state.tokenConfig,selectedToken:this.state.selectedToken,availableTokens:this.state.availableTokens,onChange:this.selectDestinationToken.bind(this)})))),this.state.curveTokensAmounts&&!this.state.buttonDisabled&&h.a.createElement(E.a,{cardProps:{mt:1,mb:2,py:2,px:1}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.u,{mt:1,fontSize:2,color:"cellText",textAlign:"center"},"You will receive:"),h.a.createElement(f.h,{mt:2,width:1,boxShadow:0,style:{flexWrap:"wrap"},alignItems:"center",justifyContent:"center"},Object.keys(this.state.curveTokensAmounts).map(function(t){var n=e.state.curveTokensAmounts[t];return h.a.createElement(f.h,{mb:1,mx:1,width:"auto",flexDirection:"row",key:"tokenBalance_".concat(t),justifyContent:"flex-start"},h.a.createElement($.a,{token:t,tokenConfig:{token:t},fieldInfo:{name:"icon",props:{mr:1,width:["1.4em","1.6em"],height:["1.4em","1.6em"]}}}),h.a.createElement(B.a,{ml:1,fontSize:[0,1],fontWeight:500,maxPrecision:4,color:"cellText",number:n.toString()}))})))),this.state.showMaxSlippage&&t&&h.a.createElement(f.b,{mb:2,width:1},h.a.createElement(f.h,{alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,null,"Choose max slippage:"),h.a.createElement(f.y,{placement:"top",message:"Max additional slippage on top of the one shown below"},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"}))),h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},[.2,.5,1,5].map(function(t){return h.a.createElement(oe.a,{cardProps:{p:1},textProps:{fontSize:1},percentage:t,key:"selector_".concat(t),onMouseDown:function(){return e.setMaxSlippage(t)},isActive:e.state.maxSlippage===parseFloat(t)})}))),h.a.createElement(f.h,{mb:3,width:1,flexDirection:"column"},h.a.createElement(f.h,{mb:1,alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},t&&h.a.createElement(f.h,{width:1,maxWidth:"40%",alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,{fontSize:1,fontWeight:3,textAlign:"right",style:{whiteSpace:"nowrap"},color:parseFloat(this.state.withdrawSlippage.toFixed(3))>0?this.props.theme.colors.transactions.status.failed:this.props.theme.colors.transactions.status.completed},0===parseFloat(this.state.withdrawSlippage.toFixed(3))?"No Slippage":"".concat(this.state.withdrawSlippage.gt(0)?"Slippage: ":"Bonus: "," ").concat(this.state.withdrawSlippage.abs().toFixed(3),"%")),h.a.createElement(f.y,{placement:"top",message:this.state.redeemUnevenAmounts?"You will receive an uneven amounts of ".concat(Object.keys(this.state.availableTokens).join(", ")," proportional to the token availailability in the Curve pool."):this.state.withdrawSlippage.gt(0)?"Slippage comes from depositing too many coins not in balance, and current coin prices are additionally accounted for":"Bonus comes as an advantage from current coin prices which usually appears for coins which are high in balance"},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"})),!this.state.redeemUnevenAmounts&&h.a.createElement(f.n,{ml:1,color:"copyColor",hoverColor:"primary",onClick:this.showMaxSlippage.bind(this)},"change")),h.a.createElement(f.h,{width:1,maxWidth:"60%",alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},h.a.createElement(f.n,{fontSize:1,fontWeight:3,color:"dark-gray",textAlign:"right",hoverColor:"copyColor",onClick:function(t){return e.setFastBalanceSelector(100)},style:{maxWidth:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},this.state.curveTokenBalance.toFixed(this.props.isMobile?2:4)," ",n))),h.a.createElement(f.m,{min:0,type:"number",required:!0,height:"3.4em",borderRadius:2,fontWeight:500,boxShadow:"none !important",placeholder:"Insert amount",onChange:this.changeInputValue.bind(this),border:"1px solid ".concat(this.props.theme.colors.divider),value:null!==this.state.inputValue?this.functionsUtil.BNify(this.state.inputValue).toFixed():""}),h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},[25,50,75,100].map(function(t){return h.a.createElement(oe.a,{percentage:t,key:"selector_".concat(t),onMouseDown:function(){return e.setFastBalanceSelector(t)},isActive:e.state.fastBalanceSelector===parseInt(t)})}))),h.a.createElement(f.h,{justifyContent:"center"},h.a.createElement(j.a,{buttonProps:{mt:2,width:[1,.5],disabled:this.state.buttonDisabled},handleClick:this.redeem.bind(this)},"Redeem"))):h.a.createElement(E.a,{cardProps:{p:3,mt:3,minHeight:"195px",style:{display:"flex",alignItems:"center",justifyContent:"center"}}},h.a.createElement(d.a,{flexProps:{flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Checking Curve Pool..."}))))}}]),t}(p.Component),se=n(784),re=n(119),le=n(257),ce=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={txError:{},tokenAPY:"-",inputValue:{},processing:{},curveAPY:null,totalAUM:null,canRedeem:!1,maxSlippage:.2,canDeposit:!1,action:"deposit",directMint:!1,activeModal:null,tokenGovTokens:{},showBuyFlow:!1,maxUnlentPerc:null,unlentBalance:null,tokenApproved:!1,skipMigration:!1,redeemSkipGov:!1,showRedeemFlow:!1,contractPaused:!1,buttonDisabled:!1,canRedeemCurve:!1,erc20ForwarderTx:null,signedParameters:null,minAmountForMint:null,showMaxSlippage:!1,redeemGovTokens:!1,canDepositCurve:!1,redeemSkipGovTokens:[],fastBalanceSelector:{},actionProxyContract:{},migrationEnabled:!1,componentMounted:!1,curveTokenBalance:null,agreeSkipGovTokens:!1,redeemCurveEnabled:!1,depositCurveBalance:null,depositCurveEnabled:!0,showAdvancedOptions:!1,skipGovTokensGasSave:null,depositCurveSlippage:null,erc20ForwarderContract:{},erc20ForwarderEnabled:!1,showETHWrapperEnabled:!1,skipGovTokensGasSaveUSD:null,metaTransactionsEnabled:!0,skippedGovTokensBalance:null,minAmountForMintReached:!1,loadingErc20ForwarderTx:!1},n.functionsUtil=null,n.setShowRedeemFlow=function(e){n.setState({showRedeemFlow:e})},n.setShowBuyFlow=function(e){n.setState({showBuyFlow:e})},n.toggleShowAdvancedOptions=function(e){n.setState(function(e){return{showAdvancedOptions:!e.showAdvancedOptions}})},n.toggleSkipMigration=function(e){n.setState({skipMigration:e})},n.toggleRedeemCurve=function(e){n.setState({redeemCurveEnabled:e})},n.toggleDepositCurve=function(e){n.setState({depositCurveEnabled:e})},n.toggleShowETHWrapper=function(e){n.setState({showETHWrapperEnabled:e})},n.toggleAgreeSkipGovTokens=function(e){n.setState({agreeSkipGovTokens:e})},n.toggleSkipMint=function(e){n.setState({directMint:e})},n.toggleRedeemGovTokens=function(e){n.setState({redeemGovTokens:e,redeemSkipGovTokens:[],agreeSkipGovTokens:!1,skippedGovTokensBalance:n.functionsUtil.BNify(0),redeemSkipGov:!e&&n.state.redeemSkipGov})},n.toggleRedeemSkipGov=function(e){n.setState({redeemSkipGov:e,redeemSkipGovTokens:[],agreeSkipGovTokens:!1,skippedGovTokensBalance:n.functionsUtil.BNify(0),redeemGovTokens:!e&&n.state.redeemGovTokens})},n.getSkippedGovTokensFlags=Object(i.a)(o.a.mark(function e(){var t,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.functionsUtil.getGovTokensIndexes(n.props.account,n.props.tokenConfig);case 2:return t=e.sent,a=Object.keys(t).map(function(e){return n.state.redeemSkipGovTokens.includes(e)}),e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)})),n.calculateSkippedGovTokens=Object(i.a)(o.a.mark(function e(){var t,a,s,r,l,c,u,p,h,d,m;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.functionsUtil.BNify(0),a=n.functionsUtil.getGlobalConfig(["stats","tokens","DAI"]),e.next=4,n.functionsUtil.asyncForEach(n.state.redeemSkipGovTokens,function(){var e=Object(i.a)(o.a.mark(function e(i){var s,r,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.functionsUtil.getGlobalConfig(["govTokens",i]),e.next=3,n.functionsUtil.getUniswapConversionRate(a,s);case 3:r=e.sent,l=n.props.govTokensUserBalances[i].times(r),t=t.plus(l);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.next=6,n.getSkippedGovTokensFlags();case 6:return s=e.sent,r=n.functionsUtil.getGlobalConfig(["stats","tokens","WETH"]),e.next=10,Promise.all([n.functionsUtil.getUniswapConversionRate(a,r),n.functionsUtil.estimateMethodGasUsage(n.props.tokenConfig.idle.token,"redeemIdleToken",[n.functionsUtil.normalizeTokenAmount(n.props.idleTokenBalance,n.props.tokenConfig.decimals)],n.props.account),n.functionsUtil.estimateMethodGasUsage(n.props.tokenConfig.idle.token,"redeemIdleTokenSkipGov",[n.functionsUtil.normalizeTokenAmount(n.props.idleTokenBalance,n.props.tokenConfig.decimals),s],n.props.account)]);case 10:return l=e.sent,c=Object(X.a)(l,3),u=c[0],p=c[1],h=c[2],d=p&&h?p.minus(h):n.functionsUtil.BNify(0),m=d?d.times(u):n.functionsUtil.BNify(0),n.setState({skipGovTokensGasSave:d,skipGovTokensGasSaveUSD:m,skippedGovTokensBalance:t}),e.abrupt("return",t);case 19:case"end":return e.stop()}},e,this)})),n.setRedeemSkipGovTokens=function(e,t){n.setState(function(n){var a=Object.assign([],n.redeemSkipGovTokens);return!t&&a.includes(e)?a.splice(a.indexOf(e),1):t&&!a.includes(e)&&a.push(e),{redeemSkipGovTokens:a}},function(){n.calculateSkippedGovTokens()})},n.toggleErc20ForwarderEnabled=function(e){var t={erc20ForwarderEnabled:e};n.setState(t,function(){n.cancelTransaction()})},n.toggleMetaTransactionsEnabled=function(e){n.setState({metaTransactionsEnabled:e})},n.resetModal=function(){n.setState({activeModal:null})},n.setActiveModal=function(e){n.setState({activeModal:e})},n.checkUseProxyContract=function(){var e=n.state.actionProxyContract[n.state.action],t=n.functionsUtil.getGlobalConfig(["contract","methods","deposit","erc20ForwarderEnabled"])&&n.state.erc20ForwarderEnabled,a=n.functionsUtil.getGlobalConfig(["contract","methods","deposit","metaTransactionsEnabled"])&&n.state.metaTransactionsEnabled;return(t||a)&&e&&n.props.biconomy},n.approveContract=function(){var e=Object(i.a)(o.a.mark(function e(t,a){var i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.state.depositCurveEnabled?(i=n.functionsUtil.getGlobalConfig(["curve","depositContract"]),n.functionsUtil.enableERC20(n.props.selectedToken,i.address,t,a)):n.checkUseProxyContract()?(s=n.state.actionProxyContract[n.state.action],n.functionsUtil.enableERC20(n.props.selectedToken,s.address,t,a)):n.functionsUtil.enableERC20(n.props.selectedToken,n.props.tokenConfig.idle.address,t,a);case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.checkTokenApproved=Object(i.a)(o.a.mark(function e(){var t,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!n.state.depositCurveEnabled){e.next=8;break}return a=n.functionsUtil.getGlobalConfig(["curve","depositContract"]),e.next=5,n.functionsUtil.checkTokenApproved(n.props.selectedToken,a.address,n.props.account);case 5:t=e.sent,e.next=24;break;case 8:if(!n.checkUseProxyContract()){e.next=21;break}if(!(n.functionsUtil.getGlobalConfig(["contract","methods","deposit","erc20ForwarderEnabled"])&&n.state.erc20ForwarderEnabled)){e.next=15;break}if(!n.functionsUtil.getGlobalConfig(["permit",n.props.selectedToken])){e.next=15;break}return e.abrupt("return",!0);case 15:return i=n.state.actionProxyContract[n.state.action],e.next=18,n.functionsUtil.checkTokenApproved(n.props.selectedToken,i.address,n.props.account);case 18:t=e.sent,e.next=24;break;case 21:return e.next=23,n.functionsUtil.checkTokenApproved(n.props.selectedToken,n.props.tokenConfig.idle.address,n.props.account);case 23:t=e.sent;case 24:return e.abrupt("return",t);case 25:case"end":return e.stop()}},e,this)})),n.approveToken=Object(i.a)(o.a.mark(function e(){var t,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.checkTokenApproved();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",n.setState(function(e){return{tokenApproved:t,processing:Object(x.a)({},e.processing,{approve:{txHash:null,loading:!1}})}}));case 5:a=function(e,t){var a={eventCategory:"Approve",eventAction:n.props.selectedToken,eventLabel:e.status};t&&(a.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==a.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(a),n.setState(function(t){return{tokenApproved:"success"===e.status,processing:Object(x.a)({},t.processing,{approve:{txHash:null,loading:!1}})}})},i=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,{approve:Object(x.a)({},e.processing.approve,{txHash:t})})}})},n.approveContract(a,i),n.setState(function(e){return{processing:Object(x.a)({},e.processing,{approve:{txHash:null,loading:!0}})}});case 9:case"end":return e.stop()}},e,this)})),n.loadTokenInfo=Object(i.a)(o.a.mark(function e(){var t,a,i,s,r,l,c,u,p,h,d,m,f,g,b,k,v,y,w,T,C;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.state.componentMounted&&n.setState({componentMounted:!1}),t=n.functionsUtil.getGlobalConfig(["curve"]),a=n.functionsUtil.getGlobalConfig(["curve","availableTokens",n.props.tokenConfig.idle.token]),i=t.enabled&&a&&a.enabled,e.next=6,Promise.all([n.checkTokenApproved(),n.functionsUtil.checkContractPaused(),n.functionsUtil.getCurveSwapContract(),n.functionsUtil.getCurveDepositContract(),n.functionsUtil.getUnlentBalance(n.props.tokenConfig),n.functionsUtil.checkMigration(n.props.tokenConfig,n.props.account),i?n.functionsUtil.getCurveTokenBalance(n.props.account):null]);case 6:s=e.sent,r=Object(X.a)(s,7),l=r[0],c=r[1],u=r[2],p=r[3],h=r[4],d=r[5].migrationEnabled,m=r[6],f=n.props.tokenBalance&&n.functionsUtil.BNify(n.props.tokenBalance).gt(0),g=n.props.idleTokenBalance&&n.functionsUtil.BNify(n.props.idleTokenBalance).gt(0),k=b=i&&f,v="WETH"===n.props.selectedToken&&(n.state.showETHWrapperEnabled||!f),y=i&&m&&m.gt(0),w=y,T=n.functionsUtil.getTokenGovTokens(n.props.tokenConfig),(C=Object(x.a)({},n.state)).depositCurveEnabled&&!i&&(C.depositCurveEnabled=!1),C.canRedeem=g,C.canDeposit=f,C.unlentBalance=h,C.tokenApproved=l,C.tokenGovTokens=T,C.contractPaused=c,C.canRedeemCurve=y,C.canDepositCurve=b,C.migrationEnabled=d,C.curveTokenBalance=m,C.curveSwapContract=u,C.redeemCurveEnabled=w,C.depositCurveEnabled=k,C.curveDepositContract=p,C.showETHWrapperEnabled=v,C.txError={redeem:!1,deposit:!1},C.processing={redeem:{txHash:null,loading:!1},deposit:{txHash:null,loading:!1},approve:{txHash:null,loading:!1},boost:{txHash:null,loading:!1}},C.inputValue={boost:null,redeem:null,deposit:null},C.fastBalanceSelector={boost:null,redeem:null,deposit:null},C.componentMounted=!0,n.setState(C,function(){n.checkAction(),n.loadAPY()});case 46:case"end":return e.stop()}},e,this)})),n.cancelTransaction=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState(function(e){return{erc20ForwarderTx:null,loadingErc20ForwarderTx:!1,processing:Object(x.a)({},e.processing,Object(te.a)({approve:{txHash:null,loading:!1}},n.state.action,{txHash:null,loading:!1}))}});case 1:case"end":return e.stop()}},e,this)})),n.executeAction=Object(i.a)(o.a.mark(function e(){var t,a,s,r,l,c,u,p,h,d,m,f,g,b,k,v,y,w,T,C,E,S,U,M,j,D,O,A,I,P,B,F,z,Y,G,N;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,a=n.state.redeemGovTokens,s=n.getFastBalanceSelector(),r=n.state.inputValue[n.state.action],l=n.state.redeemSkipGov&&n.state.redeemSkipGovTokens.length>0&&n.state.agreeSkipGovTokens,c=n.functionsUtil.getGlobalConfig(["contract","methods","deposit","erc20ForwarderEnabled"])&&n.state.erc20ForwarderEnabled,u=n.functionsUtil.getGlobalConfig(["contract","methods","deposit","metaTransactionsEnabled"])&&n.state.metaTransactionsEnabled,p=!0,e.t0=n.state.action,e.next="deposit"===e.t0?11:"redeem"===e.t0?62:100;break;case 11:if(!n.state.buttonDisabled&&r&&!n.functionsUtil.BNify(r).lte(0)){e.next=13;break}return e.abrupt("return",!1);case 13:if(n.state.tokenApproved){e.next=15;break}return e.abrupt("return",n.approveToken());case 15:if(localStorage&&n.functionsUtil.setLocalStorage("redirectToFundsAfterLogged",0),n.setState({lendingProcessing:n.props.account,lendAmount:"",genericError:""}),h=function(e,t){!e&&t&&(e={status:"error"});var a="error"===e.status,o="success"===e.status,i={eventCategory:"Deposit",eventAction:n.props.selectedToken,eventLabel:e.status,eventValue:parseInt(r)};t&&(i.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==i.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(i),n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,{txHash:null,loading:!1}))}}),o?n.setState(function(e){return{activeModal:"share",inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,n.functionsUtil.BNify(0)))}}):(n.state.metaTransactionsEnabled||n.state.erc20ForwarderEnabled)&&a&&n.setState({erc20ForwarderTx:null,loadingErc20ForwarderTx:!1,txError:Object(te.a)({},n.state.action,!0)})},d=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,Object(x.a)({},e.processing[n.state.action],{txHash:t})))}})},m=n.functionsUtil.getGlobalConfig(["curve"]),!(m.enabled&&n.functionsUtil.getGlobalConfig(["curve","availableTokens",n.props.tokenConfig.idle.token,"enabled"]))||!n.state.depositCurveEnabled){e.next=37;break}return f=n.functionsUtil.getGlobalConfig(["curve","poolContract"]),g=n.functionsUtil.normalizeTokenAmount(r,f.decimals),e.next=26,n.functionsUtil.getCurveAmounts(n.props.tokenConfig.idle.token,g);case 26:return b=e.sent,e.next=29,n.functionsUtil.getCurveTokenAmount(b);case 29:return k=e.sent,n.state.maxSlippage&&(k=(k=n.functionsUtil.BNify(k)).minus(k.times(n.functionsUtil.BNify(n.state.maxSlippage).div(100))),k=n.functionsUtil.integerValue(k)),v=[b,k],e.next=34,n.functionsUtil.contractMethodSendWrapper(n.state.curveDepositContract.name,"add_liquidity",v,h,d);case 34:t=e.sent,e.next=61;break;case 37:if(y=n.functionsUtil.normalizeTokenAmount(r,n.props.tokenConfig.decimals),w=[],!n.checkUseProxyContract()){e.next=55;break}if(T=n.state.actionProxyContract[n.state.action],C=T.contract,!u){e.next=52;break}return w=[y,n.props.tokenConfig.idle.address],S=(E=C.methods)[T.function].apply(E,Object(ee.a)(w)),U=S.encodeABI(),e.next=49,n.functionsUtil.sendBiconomyTxWithPersonalSign(T.name,U,h,d);case 49:t=e.sent,e.next=53;break;case 52:c&&(M=T.contract._jsonInterface.find(function(e){return e.name===T.function}),j=!M||M.inputs.find(function(e){return"nonce"===e.name}),n.state.erc20ForwarderTx?n.setState({txError:Object(te.a)({},n.state.action,!1),loadingErc20ForwarderTx:!0},Object(i.a)(o.a.mark(function e(){var a,i,s,r,l,c,u,p,m,f,g,b,k;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},i={},s=n.state.erc20ForwarderContract[n.state.action],r=n.functionsUtil.getGlobalConfig(["contract","methods",n.state.action,"erc20ForwarderProxyContract","forwarder"]),l="".concat(y,"00"),1,e.next=8,n.functionsUtil.signPermit(n.props.selectedToken,n.props.account,r.name,1,l);case 8:if(!(c=e.sent)){e.next=33;break}return n.setState({signedParameters:c}),u=n.functionsUtil.getGlobalConfig(["permit",n.props.selectedToken]),p=u.type.find(function(e){return"value"===e.name}),m=c.expiry,f=c.nonce,g=c.r,b=c.s,k=c.v,i.v=k,i.r=g,i.s=b,i.allowed=!0,i.expiry=parseInt(m),i.holder=n.props.account,i.value=p?l:0,i.nonce=parseInt(f.toString()),i.spender=r.address,a.permitData=i,a.permitType=s.permitType,e.next=27,n.functionsUtil.asyncTimeout(200);case 27:return e.next=29,n.functionsUtil.sendBiconomyTxWithErc20Forwarder(n.state.erc20ForwarderTx.request,a,h,d);case 29:t=e.sent,n.setState({erc20ForwarderTx:null,loadingErc20ForwarderTx:!1}),e.next=34;break;case 33:return e.abrupt("return",n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,{txHash:null,loading:!1})),signedParameters:null,erc20ForwarderTx:null,loadingErc20ForwarderTx:!1}}));case 34:case"end":return e.stop()}},e,this)}))):n.setState({txError:Object(te.a)({},n.state.action,!1),loadingErc20ForwarderTx:!0},Object(i.a)(o.a.mark(function e(){var t,a,i,s,r,l,c,u,p,h,d,m,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.erc20ForwarderContract[n.state.action],e.next=3,n.functionsUtil.signPermit(n.props.selectedToken,n.props.account,t.name,0,y);case 3:if(!(a=e.sent)){e.next=28;break}return s=a.expiry,r=a.nonce,l=a.r,c=a.s,u=a.v,w=j?[y,parseInt(r),s,u,l,c]:[y,s,u,l,c],"foo"===T.function&&(w=[]),p=t.permitType,h=(i=t.contract.methods)[t.function].apply(i,Object(ee.a)(w)),d=h.encodeABI(),m=null,e.prev=12,e.next=15,h.estimateGas({from:n.props.account});case 15:m=(m=e.sent)?n.functionsUtil.BNify(m).times(1.2):n.functionsUtil.BNify(1e6),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(12);case 21:return m||(m=n.functionsUtil.BNify(1e6)),e.next=24,n.functionsUtil.buildBiconomyErc20ForwarderTx(t.name,n.props.tokenConfig.address,p,d,m);case 24:return f=e.sent,e.abrupt("return",n.setState({erc20ForwarderTx:f,loadingErc20ForwarderTx:!1}));case 28:return e.abrupt("return",n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,{txHash:null,loading:!1})),signedParameters:null,erc20ForwarderTx:null,loadingErc20ForwarderTx:!1}}));case 29:case"end":return e.stop()}},e,this,[[12,19]])}))));case 53:e.next=61;break;case 55:return!0,D=n.getReferralAddress()||"0x0000000000000000000000000000000000000000",w=[y,!0,D],e.next=60,n.functionsUtil.contractMethodSendWrapper(n.props.tokenConfig.idle.token,"mintIdleToken",w,h,d);case 60:t=e.sent;case 61:return e.abrupt("break",102);case 62:if(!a){e.next=70;break}return O=function(e,t){var a="success"===e.status,o={eventCategory:"Redeem_gov",eventAction:n.props.selectedToken,eventLabel:e.status,eventValue:0};t&&(o.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==o.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(o),n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,{txHash:null,loading:!1}))}}),a&&n.setState(function(e){return{inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,n.functionsUtil.BNify(0)))}})},A=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,Object(x.a)({},e.processing[n.state.action],{txHash:t})))}})},e.next=67,n.functionsUtil.contractMethodSendWrapper(n.props.tokenConfig.idle.token,"redeemIdleToken",[0],O,A);case 67:t=e.sent,e.next=99;break;case 70:if(!n.state.buttonDisabled&&r&&!n.functionsUtil.BNify(r).lte(0)){e.next=72;break}return e.abrupt("return",!1);case 72:if(I={value:n.functionsUtil.BNify(r)},P=null,!s){e.next=78;break}P=n.functionsUtil.BNify(n.props.idleTokenBalance).times(s),e.next=82;break;case 78:return e.next=80,n.functionsUtil.getIdleTokenPriceWithFee(n.props.tokenConfig,n.props.account);case 80:B=e.sent,P=n.functionsUtil.BNify(n.functionsUtil.normalizeTokenAmount(r,n.props.tokenConfig.decimals)).div(B);case 82:if(P.gt(n.functionsUtil.BNify(n.props.idleTokenBalance))&&(P=n.functionsUtil.BNify(n.props.idleTokenBalance)),P=n.functionsUtil.normalizeTokenAmount(P,18)){e.next=86;break}return e.abrupt("return",!1);case 86:if(F=function(e,t){var a="success"===e.status,o={eventCategory:"Redeem_partial",eventAction:n.props.selectedToken,eventLabel:e.status,eventValue:parseInt(r)};t&&(o.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==o.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(o),n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,{txHash:null,loading:!1}))}}),a&&n.setState(function(e){return{inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,n.functionsUtil.BNify(0)))}})},z=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,Object(x.a)({},e.processing[n.state.action],{txHash:t})))}})},Y="redeemIdleToken",G=[P],!l){e.next=96;break}return Y="redeemIdleTokenSkipGov",e.next=94,n.getSkippedGovTokensFlags();case 94:N=e.sent,G.push(N);case 96:return e.next=98,n.functionsUtil.contractMethodSendWrapper(n.props.tokenConfig.idle.token,Y,G,F,z,I);case 98:t=e.sent;case 99:return e.abrupt("break",102);case 100:return p=!1,e.abrupt("break",102);case 102:!1===t&&p===n.state.processing[n.state.action].loading||n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,Object(x.a)({},e.processing[n.state.action],{loading:p})))}});case 103:case"end":return e.stop()}},e,this)})),n.setMaxSlippage=function(e){n.setState({maxSlippage:e})},n.showMaxSlippage=function(){n.setState({showMaxSlippage:!0})},n.checkAction=function(){var e=n.state.action;switch(e){case"redeem":n.state.canRedeem||(e="deposit")}e!==n.state.action?n.setState({action:e},function(){n.checkButtonDisabled()}):n.checkButtonDisabled()},n.checkButtonDisabled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!n.state.action)return!1;e||(e=n.state.inputValue[n.state.action]);var t=!1;switch(n.state.action){case"deposit":t=t||e&&(e.lte(0)||e.gt(n.props.tokenBalance));break;case"redeem":!(t=!n.state.canRedeemCurve&&!n.state.redeemGovTokens&&(t||!e||e.lte(0)||e.gt(n.props.redeemableBalance)))&&n.state.redeemSkipGov&&n.state.redeemSkipGovTokens.length>0&&!n.state.agreeSkipGovTokens&&(t=!0)}n.setState({buttonDisabled:t})},n.setInputValue=function(){if(!n.state.action||null===n.state.fastBalanceSelector[n.state.action])return!1;var e=n.functionsUtil.BNify(n.state.fastBalanceSelector[n.state.action]).div(100),t=null;switch(n.state.action){case"deposit":t=n.props.tokenBalance?n.functionsUtil.BNify(n.props.tokenBalance).times(e):null;break;case"redeem":t=n.props.redeemableBalance?n.functionsUtil.BNify(n.props.redeemableBalance).times(e):null}n.checkButtonDisabled(t),n.setState(function(e){return{inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,t))}})},n.getFastBalanceSelector=function(){return null!==n.state.fastBalanceSelector[n.state.action]&&n.functionsUtil.BNify(n.state.fastBalanceSelector[n.state.action]).div(100)},n.setFastBalanceSelector=function(e){if(!n.state.action)return!1;n.setState(function(t){return{fastBalanceSelector:Object(x.a)({},t.fastBalanceSelector,Object(te.a)({},n.state.action,e))}})},n.changeInputValue=function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.action){e.next=2;break}return e.abrupt("return",!1);case 2:a=t.target.value.length&&!isNaN(t.target.value)?n.functionsUtil.BNify(t.target.value):n.functionsUtil.BNify(0),n.checkButtonDisabled(a),n.setState(function(e){return{fastBalanceSelector:Object(x.a)({},e.fastBalanceSelector,Object(te.a)({},n.state.action,null)),inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,a))}});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.setAction=function(e){switch(e.toLowerCase()){case"deposit":break;case"redeem":n.state.canRedeem||n.state.canRedeemCurve||(e=null);break;default:e=null}null!==e&&n.setState({action:e})},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUtils(),e.next=3,this.loadProxyContracts();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadProxyContracts",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.contractsInitialized){e.next=2;break}return e.abrupt("return",!1);case 2:return t=["deposit","redeem"],n={actionProxyContract:{},erc20ForwarderContract:{}},e.next=6,this.functionsUtil.asyncForEach(t,function(){var e=Object(i.a)(o.a.mark(function e(t){var i,s,r,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,!a.functionsUtil.getGlobalConfig(["contract","methods",t,"erc20ForwarderEnabled"])){e.next=13;break}return i=a.functionsUtil.getGlobalConfig(["contract","methods",t,"erc20ForwarderProxyContract","forwarder"]),e.next=6,a.props.initContract(i.name,i.address,i.abi);case 6:if(!(s=a.functionsUtil.getGlobalConfig(["contract","methods",t,"erc20ForwarderProxyContract","tokens",a.props.selectedToken]))){e.next=13;break}return i=s,e.next=11,a.props.initContract(s.name,s.address,s.abi);case 11:(r=e.sent)&&(n.erc20ForwarderContract[t]=s,n.erc20ForwarderContract[t].contract=r.contract);case 13:if(i||(i=a.functionsUtil.getGlobalConfig(["contract","methods",t,"proxyContract"])),l=i&&i.enabled,n.actionProxyContract[t]=l?i:null,!l){e.next=25;break}return e.next=19,a.props.initContract(i.name,i.address,i.abi);case 19:if(!(c=e.sent)){e.next=25;break}return n.actionProxyContract[t].contract=c.contract,e.next=24,a.functionsUtil.checkTokenApproved(a.props.selectedToken,i.address,a.props.account);case 24:n.actionProxyContract[t].approved=e.sent;case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 6:this.setState(n);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadAPY",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.functionsUtil.getTokenAprs(this.props.tokenConfig);case 2:if(!(t=e.sent)||null===t.avgApy){e.next=12;break}if(n=this.functionsUtil.BNify(t.avgApy).toFixed(2),a=null,!this.state.canDepositCurve){e.next=11;break}return e.next=9,this.functionsUtil.getCurveAPY();case 9:(a=e.sent)&&(a=a.plus(n));case 11:this.setState({tokenAPY:n,curveAPY:a});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getReferralAddress",value:function(){var e=this.functionsUtil.getQueryStringParameterByName("_referral");return this.functionsUtil.checkAddress(e)||(e=null),e}},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i,s,r,l,c,u,p,h,d,m,f,g;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadUtils(),null!==this.props.tokenBalance){e.next=3;break}return e.abrupt("return",!1);case 3:if(a=t.account!==this.props.account,i=t.selectedToken!==this.props.selectedToken,s=t.contractsInitialized!==this.props.contractsInitialized,r=n.erc20ForwarderEnabled!==this.state.erc20ForwarderEnabled,l=t.tokenBalance!==this.props.tokenBalance&&null!==this.props.tokenBalance,!(a||i||l||r||s)){e.next=13;break}return e.next=11,this.loadProxyContracts();case 11:return this.loadTokenInfo(),e.abrupt("return",!1);case 13:if(c=this.state.action!==n.action,u=this.state.fastBalanceSelector[this.state.action]!==n.fastBalanceSelector[this.state.action],(c||u)&&this.setInputValue(),n.inputValue[this.state.action]!==this.state.inputValue[this.state.action],p=n.redeemSkipGov!==this.state.redeemSkipGov,h=n.redeemGovTokens!==this.state.redeemGovTokens,d=n.agreeSkipGovTokens!==this.state.agreeSkipGovTokens,m=JSON.stringify(n.redeemSkipGovTokens)!==JSON.stringify(this.state.redeemSkipGovTokens),(h||c||m||p||d)&&this.checkButtonDisabled(),f=n.depositCurveEnabled!==this.state.depositCurveEnabled,!(n.metaTransactionsEnabled!==this.state.metaTransactionsEnabled)&&!f){e.next=30;break}return e.next=28,this.checkTokenApproved();case 28:g=e.sent,this.setState({tokenApproved:g});case 30:n.inputValue[this.state.action]!==this.state.inputValue[this.state.action]&&this.calculateCurveSlippage();case 32:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkMinAmountForMint",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h,d;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,n=this.state.totalAUM,a=this.state.maxUnlentPerc,i="risk"===this.props.selectedStrategy,!(s=this.functionsUtil.BNify(this.state.inputValue[this.state.action])).gt(this.props.tokenBalance)){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,this.functionsUtil.convertTokenBalance(s,this.props.selectedToken,this.props.tokenConfig,i);case 9:if(r=e.sent,l=this.functionsUtil.BNify(this.functionsUtil.getGlobalConfig(["contract","methods","deposit","minAmountForMint"])),!(c=r.gte(l))){e.next=24;break}if(!(this.props.tokenConfig.deposit&&this.props.tokenConfig.deposit.minAmountForMint&&r.lt(this.props.tokenConfig.deposit.minAmountForMint))){e.next=17;break}c=!1,e.next=24;break;case 17:return e.next=19,Promise.all([a||this.functionsUtil.genericContractCall(this.props.tokenConfig.idle.token,"maxUnlentPerc"),n||this.functionsUtil.loadAssetField("pool",this.props.selectedToken,this.props.tokenConfig,this.props.account)]);case 19:u=e.sent,p=Object(X.a)(u,2),a=p[0],n=p[1],a&&n&&(h=s.div(n).times(100),a=this.functionsUtil.BNify(a),d=a.div(1e3).times(2),h.lt(d)?c=!1:n.times(d.div(100)).gt(l)&&(t=!0,l=n.times(d.div(100))));case 24:this.setState({totalAUM:n,showPoolPerc:t,maxUnlentPerc:a,minAmountForMint:l,minAmountForMintReached:c});case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"calculateCurveSlippage",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.state.inputValue[this.state.action]?this.functionsUtil.BNify(this.state.inputValue[this.state.action]):null)&&!t.lte(0)){e.next=3;break}return e.abrupt("return",!1);case 3:n=this.functionsUtil.getGlobalConfig(["curve","poolContract"]),a=this.functionsUtil.normalizeTokenAmount(t,n.decimals),i={},e.t0=this.state.action,e.next="deposit"===e.t0?9:"redeem"===e.t0?14:15;break;case 9:return i.depositCurveBalance=t,e.next=12,this.functionsUtil.getCurveSlippage(this.props.tokenConfig.idle.token,a,!0);case 12:return i.depositCurveSlippage=e.sent,e.abrupt("break",16);case 14:case 15:return e.abrupt("break",16);case 16:this.setState(i);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.props.selectedToken||!this.props.tokenConfig)return null;var t="custom"===this.props.connectorName,n=this.functionsUtil.getCurrentNetwork(),a=this.props.tokenConfig.canDeposit&&!this.props.tokenConfig.canDeposit.enabled,o=a?this.state.canRedeem&&this.props.tokenConfig.canDeposit.disabledMessageRedeemKey?this.functionsUtil.getGlobalConfig(["messages",this.props.tokenConfig.canDeposit.disabledMessageRedeemKey]):this.props.tokenConfig.canDeposit.disabledMessageDepositKey?this.functionsUtil.getGlobalConfig(["messages",this.props.tokenConfig.canDeposit.disabledMessageDepositKey]):null:null,i=!this.props.tokenConfig.govTokensDisabled&&this.functionsUtil.getGlobalConfig(["strategies",this.props.selectedStrategy,"govTokensEnabled"])&&Object.keys(this.state.tokenGovTokens).length>0,s="undefined"===typeof this.props.tokenConfig.skipMintForDeposit||this.props.tokenConfig.skipMintForDeposit,r=(this.functionsUtil.getGlobalConfig(["contract","methods","deposit","skipMintCheckboxEnabled"]),this.state.canRedeem&&(!this.state.redeemCurveEnabled||this.state.showRedeemFlow)&&"redeem"===this.state.action),l=this.functionsUtil.getGlobalConfig(["contract","methods","redeemGovTokens","enabled"])&&i&&r,c=l&&this.state.redeemGovTokens,u=this.functionsUtil.getGlobalConfig(["contract","methods","redeemSkipGov"]),p=u&&!u.disabledTokens.includes(this.props.tokenConfig.idle.token)&&i&&r,m=p&&this.state.redeemSkipGov&&Object.keys(this.props.govTokensUserBalances).length>0&&this.props.govTokensBalance.gt(0),g=p&&this.state.redeemSkipGov&&(!Object.keys(this.props.govTokensUserBalances).length||this.props.govTokensBalance.lte(0)),b=l||p,k=this.functionsUtil.getGlobalConfig(["contract","methods","deposit","erc20ForwarderEnabled"]),v=this.functionsUtil.getGlobalConfig(["contract","methods","deposit","metaTransactionsEnabled"]),x=this.functionsUtil.getGlobalConfig(["contract","methods","deposit","erc20ForwarderProxyContract","tokens"]),y=v&&this.props.biconomy&&this.state.actionProxyContract[this.state.action],w=y&&this.state.metaTransactionsEnabled,T=k&&Object.keys(x).includes(this.props.selectedToken)&&x[this.props.selectedToken].enabled&&this.props.biconomy&&this.props.erc20ForwarderClient&&this.state.actionProxyContract[this.state.action]&&!a,C="deposit"===this.state.action?this.props.tokenBalance:this.props.redeemableBalance,S=this.state.migrationEnabled&&void 0!==this.props.tokenConfig.migration.message?this.props.tokenConfig.migration.message:null,U=this.functionsUtil.getGlobalConfig(["curve"]),M=U.enabled&&this.functionsUtil.getGlobalConfig(["curve","availableTokens",this.props.tokenConfig.idle.token,"enabled"]),O=M&&this.state.depositCurveEnabled&&"deposit"===this.state.action,A="deposit"===this.state.action&&!this.state.contractPaused&&(M||this.state.tokenApproved)&&M&&this.state.componentMounted&&(!this.state.migrationEnabled||this.state.skipMigration)&&this.state.canDepositCurve&&"deposit"===this.state.action,I=M&&this.state.componentMounted&&(!this.state.migrationEnabled||this.state.skipMigration)&&this.state.canRedeemCurve&&"redeem"===this.state.action,P=O&&this.state.depositCurveSlippage&&this.state.depositCurveBalance&&!this.state.buttonDisabled,z=A||!1,Y=this.functionsUtil.getGlobalConfig(["tools","batchDeposit"]),G=Y.enabled&&"undefined"!==typeof Y.props.availableTokens[this.props.tokenConfig.idle.token]&&Y.availableNetworks.includes(n.id),N=Y.depositEnabled,H=!w&&G&&N&&!this.props.isMigrationTool&&"deposit"===this.state.action,R=this.functionsUtil.getGlobalConfig(["tools","ethWrapper"]),V=R.subComponent,W="WETH"===this.props.selectedToken&&R.enabled&&R.availableNetworks.includes(n.id)&&!this.props.isMigrationTool&&"deposit"===this.state.action,L=this.functionsUtil.getGlobalConfig(["tools","polygonBridge"]),_=this.functionsUtil.getGlobalConfig(["network","providers","polygon","networkPairs",n.id]),J=("deposit"===this.state.action&&this.state.canDeposit&&!a||"redeem"===this.state.action&&this.state.canRedeem||c)&&(!this.state.showETHWrapperEnabled||"redeem"===this.state.action)&&(!this.state.showPolygonBridgeEnabled||"redeem"===this.state.action),X=!c&&J,Z=this.state.componentMounted&&"infura"===n.provider&&(!A||this.state.showBuyFlow)&&!this.state.depositCurveEnabled&&this.state.tokenApproved&&!this.state.contractPaused&&(!this.state.migrationEnabled||this.state.skipMigration)&&"deposit"===this.state.action&&!a&&!this.state.canDeposit&&!this.state.showETHWrapperEnabled,Q=this.state.componentMounted&&"deposit"===this.state.action&&!this.state.canDeposit&&"polygon"===n.provider,ee=!Q&&"polygon"===n.provider&&_&&L.enabled&&"deposit"===this.state.action,te=this.functionsUtil.BNify(this.props.accountBalance).gt(0)?this.props.selectedToken:this.functionsUtil.getBaseToken(),ce=this.getReferralAddress(),ue=ce&&"deposit"===this.state.action&&X&&!Z;return h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.h,{width:[1,.36],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.b,{width:1},h.a.createElement(f.u,{mb:1},"Select your asset:"),h.a.createElement(F.a,this.props)),t?h.a.createElement(q.a,{cardProps:{mt:3},icon:"Visibility",text:'You are using Idle in "Read-Only" mode.<br />Logout and connect with your wallet to interact.'}):h.a.createElement(ne.a,Object.assign({},this.props,{migrateTextBefore:S,migrateText:null!==S?"":null,toggleSkipMigration:this.toggleSkipMigration.bind(this)}),this.props.account?this.state.componentMounted?this.state.action&&h.a.createElement(f.b,{width:1},h.a.createElement(f.h,{mt:2,flexDirection:"column"},h.a.createElement(f.u,{mb:2},"Choose the action:"),h.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},h.a.createElement(E.a,{cardProps:{p:3,width:.48,onMouseDown:function(){e.setAction("deposit")}},isInteractive:!0,isActive:"deposit"===this.state.action},h.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(le.a,{transaction:{action:"deposit"},fieldInfo:{name:"icon",props:{mr:3}}}),h.a.createElement(f.u,{fontSize:3,fontWeight:3},"Deposit"))),h.a.createElement(E.a,{cardProps:{p:3,width:.48,onMouseDown:function(){e.setAction("redeem")}},isInteractive:!0,isActive:"redeem"===this.state.action,isDisabled:!this.state.canRedeem&&!this.state.canRedeemCurve},h.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(le.a,{transaction:{action:"redeem"},fieldInfo:{name:"icon",props:{mr:3}}}),h.a.createElement(f.u,{fontSize:3,fontWeight:3},"Redeem")))),a&&h.a.createElement(q.a,{cardProps:{mt:3},iconProps:{color:"#ffe000"},icon:"Warning",text:o},"deposit"===this.state.action&&this.state.canRedeem&&h.a.createElement(j.a,{buttonProps:{mt:3,width:[1,.5]},handleClick:function(t){return e.setAction("redeem")}},"Redeem"))),r&&this.state.unlentBalance&&h.a.createElement(E.a,{cardProps:{py:2,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{size:"1.8em",color:"cellText",name:"LocalGasStation"}),h.a.createElement(f.u,{px:2,fontSize:1,color:"cellText",textAlign:"center"},"Available balance for Cheap Redeem"),h.a.createElement(f.h,{alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,{fontSize:1,fontWeight:3,color:"dark-gray",textAlign:"center",hoverColor:"copyColor"},this.state.unlentBalance.toFixed(4)," ",this.props.selectedToken),h.a.createElement(f.y,{placement:"top",message:this.functionsUtil.getGlobalConfig(["messages","cheapRedeem"])},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"}))))),b?h.a.createElement(E.a,{cardProps:{pt:2,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",pb:this.state.showAdvancedOptions?3:2}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(f.n,{ml:1,mainColor:"primary",hoverColor:"primary",onClick:this.toggleShowAdvancedOptions},this.state.showAdvancedOptions?"Hide":"Show"," advanced options"),h.a.createElement(f.k,{size:"1.8em",color:"cellText",name:this.state.showAdvancedOptions?"ArrowDropUp":"ArrowDropDown"})),this.state.showAdvancedOptions&&h.a.createElement(f.h,{mt:1,flexDirection:"column"},l&&h.a.createElement(f.h,{alignItems:"center",justifyContent:"row"},h.a.createElement(f.e,{required:!1,checked:this.state.redeemGovTokens,label:"Redeem governance tokens only",onChange:function(t){return e.toggleRedeemGovTokens(t.target.checked)}}),h.a.createElement(f.n,{color:"link",hoverColor:"link",onClick:function(t){return e.props.openTooltipModal("Redeem governance tokens","This feature allows you to redeem just the amount of governance tokens accrued".concat(e.props.govTokensBalance&&e.props.govTokensBalance.gt(0)?" (~".concat(e.props.govTokensBalance.toFixed(2),"$)"):null," without redeeming the underlying token."))}},"(read more)")),p&&h.a.createElement(f.h,{alignItems:"center",flexDirection:"row"},h.a.createElement(f.e,{required:!1,checked:this.state.redeemSkipGov,label:"Redeem without governance tokens",onChange:function(t){return e.toggleRedeemSkipGov(t.target.checked)}}),h.a.createElement(f.k,{mr:1,size:"1.2em",name:"Warning",color:"#ffe000"}),h.a.createElement(f.n,{color:"link",hoverColor:"link",onClick:function(t){return e.props.openTooltipModal("Redeem without governance tokens",e.functionsUtil.getGlobalConfig(["messages","redeemSkipGov"]))}},"(read more)")))):z?h.a.createElement(E.a,{cardProps:{pt:2,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",pb:this.state.showAdvancedOptions?3:2}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(f.n,{ml:1,mainColor:"primary",hoverColor:"primary",onClick:this.toggleShowAdvancedOptions},this.state.showAdvancedOptions?"Hide":"Show"," advanced options"),h.a.createElement(f.k,{size:"1.8em",color:"cellText",name:this.state.showAdvancedOptions?"ArrowDropUp":"ArrowDropDown"})),this.state.showAdvancedOptions&&h.a.createElement(f.h,{mt:1,flexDirection:"column"},A&&h.a.createElement(f.h,{alignItems:"center",justifyContent:"row"},h.a.createElement(f.e,{required:!1,disabled:this.state.directMint,label:"Deposit in the Curve Pool",checked:this.state.depositCurveEnabled,onChange:function(t){return e.toggleDepositCurve(t.target.checked)}}),h.a.createElement(f.n,{mainColor:"primary",hoverColor:"primary",onClick:function(t){return e.props.openTooltipModal("How Curve works",e.functionsUtil.getGlobalConfig(["messages","curveInstructions"]))}},"(read more)")),!1)):h.a.createElement(f.h,{width:1,flexDirection:"column"},A&&h.a.createElement(f.h,{width:1,flexDirection:"column",justifyContent:"center"},h.a.createElement(E.a,{isRainbow:!0,cardProps:{py:3,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.l,{height:"1.8em",src:U.params.image}),h.a.createElement(f.u,{mt:2,px:2,fontSize:1,color:"dark-gray",textAlign:"center"},"Deposit your tokens in the Curve Pool and boost your APY up to ",this.state.curveAPY?this.state.curveAPY.toFixed(2):"-","%.",h.a.createElement(f.n,{ml:1,mainColor:"primary",hoverColor:"primary",onClick:function(t){return e.props.openTooltipModal("How Curve works",e.functionsUtil.getGlobalConfig(["messages","curveInstructions"]))}},"Read More")),h.a.createElement(f.e,{mt:2,required:!1,label:"Deposit in Curve",checked:this.state.depositCurveEnabled,onChange:function(t){return e.toggleDepositCurve(t.target.checked)}}))),!this.state.showBuyFlow&&!this.state.depositCurveEnabled&&!this.state.canDeposit&&h.a.createElement(f.n,{textAlign:"center",hoverColor:"primary",onClick:function(t){return e.setShowBuyFlow(!0)}},"I just want to deposit more ",this.props.selectedToken)),!1,l&&h.a.createElement(E.a,{cardProps:{py:3,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{size:"1.8em",color:"cellText",name:"InfoOutline"}),h.a.createElement(f.u,{mt:1,px:2,fontSize:1,color:"cellText",textAlign:"center"},"By redeeming your ",this.props.selectedToken," you will automatically get also the proportional amount of governance tokens accrued",this.props.govTokensBalance&&this.props.govTokensBalance.gt(0)?" (~ $".concat(this.props.govTokensBalance.toFixed(2),")"):null,".")),h.a.createElement(f.e,{mt:2,required:!1,checked:this.state.redeemGovTokens,label:"Redeem governance tokens only",onChange:function(t){return e.toggleRedeemGovTokens(t.target.checked)}}))),m?h.a.createElement(E.a,{cardProps:{mt:2,mb:2,py:2,px:1}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.u,{mt:1,fontSize:2,color:"cellText",textAlign:"center"},"Select the gov tokens you want to give away:"),h.a.createElement(f.h,{mt:2,width:1,boxShadow:0,style:{flexWrap:"wrap"},alignItems:"center",justifyContent:"center"},Object.keys(this.props.govTokensUserBalances).map(function(t){var n=e.props.govTokensUserBalances[t],a=e.state.redeemSkipGovTokens.includes(t),o=e.functionsUtil.getGlobalConfig(["govTokens",t]);return h.a.createElement(f.h,{p:2,mb:1,mx:1,width:"auto",style:{cursor:"pointer"},borderRadius:2,flexDirection:"row",key:"skipGovToken_".concat(t),justifyContent:"flex-start",backgroundColor:a?"#2a4b78":"cardBgHover",onClick:function(n){return e.setRedeemSkipGovTokens(t,!e.state.redeemSkipGovTokens.includes(t))}},h.a.createElement(f.e,{m:0,required:!1,checked:a,onChange:function(n){return e.setRedeemSkipGovTokens(t,n.target.checked)}}),h.a.createElement($.a,{token:t,tokenConfig:o,fieldInfo:{name:"icon",props:{mr:1,width:["1.4em","1.6em"],height:["1.4em","1.6em"]}}}),h.a.createElement(B.a,{ml:1,fontSize:[0,2],fontWeight:500,maxPrecision:4,color:"cellText",number:n.toString()}))})))):g&&h.a.createElement(E.a,{cardProps:{p:2,my:2}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{size:"1.8em",name:"MoneyOff",color:"cellText"}),h.a.createElement(f.u,{mt:1,fontSize:1,color:"cellText",textAlign:"center"},"You don't have any gov tokens to give away."))),m&&this.functionsUtil.BNify(this.state.skippedGovTokensBalance).gt(0)?h.a.createElement(E.a,{cardProps:{p:2,my:2}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{size:"1.8em",name:"Warning",color:"#ffe000"}),h.a.createElement(f.u,{mt:1,fontSize:1,color:"red",textAlign:"center"},"You are giving away ",this.functionsUtil.formatMoney(this.state.skippedGovTokensBalance),"$ worth of governance tokens!"),this.state.skipGovTokensGasSave&&this.state.skipGovTokensGasSave.gte(1e-4)&&h.a.createElement(f.u,{mt:1,fontSize:1,color:"#00b84a",textAlign:"center"},"This will save you ",this.state.skipGovTokensGasSave.toFixed(4)," ETH of gas (~",this.state.skipGovTokensGasSaveUSD.toFixed(2),"$)"),h.a.createElement(f.u,{mt:1,fontSize:1,color:"cellText",textAlign:"center"},"To proceed with the redeem please give your authorization by checking the following flag:"),h.a.createElement(f.e,{my:1,required:!1,checked:this.state.agreeSkipGovTokens,label:"I agree to give away my governance tokens",onChange:function(t){return e.toggleAgreeSkipGovTokens(t.target.checked)}}))):m&&this.state.redeemSkipGovTokens.length>0&&h.a.createElement(E.a,{cardProps:{p:3,my:2}},h.a.createElement(d.a,{flexProps:{flexDirection:"row"},loaderProps:{size:"25px"},textProps:{ml:2},text:"Loading estimated gas usage..."})),ue&&h.a.createElement(E.a,{cardProps:{py:3,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{size:"1.8em",name:"Share",color:"cellText"}),h.a.createElement(f.u,{mt:1,px:2,fontSize:1,color:"cellText",textAlign:"center"},"You are depositing with the following referral address:"),h.a.createElement(f.u,{mt:1,px:2,fontSize:1,fontWeight:500,textAlign:"center",color:this.props.theme.colors.transactions.status.completed},ce))),!y||Z||this.state.contractPaused?T&&!Z&&!this.state.contractPaused&&h.a.createElement(E.a,{cardProps:{p:3,my:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},h.a.createElement(f.u,{mb:2,fontSize:2,color:"cellText",textAlign:"center"},"How do you prefer to pay gas fees for this ",this.state.action,"?"),h.a.createElement(f.h,{width:[1,.7],alignItems:"center",flexDirection:"row",justifyContent:"space-between"},h.a.createElement(re.a,Object.assign({},this.props,{cardProps:{py:2,px:[2,3],width:.48},textProps:{ml:[1,2]},text:this.props.selectedToken,isActive:this.state.erc20ForwarderEnabled,imageProps:{height:this.props.isMobile?"1.4em":"1.8em",width:this.props.isMobile?"1.4em":"1.8em"},image:"/images/tokens/".concat(this.props.selectedToken,".svg"),handleClick:function(t){return e.toggleErc20ForwarderEnabled(!0)}})),h.a.createElement(re.a,Object.assign({},this.props,{cardProps:{py:2,px:[2,3],width:.48},textProps:{ml:[1,2]},text:"ETH",isActive:!this.state.erc20ForwarderEnabled,imageProps:{height:this.props.isMobile?"1.4em":"1.8em",width:this.props.isMobile?"1.4em":"1.8em"},image:"/images/tokens/ETH.svg",handleClick:function(t){return e.toggleErc20ForwarderEnabled(!1)}}))),this.state.erc20ForwarderEnabled&&this.state.txError[this.state.action]&&h.a.createElement(f.u,{mt:2,fontSize:1,color:"red",textAlign:"center"},"The meta-transaction cannot be executed due to insufficient funds, fund your wallet or select ETH and try again.")):h.a.createElement(E.a,{cardProps:{py:3,px:2,my:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},this.state.metaTransactionsEnabled&&this.state.txError[this.state.action]&&this.state.actionProxyContract[this.state.action].approved?h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{size:"1.8em",name:"Warning",color:"cellText"}),h.a.createElement(f.u,{mt:1,fontSize:1,color:"cellText",textAlign:"center"},"Seems like you are having some trouble with Meta-Transactions... Disable them by unchecking the box below and try again!")):"WalletConnect"===this.functionsUtil.getWalletProvider()&&this.state.metaTransactionsEnabled?h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{size:"1.8em",name:"Warning",color:"cellText"}),h.a.createElement(f.u,{mt:1,fontSize:1,color:"cellText",textAlign:"center"},"Please disable Meta-Transactions if you are using Argent Wallet to avoid failed transactions!")):h.a.createElement(f.u,{mt:1,fontSize:1,color:"cellText",textAlign:"center"},"Meta-Transactions are ",this.state.metaTransactionsEnabled?"enabled":"disabled"," for ",this.state.action,"s!",h.a.createElement("br",null),this.state.metaTransactionsEnabled&&!this.state.actionProxyContract[this.state.action].approved&&"Please either enable the Smart-Contract to enjoy gas-less ".concat(this.state.action," or just disable meta-tx.")),h.a.createElement(f.e,{mt:2,required:!1,checked:this.state.metaTransactionsEnabled,onChange:function(t){return e.toggleMetaTransactionsEnabled(t.target.checked)},label:"".concat(this.functionsUtil.capitalize(this.state.action)," with Meta-Transaction")})),this.state.minAmountForMintReached&&"deposit"===this.state.action&&h.a.createElement(E.a,{cardProps:{p:3,mt:3}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"1.8em",color:"cellText",name:"InfoOutline"}),h.a.createElement(f.u,{mt:1,fontSize:2,color:"cellText",textAlign:"center"},"By depositing more than ",this.functionsUtil.formatMoney(this.state.minAmountForMint),"$ ",this.state.showPoolPerc?"(".concat(this.state.minAmountForMint.div(this.state.totalAUM).times(100).toFixed(0),"% of the pool)"):null," the pool will be automatically rebalanced, gas cost may be higher."))),H?h.a.createElement(f.h,{p:2,mt:3,width:1,borderRadius:2,alignItems:"center",flexDirection:"row",justifyContent:"center",backgroundColor:"DashboardCard",border:"1px solid ".concat(this.props.theme.colors.primary)},h.a.createElement(f.n,{textAlign:"center",hoverColor:"primary",href:"/#/dashboard/tools/".concat(Y.route,"/").concat(this.props.tokenConfig.idle.token)},"Gas fees too high? Save gas with our Batch Deposit!"),h.a.createElement(f.k,{ml:1,size:"1em",color:"primary",name:"LocalGasStation"})):W?h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{py:3,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",pb:this.state.showAdvancedOptions?3:2}},h.a.createElement(f.h,{alignItems:"center",justifyContent:"row"},h.a.createElement(f.e,{required:!1,checked:this.state.showETHWrapperEnabled,label:"Convert your ETH to WETH",onChange:function(t){return e.toggleShowETHWrapper(t.target.checked)}}))),this.state.showETHWrapperEnabled&&h.a.createElement(V,Object.assign({},this.props,{action:"wrap",fullWidth:!0,toolProps:R.props}))):ee&&h.a.createElement(f.h,{p:2,mt:3,width:1,borderRadius:2,alignItems:"center",flexDirection:"column",justifyContent:"center",backgroundColor:"DashboardCard",border:"1px solid ".concat(this.props.theme.colors.primary)},h.a.createElement(f.l,{height:"1.2em",src:L.image}),h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(f.n,{textAlign:"center",hoverColor:"primary",href:"/#/dashboard/tools/".concat(L.route,"/").concat(this.props.selectedToken)},"Use the ",L.label," to deposit your ",this.props.selectedToken),h.a.createElement(f.k,{ml:1,size:"1em",color:"primary",name:"ArrowForward"}))),I&&this.state.canRedeem&&h.a.createElement(f.h,{width:1,flexDirection:"column",justifyContent:"center"},h.a.createElement(E.a,{isRainbow:!0,cardProps:{py:3,px:2,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.l,{height:"1.8em",src:U.params.image}),h.a.createElement(f.u,{mt:2,px:2,fontSize:1,color:"dark-gray",textAlign:"center"},"Redeem your tokens from the Curve Pool.",h.a.createElement(f.n,{ml:1,mainColor:"primary",hoverColor:"primary",onClick:function(t){return e.props.openTooltipModal("How Curve works",e.functionsUtil.getGlobalConfig(["messages","curveInstructions"]))}},"Read More")),this.state.canRedeem&&h.a.createElement(f.e,{mt:2,required:!1,label:"Redeem from Curve",checked:this.state.redeemCurveEnabled,onChange:function(t){return e.toggleRedeemCurve(t.target.checked)}}))),this.canRedeem&&h.a.createElement(f.n,{textAlign:"center",hoverColor:"primary",onClick:function(t){return e.setShowRedeemFlow(!0)}},"I just want to redeem my ",this.props.selectedToken)),this.state.contractPaused&&"deposit"===this.state.action?h.a.createElement(E.a,{cardProps:{p:3,mt:3}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"1.8em",name:"Warning",color:"cellText"}),h.a.createElement(f.u,{mt:1,fontSize:2,color:"cellText",textAlign:"center"},"Deposits for ",this.props.selectedToken," are temporarily unavailable due to Smart-Contract maintenance. Redeems are always available."))):this.state.tokenApproved||"deposit"!==this.state.action||this.state.showETHWrapperEnabled||a?!Z&&J&&(this.state.processing[this.state.action].loading?this.state.loadingErc20ForwarderTx?h.a.createElement(f.h,{mt:3,flexDirection:"column"},h.a.createElement(d.a,{flexProps:{flexDirection:"row"},loaderProps:{size:"25px"},textProps:{ml:2},text:this.state.erc20ForwarderTx?this.state.signedParameters?"Please Sign the Transaction...":"Please Sign the Permit...":"Calculating transaction fees..."})):this.state.erc20ForwarderTx?h.a.createElement(E.a,{cardProps:{p:3,mt:3,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}},h.a.createElement(f.u,{mb:2,fontSize:2,color:"cellText",textAlign:"center"},"The required gas fee to perform the ",this.state.action," is ",h.a.createElement("strong",null,this.state.erc20ForwarderTx.cost," ",this.props.selectedToken)),h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{mx:2,py:2,px:[2,3],width:.4,onMouseDown:function(){e.executeAction()}},isInteractive:!0},h.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(f.h,{mr:2,alignItems:"center",justifyContent:"center"},h.a.createElement(f.k,{align:"center",color:"#00b84a",name:"CheckCircle",size:this.props.isMobile?"1em":"1.8em"})),h.a.createElement(f.u,{fontWeight:3,fontSize:[2,3]},"Confirm"))),h.a.createElement(E.a,{cardProps:{mx:2,py:2,px:[2,3],width:.4,onMouseDown:function(){e.cancelTransaction()}},isInteractive:!0},h.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(f.h,{mr:2,alignItems:"center",justifyContent:"center"},h.a.createElement(f.k,{name:"Cancel",align:"center",color:"#e13636",size:this.props.isMobile?"1em":"1.8em"})),h.a.createElement(f.u,{fontWeight:3,fontSize:[2,3]},"Decline"))))):h.a.createElement(f.h,{mt:3,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(D.a,Object.assign({},this.props,{cancelTransaction:this.cancelTransaction.bind(this),hash:this.state.processing[this.state.action].txHash,endMessage:"Finalizing ".concat(this.state.action," request..."),waitText:"".concat(this.functionsUtil.capitalize(this.state.action)," estimated in")}))):h.a.createElement(f.h,{mt:2,flexDirection:"column"},X&&h.a.createElement(f.h,{mb:3,width:1,flexDirection:"column"},(C||this.props.tokenFeesPercentage)&&h.a.createElement(f.b,{mb:1,width:1},this.state.showMaxSlippage&&P&&h.a.createElement(f.b,{mb:2,width:1},h.a.createElement(f.h,{alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,null,"Choose max slippage:"),h.a.createElement(f.y,{placement:"top",message:"Max additional slippage on top of the one shown below"},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"}))),h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},[.2,.5,1,5].map(function(t){return h.a.createElement(oe.a,{cardProps:{p:1},textProps:{fontSize:1},percentage:t,key:"selector_".concat(t),onMouseDown:function(){return e.setMaxSlippage(t)},isActive:e.state.maxSlippage===parseFloat(t)})}))),h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},P?h.a.createElement(f.h,{width:1,maxWidth:"50%",alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,{fontSize:1,fontWeight:3,textAlign:"right",style:{whiteSpace:"nowrap"},color:this.state.depositCurveSlippage.gt(0)?this.props.theme.colors.transactions.status.failed:this.props.theme.colors.transactions.status.completed},0===parseFloat(this.state.depositCurveSlippage.times(100).toFixed(2))?"No Slippage":"".concat(this.state.depositCurveSlippage.gt(0)?"Slippage: ":"Bonus: "," ").concat(this.state.depositCurveSlippage.times(100).abs().toFixed(2),"%")),h.a.createElement(f.y,{placement:"top",message:this.functionsUtil.getGlobalConfig(["messages","curveBonusSlippage"])},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"})),h.a.createElement(f.n,{ml:1,color:"copyColor",hoverColor:"primary",onClick:this.showMaxSlippage},"change")):this.props.tokenFeesPercentage&&h.a.createElement(f.h,{alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,{fontSize:1,fontWeight:3,color:"dark-gray",textAlign:"right",hoverColor:"copyColor"},"Performance fee: ",this.props.tokenFeesPercentage.times(100).toFixed(2),"%"),h.a.createElement(f.y,{placement:"top",message:this.functionsUtil.getGlobalConfig(["messages","performanceFee"])},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"}))),C&&h.a.createElement(f.n,{fontSize:1,fontWeight:3,color:"dark-gray",textAlign:"right",hoverColor:"copyColor",onClick:function(t){return e.setFastBalanceSelector(100)}},C.toFixed(6)," ",this.props.selectedToken))),h.a.createElement(f.m,{min:0,type:"number",required:!0,height:"3.4em",borderRadius:2,fontWeight:500,borderColor:"cardBorder",backgroundColor:"cardBg",boxShadow:"none !important",placeholder:"Insert amount",onChange:this.changeInputValue.bind(this),border:"1px solid ".concat(this.props.theme.colors.divider),value:null!==this.state.inputValue[this.state.action]?this.functionsUtil.BNify(this.state.inputValue[this.state.action]).toFixed():""}),h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},[25,50,75,100].map(function(t){return h.a.createElement(oe.a,{percentage:t,key:"selector_".concat(t),onMouseDown:function(){return e.setFastBalanceSelector(t)},isActive:e.state.fastBalanceSelector[e.state.action]===parseInt(t)})}))),J&&h.a.createElement(f.h,{justifyContent:"center",mt:c?2:0},h.a.createElement(j.a,{buttonProps:{width:"auto",minWidth:[1,.5],style:{textTransform:"capitalize"},disabled:this.state.buttonDisabled},handleClick:this.state.buttonDisabled?null:this.executeAction.bind(this)},this.state.action,c?" Gov Tokens":"")))):h.a.createElement(E.a,{isDisabled:a,cardProps:{p:3,mt:3}},this.state.processing.approve&&this.state.processing.approve.loading?h.a.createElement(f.h,{flexDirection:"column"},h.a.createElement(D.a,Object.assign({},this.props,{waitText:"Approve estimated in",endMessage:"Finalizing approve request...",hash:this.state.processing.approve.txHash,cancelTransaction:this.cancelTransaction.bind(this)}))):h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"1.8em",name:"LockOpen",color:"cellText"}),h.a.createElement(f.u,{mt:3,fontSize:2,color:"cellText",textAlign:"center"},this.state.depositCurveEnabled?"To ".concat(this.functionsUtil.capitalize(this.state.action)," your ").concat(this.props.selectedToken," in the Curve Pool you need to approve the Smart-Contract first."):w?"To ".concat(this.functionsUtil.capitalize(this.state.action)," your ").concat(this.props.selectedToken," into Idle using Meta-Transaction you need to approve our Smart-Contract first."):"To ".concat(this.functionsUtil.capitalize(this.state.action)," your ").concat(this.props.selectedToken," into Idle you need to approve our Smart-Contract first.")),h.a.createElement(j.a,{buttonProps:{mt:3,width:[1,.5]},handleClick:this.approveToken.bind(this)},"Approve")))):h.a.createElement(f.h,{mt:4,flexDirection:"column"},h.a.createElement(d.a,{flexProps:{flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading asset info..."})):h.a.createElement(ae.a,this.props))),I&&this.state.redeemCurveEnabled&&h.a.createElement(f.b,{mt:3,width:1},h.a.createElement(ie,this.props)),Z?h.a.createElement(f.h,{mt:3,width:[1,.5],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},h.a.createElement(K.a,Object.assign({},this.props,{showInline:!0,availableMethods:[],buyToken:this.props.selectedToken}))):Q&&h.a.createElement(f.h,{mt:3,width:[1,.36],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{p:3}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.l,{height:"2em",src:L.image}),h.a.createElement(f.u,{mt:1,fontSize:2,color:"cellText",textAlign:"center"},h.a.createElement("strong",null,"You don't have enough ",te," in your wallet!"),h.a.createElement("br",null),"Use the ",L.label," to transfer your ",te," in Polygon."),h.a.createElement(j.a,{buttonProps:{mt:2,width:[1,.5]},handleClick:function(t){return e.props.goToSection("tools/".concat(L.route,"/").concat(te))}},"Deposit ",te)))),h.a.createElement(se.a,{confettiEnabled:!0,icon:"images/medal.svg",title:"Congratulations!",account:this.props.account,closeModal:this.resetModal,tokenName:this.props.selectedToken,isOpen:"share"===this.state.activeModal,text:"You have successfully deposited in Idle!<br />Enjoy <strong>".concat(this.state.tokenAPY,"% APY</strong> on your <strong>").concat(this.props.selectedToken,"</strong>!"),tweet:"I'm earning ".concat(this.state.tokenAPY,"% APY on my ").concat(this.props.selectedToken," with @idlefinance! Go to ").concat(this.functionsUtil.getGlobalConfig(["baseURL"])," and start earning now from your idle tokens!")}))}}]),t}(p.Component),ue=n(1291),pe=n(491),he=n(170),de=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={chartData:null,chartProps:null,inputValue:1e3,maxInputValue:999999999999999},n.functionsUtil=null,n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadChart();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),t.selectedToken!==this.props.selectedToken&&this.loadChart();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadChart",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h,d,m,f=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.functionsUtil.getTokenApy(this.props.tokenConfig);case 2:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:for(t=this.functionsUtil.BNify(this.state.inputValue),n=t.times(this.props.tokenApy.div(100)),a=parseFloat(n.div(12)),i=parseFloat(n.div(4)),s=parseFloat(n.div(2)),r=parseFloat(n.div(1)),l=[{perc:1/12,label:"MONTH",value:a,month:a,color:this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","rgb"]).join(","),monthColor:"hsl("+this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","hsl"]).join(",")+")"},{perc:.25,label:"3 MONTHS",value:i,month3:i,color:this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","rgb"]).join(","),month3Color:"hsl("+this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","hsl"]).join(",")+")"},{perc:.5,label:"6 MONTHS",value:s,month6:s,color:this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","rgb"]).join(","),month6Color:"hsl("+this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","hsl"]).join(",")+")"},{perc:1,label:"YEAR",year:r,value:r,color:this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","rgb"]).join(","),yearColor:"hsl("+this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"color","hsl"]).join(",")+")"}],c=this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"chart","labelTextColorModifiers"]),4,u=r/4,p=[0],h=1;h<=4;h++)d=h*u,p.push(d);m={padding:.2,animate:!1,indexBy:"label",labelSkipWidth:16,labelSkipHeight:16,keys:["month","month3","month6","year"],colors:function(e){var t=e.id;return e.data["".concat(t,"Color")]},label:function(e){return f.functionsUtil.abbreviateNumber(e.value,2,4)+" "+f.props.selectedToken},labelTextColor:c?{from:"color",modifiers:[c]}:null,isInteractive:!1,minValue:0,gridYValues:p,axisLeft:{format:function(e){return f.functionsUtil.abbreviateNumber(e,1,3)},tickValues:p,orient:"left",tickSize:0,tickPadding:5,tickRotation:0,legend:"",legendPosition:"middle"},axisBottom:{legend:"",tickSize:0,tickPadding:15,orient:"bottom"},theme:{labels:{text:{fontSize:15,fontWeight:600,fill:he.a.colors.counter,fontFamily:he.a.fonts.sansSerif}},axis:{ticks:{text:{fontSize:14,fontWeight:600,fill:he.a.colors.legend,fontFamily:he.a.fonts.sansSerif}}},grid:{line:{stroke:"#dbdbdb",strokeDasharray:"9 5"}}},margin:this.props.isMobile?{top:0,right:0,bottom:30,left:0}:{top:10,right:0,bottom:50,left:65}},this.setState({chartData:l,chartProps:m});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeInputValue",value:function(e){var t=e.target.value.length&&!isNaN(e.target.value)?Math.min(this.state.maxInputValue,parseFloat(e.target.value)):0;t=this.functionsUtil.BNify(t),this.setState({inputValue:t})}},{key:"render",value:function(){var e=this;if(!this.props.selectedToken||!this.props.tokenConfig)return null;var t=this.functionsUtil.getGlobalConfig(["govTokens","IDLE","enabled"])&&this.functionsUtil.getGlobalConfig(["govTokens","IDLE","showAPR"]);return h.a.createElement(E.a,{cardProps:{p:[3,4]}},h.a.createElement(f.h,{width:1,flexDirection:["column","row"]},h.a.createElement(f.h,{width:[1,.3],flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement($.a,{token:this.props.selectedToken,tokenConfig:this.props.tokenConfig,fieldInfo:{name:"icon",props:{mb:2,height:"2.5em"}}}),h.a.createElement(f.u,{fontSize:2,color:"cellText",textAlign:"center"},"Set the amount and see your estimated earnings on time based on the current APY: ",this.props.tokenApy?"".concat(this.props.tokenApy.toFixed(2),"%"):null,t&&h.a.createElement(f.h,{style:{display:"inline-flex",verticalAlign:"middle"}},h.a.createElement(f.y,{placement:"top",message:this.functionsUtil.getGlobalConfig(["messages","apyLong"])},h.a.createElement(f.k,{ml:1,name:"Info",size:"1em",color:"cellTitle"}))))),h.a.createElement(f.h,{mt:3,flexDirection:"column"},h.a.createElement(f.m,{min:0,type:"number",required:!0,borderRadius:2,fontWeight:500,textAlign:"center",height:["3em","3.4em"],borderColor:"cardBorder",boxShadow:"none !important",max:this.state.maxInputValue,backgroundColor:"cardBgHover",onChange:this.changeInputValue.bind(this),border:"1px solid ".concat(he.a.colors.divider),placeholder:"Insert ".concat(this.props.selectedToken.toUpperCase()," amount"),value:this.state.inputValue&&!isNaN(this.state.inputValue)?this.state.inputValue:""})),h.a.createElement(f.h,{mt:3,justifyContent:"center"},h.a.createElement(j.a,{buttonProps:{width:[1,.5]},handleClick:this.loadChart.bind(this)},"CALCULATE"))),h.a.createElement(f.h,{mt:[3,0],width:[1,.7],id:"estimated-earnings-chart"},this.props.isMobile?h.a.createElement(f.h,{width:1,flexDirection:"column"},null!==this.state.chartData&&this.state.chartData.map(function(t,n){return h.a.createElement(f.h,{py:2,my:2,width:1,flexDirection:"row",key:"earnings_".concat(n)},h.a.createElement(f.h,{width:.35,alignItems:"center",justifyContent:"flex-start"},h.a.createElement(f.u,{fontSize:1,fontWeight:3,color:"legend"},t.label)),h.a.createElement(f.h,{width:.65,position:"relative",alignItems:"center",minHeight:["20px","35px"],justifyContent:"center"},h.a.createElement(f.h,{zIndex:1,position:"relative",alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.u,{fontSize:1,fontWeight:3,color:"counter"},e.functionsUtil.abbreviateNumber(t.value,2,4)," ",e.props.selectedToken)),h.a.createElement(f.h,{right:0,width:t.perc,position:"absolute",height:["20px","35px"],borderRadius:["20px 0 0 20px","35px 0 0 35px"],style:{background:"linear-gradient(-90deg, rgba(".concat(t.color,",0) 0%, rgba(").concat(t.color,",1) 100%)")}})))})):h.a.createElement(C.a,Object.assign({type:y.a,height:250,showLoader:!0},this.state.chartProps,{data:this.state.chartData,parentId:"estimated-earnings-chart"})))))}}]),t}(p.Component),me=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={tokenApy:{},tokenFees:{},tokenBalance:{},tokenApproved:{},activeModal:null,idleTokenPrice:{},userHasFunds:!1,govTokensBalance:{},idleTokenBalance:{},redeemableBalance:{},govTokensDisabled:{},availableGovTokens:{},tokenFeesPercentage:{},componentMounted:!1,govTokensUserBalances:{}},n.functionsUtil=null,n.resetModal=function(){n.setState({activeModal:null})},n.setActiveModal=function(e){n.setState({activeModal:e})},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"loadTokensInfo",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h,d,m,f,g;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.account&&this.props.contractsInitialized){e.next=2;break}return e.abrupt("return",this.setState({userHasFunds:!1}));case 2:return t=Object(x.a)({},this.state),n=this.props.selectedToken,a=this.props.availableTokens[n],(i={})[n]=a,e.next=9,Promise.all([this.functionsUtil.getTokenFees(a),this.functionsUtil.getIdleTokenPrice(a),this.functionsUtil.getTokenApy(this.props.tokenConfig),this.functionsUtil.getTokenBalance(n,this.props.account),this.functionsUtil.getUserTokenFees(a,this.props.account),this.functionsUtil.getTokenBalance(a.idle.token,this.props.account),this.functionsUtil.checkTokenApproved(n,a.idle.address,this.props.account),this.functionsUtil.getGovTokensUserBalances(this.props.account,i,null,null),this.functionsUtil.getGovTokensUserTotalBalance(this.props.account,i,"DAI",!1)]);case 9:s=e.sent,r=Object(X.a)(s,9),l=r[0],c=r[1],u=r[2],p=r[3],h=r[4],d=r[5],m=r[6],f=r[7],g=r[8],t.tokenFees[n]=h,t.tokenBalance[n]=p,t.tokenApproved[n]=m,t.idleTokenPrice[n]=c,t.idleTokenBalance[n]=d,t.govTokensBalance[n]=g,t.tokenFeesPercentage[n]=l,t.govTokensUserBalances[n]=f,t.govTokensDisabled[n]=a.govTokensDisabled,t.tokenApy[n]=u&&!u.isNaN()?u:null,t.redeemableBalance[n]=d&&c?d.times(c):this.functionsUtil.BNify(0),t.availableGovTokens=this.functionsUtil.getTokenGovTokens(this.props.tokenConfig),t.componentMounted=!0,t.userHasFunds=this.props.account&&t.idleTokenBalance[n]&&this.functionsUtil.BNify(t.idleTokenBalance[n]).gt(0),this.setState(t);case 35:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUtils(),e.next=3,this.loadTokensInfo();case 3:window.loadTokensInfo=this.loadTokensInfo.bind(this);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),a=t.account!==this.props.account,i=t.selectedToken!==this.props.selectedToken,s=JSON.stringify(t.availableTokens)!==JSON.stringify(this.props.availableTokens),r=t.transactions&&this.props.transactions&&Object.values(t.transactions).filter(function(e){return"success"===e.status}).length!==Object.values(this.props.transactions).filter(function(e){return"success"===e.status}).length,(a||r||s||i)&&this.loadTokensInfo();case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.functionsUtil.getRequiredNetwork(),n=this.functionsUtil.getGlobalConfig(["tools","nexusMutual"]);return h.a.createElement(f.b,{width:1},h.a.createElement(f.h,{width:1,mb:[3,4],alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},h.a.createElement(f.h,{width:.5},h.a.createElement(P.a,Object.assign({},this.props,{isMobile:this.props.isMobile,path:[this.props.selectedToken],handleClick:function(t){return e.props.goToSection(e.props.selectedStrategy)},text:this.functionsUtil.getGlobalConfig(["strategies",this.props.selectedStrategy,"title"])}))),h.a.createElement(f.h,{width:.5,justifyContent:"flex-end"},h.a.createElement(re.a,Object.assign({icon:"Add"},this.props,{text:"Add funds",handleClick:function(t){return e.setActiveModal("buy")}})))),h.a.createElement(v.a,{mb:[3,4]},"Deposit / Redeem"),137===t.id?h.a.createElement(f.h,{width:1,minHeight:"45vh",alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{p:3,width:[1,.5]}},h.a.createElement(f.h,{aligItems:"center",alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",color:"cellText",name:"AccessTime"}),h.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Hang on, please!",h.a.createElement("br",null),"The ",this.functionsUtil.getGlobalConfig(["strategies",this.props.selectedStrategy,"title"])," strategy has not yet been activated in Polygon."),h.a.createElement(j.a,{buttonProps:{mt:3,width:[1,.5]},handleClick:function(t){return e.props.goToSection("stake")}},"Go to Staking")))):h.a.createElement(h.a.Fragment,null,h.a.createElement(f.h,{width:1},h.a.createElement(ce,Object.assign({},this.props,{tokenFees:this.state.tokenFees[this.props.selectedToken],tokenBalance:this.state.tokenBalance[this.props.selectedToken],tokenApproved:this.state.tokenApproved[this.props.selectedToken],govTokensBalance:this.state.govTokensBalance[this.props.selectedToken],idleTokenBalance:this.state.idleTokenBalance[this.props.selectedToken],redeemableBalance:this.state.redeemableBalance[this.props.selectedToken],tokenFeesPercentage:this.state.tokenFeesPercentage[this.props.selectedToken],govTokensUserBalances:this.state.govTokensUserBalances[this.props.selectedToken]}))),this.state.userHasFunds&&n.enabled&&Object.keys(n.props.availableTokens).includes(this.props.tokenConfig.idle.token)&&h.a.createElement(f.h,{width:1,id:"active-coverages",flexDirection:"column"},h.a.createElement(ue.a,Object.assign({},this.props,{titleProps:{mb:3,mt:[3,4]},title:"Coverage",availableTokens:[this.props.tokenConfig.idle.token]}),h.a.createElement(f.h,{width:1,alignItems:"center",id:"no-active-cover",flexDirection:"column",justifyContent:"center"},h.a.createElement(E.a,{cardProps:{py:3,px:[3,4],width:[1,"auto"]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.k,{my:[0,2],size:"3em",name:n.icon}),h.a.createElement(f.u,{mb:1,fontSize:[2,3],fontWeight:500,textAlign:"center"},"You don't have an active coverage"),h.a.createElement(f.u,{mb:2,color:"link",fontSize:[1,2],fontWeight:500,textAlign:"center"},n.desc),h.a.createElement(j.a,{buttonProps:{mt:1,width:"auto",minHeight:"40px",mainColor:"redeem",size:this.props.isMobile?"small":"medium"},handleClick:function(t){return e.props.goToSection("tools/".concat(n.route,"/deposit/").concat(e.props.tokenConfig.idle.token))}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(f.u,{color:"white",fontSize:[1,2],fontWeight:500},"Get Covered"),h.a.createElement(f.k,{ml:1,size:"1.3em",name:"KeyboardArrowRight"})))))))),this.state.userHasFunds&&this.props.account&&h.a.createElement(f.h,{mb:[0,4],width:1,flexDirection:"column",id:"funds-overview-container"},h.a.createElement(v.a,{my:[3,4]},"Funds Overview"),h.a.createElement(Q,Object.assign({},this.props,{tokenFees:this.state.tokenFees[this.props.selectedToken]}))),this.state.userHasFunds&&this.props.account&&!this.state.govTokensDisabled[this.props.selectedToken]&&Object.keys(this.state.availableGovTokens).length>0&&h.a.createElement(f.h,{width:1,id:"yield-farming",flexDirection:"column"},h.a.createElement(v.a,{my:[3,4]},"Yield Farming"),h.a.createElement(I.a,Object.assign({enabledTokens:Object.keys(this.state.availableGovTokens),cols:[{title:"TOKEN",props:{width:[.3,.15]},fields:[{name:"icon",props:{mr:2,height:["1.4em","2.3em"]}},{name:"tokenName"}]},{mobile:!1,title:"BALANCE",props:{width:[.33,.25]},fields:[{name:"tokenBalance",props:{decimals:this.props.isMobile?6:8}}]},{title:"REDEEMABLE",desc:this.functionsUtil.getGlobalConfig(["messages","govTokenRedeemableBalance"]),props:{width:[.35,.3],justifyContent:["center","flex-start"]},fields:[{name:"redeemableBalance",props:{decimals:this.props.isMobile?6:8}}]},{title:"DISTRIBUTION",desc:this.functionsUtil.getGlobalConfig(["messages","userDistributionSpeed"]),props:{width:[.35,.3]},fields:[{name:"userDistributionSpeed",props:{decimals:6}}]}]},this.props,{availableTokens:this.state.availableGovTokens}))),this.props.account&&this.state.tokenApy[this.props.selectedToken]&&h.a.createElement(f.h,{mb:[3,4],width:1,flexDirection:"column",id:"estimated-earnings-container"},h.a.createElement(v.a,{my:[3,4]},"Estimated earnings"),h.a.createElement(de,Object.assign({},this.props,{tokenApy:this.state.tokenApy[this.props.selectedToken]}))),this.props.account&&h.a.createElement(f.h,{mb:[3,4],width:1,flexDirection:"column",id:"transactions-container"},h.a.createElement(v.a,{my:[3,4]},"Transactions"),h.a.createElement(pe.a,Object.assign({},this.props,{enabledTokens:[this.props.selectedToken],cols:[{title:this.props.isMobile?"":"HASH",props:{width:[.15,.24]},fields:[{name:"icon",props:{mr:[0,2]}},{name:"hash",mobile:!1}]},{title:"ACTION",mobile:!1,props:{width:.15},fields:[{name:"action"}]},{title:"DATE",props:{width:[.32,.23]},fields:[{name:"date"}]},{title:"STATUS",props:{width:[.18,.22],justifyContent:["center","flex-start"]},fields:[{name:"statusIcon",props:{mr:[0,2]}},{mobile:!1,name:"status"}]},{title:"AMOUNT",props:{width:.19},fields:[{name:"amount"}]},{title:"ASSET",props:{width:[.15,.2],justifyContent:["center","flex-start"]},fields:[{name:"tokenIcon",props:{mr:[0,2],height:["1.4em","1.6em"]}},{mobile:!1,name:"tokenName"}]}]})))),h.a.createElement(K.a,Object.assign({},this.props,{closeModal:this.resetModal,buyToken:this.props.selectedToken,isOpen:"buy"===this.state.activeModal})))}}]),t}(p.Component),fe=n(5091),ge=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={},n.functionsUtil=null,n.componentDidUpdate=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.loadUtils();case 1:case"end":return e.stop()}},e,this)})),n.closeModal=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.functionsUtil.setLocalStorage("betaApproved",!0),n.props.closeModal();case 2:case"end":return e.stop()}},e,this)})),n.loadUtils(),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}}]),Object(r.a)(t,[{key:"render",value:function(){return h.a.createElement(f.p,{isOpen:this.props.isOpen},h.a.createElement(H.a,{maxWidth:["960px","650px"],closeFunc:this.props.closeModal},h.a.createElement(H.a.Header,{pt:3,iconHeight:"40px",title:"Beta Version",icon:"images/warning.svg"}),h.a.createElement(H.a.Body,null,h.a.createElement(f.h,{width:1,flexDirection:"column"},h.a.createElement(f.u,{fontSize:2,textAlign:"left",color:"dark-gray"},"You're about to enter Idle Finance Beta Dashboard \u2013 this is the place where several un-audited and risky features are being tested!",h.a.createElement("br",null),"Please use at your own risk, or visit the official website at ",h.a.createElement(f.n,{fontSize:2,mainColor:"primary",hoverColor:"primary",href:this.functionsUtil.getGlobalConfig(["baseURL"])},this.functionsUtil.getGlobalConfig(["baseURL"])),".")),h.a.createElement(f.h,{my:3,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(j.a,{handleClick:this.closeModal,buttonProps:{width:["100%","40%"]}},"Continue Anyway")))))}}]),t}(h.a.Component),be=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={processing:{txHash:null,loading:!1},inputValue:null,maxSlippage:.2,depositSlippage:null,redeemableBalance:null,migrationContract:null,curveTokensBalance:null,migrationSucceeded:!1,fastBalanceSelector:null,migrationContractApproved:!1},n.functionsUtil=null,n.changeInputValue=function(e){var t=e.target.value.length&&!isNaN(e.target.value)?n.functionsUtil.BNify(e.target.value):n.functionsUtil.BNify(0);n.checkButtonDisabled(t);n.setState(function(e){return{inputValue:t,fastBalanceSelector:null}})},n.setInputValue=function(){if(null===n.state.fastBalanceSelector)return!1;var e=n.functionsUtil.BNify(n.state.fastBalanceSelector).div(100),t=n.props.idleTokenBalance?n.functionsUtil.BNify(n.props.idleTokenBalance).times(e):null;n.checkButtonDisabled(t),n.setState({inputValue:t})},n.getFastBalanceSelector=function(){return null!==n.state.fastBalanceSelector&&n.functionsUtil.BNify(n.state.fastBalanceSelector).div(100)},n.setFastBalanceSelector=function(e){n.setState({fastBalanceSelector:e})},n.checkButtonDisabled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=n.state.inputValue);var t=!e||e.gt(n.state.idleTokenBalance);n.setState({buttonDisabled:t})},n.approve=Object(i.a)(o.a.mark(function e(){var t,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n.state.migrationContract)){e.next=6;break}return e.next=4,n.checkMigrationContractApproved();case 4:e.sent?n.setState({migrationContractApproved:!0}):(a=function(e,t){var a={eventAction:"approve",eventCategory:"CurveDeposit",eventLabel:e?e.status:null},o=e&&"success"===e.status;t&&(a.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==a.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(a),n.setState(function(e){return{migrationContractApproved:o,processing:Object(x.a)({},e.processing,{txHash:null,loading:!1})}}),"function"===typeof n.props.callbackApprove&&o&&n.props.callbackApprove(e),n.checkMigration()},i=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,{txHash:t})}})},n.functionsUtil.enableERC20(n.props.selectedToken,t.address,a,i),n.setState(function(e){return{processing:Object(x.a)({},e.processing,{txHash:null,loading:!0}),migrationContractApproved:!1}}));case 6:case"end":return e.stop()}},e,this)})),n.deposit=Object(i.a)(o.a.mark(function e(){var t,a,i,s,r,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.inputValue?n.functionsUtil.BNify(n.state.inputValue):null){e.next=3;break}return e.abrupt("return",!1);case 3:return a=function(e,a){var o="success"===e.status,i={eventLabel:e.status,eventCategory:"CurveDeposit",eventAction:n.props.selectedToken,eventValue:t.toFixed()};a&&(i.eventLabel=n.functionsUtil.getTransactionError(a)),(a||"error"!==i.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(i),n.setState(function(e){return{processing:{txHash:null,loading:!1}}}),"function"===typeof n.props.callbackDeposit&&o&&n.props.callbackDeposit(e)},i=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,{txHash:t})}})},s=n.state.migrationContract.name,r=n.functionsUtil.normalizeTokenAmount(t,n.props.tokenConfig.decimals),e.next=9,n.getMigrationParams(r);case 9:l=e.sent,n.props.contractMethodSendWrapper(s,"add_liquidity",l,null,a,i),n.setState(function(e){return{processing:Object(x.a)({},e.processing,{loading:!0})}});case 12:case"end":return e.stop()}},e,this)})),n.cancelTransaction=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return e.stop()}},e,this)})),n.setMaxSlippage=function(e){n.setState({maxSlippage:e})},n.approveCallback=function(){n.initToken()},n.migrationCallback=function(){n.setState({migrationSucceeded:!0})},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initToken();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadUtils(),a=t.account!==this.props.account,i=t.idleTokenBalance!==this.props.idleTokenBalance,!a&&!i){e.next=6;break}return e.next=6,this.initToken();case 6:this.state.fastBalanceSelector!==n.fastBalanceSelector&&this.setInputValue(),this.state.inputValue!==n.inputValue&&this.calculateSlippage();case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMigrationParams",value:function(){var e=Object(i.a)(o.a.mark(function e(t){var n,a,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=this.functionsUtil.getGlobalConfig(["curve","availableTokens",this.props.selectedToken])){e.next=4;break}return e.abrupt("return",!1);case 4:if(!a.migrationParams.n_coins){e.next=15;break}return e.next=8,this.functionsUtil.getCurveAmounts(this.props.selectedToken,t,!0);case 8:return i=e.sent,e.next=11,this.functionsUtil.getCurveTokenAmount(i);case 11:s=e.sent,this.state.maxSlippage&&(s=(s=this.functionsUtil.BNify(s)).minus(s.times(this.functionsUtil.BNify(this.state.maxSlippage).div(100))),s=this.functionsUtil.integerValue(s)),n.push(i),n.push(s);case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"calculateSlippage",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.inputValue?this.functionsUtil.BNify(this.state.inputValue):null)){e.next=17;break}if(!(n=t)){e.next=10;break}return e.next=6,this.functionsUtil.getIdleTokenPrice(this.props.tokenConfig);case 6:(a=e.sent)&&(n=n.times(a)),e.next=11;break;case 10:n=this.functionsUtil.BNify(0);case 11:return i=this.functionsUtil.normalizeTokenAmount(n,this.props.tokenConfig.decimals),e.next=14,this.functionsUtil.getCurveSlippage(this.props.tokenConfig.idle.token,i);case 14:(s=e.sent)&&(s=s.times(100)),this.setState({depositSlippage:s});case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkMigrationContractApproved",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.state.migrationContract,e.t0){e.next=5;break}return e.next=4,this.functionsUtil.getCurveSwapContract();case 4:e.t0=e.sent;case 5:if(!(t=e.t0)){e.next=10;break}return e.next=9,this.functionsUtil.checkTokenApproved(this.props.tokenConfig.idle.token,t.address,this.props.account);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initToken",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.functionsUtil.getCurveSwapContract();case 2:return t=e.sent,e.next=5,this.checkMigrationContractApproved();case 5:n=e.sent,this.setState({migrationContract:t,migrationContractApproved:n});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.props.selectedToken)return null;var t=this.state.curveTokensBalance&&this.state.curveTokensBalance.gt(0);return h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.h,{width:[1,.36],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},this.props.idleTokenBalance&&this.props.idleTokenBalance.gt(0)&&h.a.createElement(f.b,{width:1},h.a.createElement(E.a,{cardProps:{p:3,px:[2,4]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"row"},h.a.createElement(f.k,{size:"1.5em",name:this.state.migrationContractApproved?"CheckBox":"LooksOne",color:this.state.migrationContractApproved?this.props.theme.colors.transactions.status.completed:"cellText"}),h.a.createElement(f.u,{ml:2,fontSize:2,color:"cellText",textAlign:"left"},"Approve the Curve contract")),h.a.createElement(f.h,{mt:2,width:1,alignItems:"center",flexDirection:"row"},h.a.createElement(f.k,{size:"1.5em",name:t?"CheckBox":"LooksTwo",color:t?this.props.theme.colors.transactions.status.completed:"cellText"}),h.a.createElement(f.u,{ml:2,fontSize:2,color:"cellText",textAlign:"left"},"Deposit your ",this.props.tokenConfig.idle.token)))),this.state.migrationContractApproved?this.state.processing.loading?h.a.createElement(f.h,{mt:3,flexDirection:"column"},h.a.createElement(D.a,{web3:this.props.web3,waitText:"Deposit estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing deposit request...",cancelTransaction:this.cancelTransaction.bind(this)})):h.a.createElement(f.b,{mt:2,width:1},h.a.createElement(f.h,{alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,null,"Choose max slippage:"),h.a.createElement(f.y,{placement:"top",message:"Max additional slippage on top of the one shown below"},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"}))),h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},[.2,.5,1,5].map(function(t){return h.a.createElement(oe.a,{cardProps:{p:1},textProps:{fontSize:1},percentage:t,key:"selector_".concat(t),onMouseDown:function(){return e.setMaxSlippage(t)},isActive:e.state.maxSlippage===parseFloat(t)})})),h.a.createElement(f.h,{mt:2,mb:3,width:1,flexDirection:"column"},h.a.createElement(f.h,{mb:1,alignItems:"center",flexDirection:"row",justifyContent:this.state.depositSlippage?"space-between":"flex-end"},this.state.depositSlippage&&h.a.createElement(f.h,{width:1,maxWidth:"50%",alignItems:"center",flexDirection:"row"},h.a.createElement(f.u,{fontSize:1,fontWeight:3,textAlign:"right",style:{whiteSpace:"nowrap"},color:parseFloat(this.state.depositSlippage.toFixed(3))>0?this.props.theme.colors.transactions.status.failed:this.props.theme.colors.transactions.status.completed},0===parseFloat(this.state.depositSlippage.toFixed(3))?"No Slippage":"".concat(this.state.depositSlippage.gt(0)?"Slippage: ":"Bonus: "," ").concat(this.state.depositSlippage.abs().toFixed(3),"%")),h.a.createElement(f.y,{placement:"top",message:this.state.depositSlippage.gt(0)?"Slippage comes from depositing too many coins not in balance, and current coin prices are additionally accounted for":"Bonus comes as an advantage from current coin prices which usually appears for coins which are high in balance"},h.a.createElement(f.k,{ml:1,size:"1em",color:"cellTitle",name:"InfoOutline"}))),this.props.idleTokenBalance&&h.a.createElement(f.h,{width:1,maxWidth:"50%",alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},h.a.createElement(f.n,{fontSize:1,fontWeight:3,color:"dark-gray",textAlign:"right",hoverColor:"copyColor",onClick:function(t){return e.setFastBalanceSelector(100)},style:{maxWidth:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},this.props.idleTokenBalance.toFixed(this.props.isMobile?2:4)," ",this.props.selectedToken))),h.a.createElement(f.m,{min:0,type:"number",required:!0,height:"3.4em",borderRadius:2,fontWeight:500,boxShadow:"none !important",placeholder:"Insert amount",onChange:this.changeInputValue.bind(this),border:"1px solid ".concat(this.props.theme.colors.divider),value:null!==this.state.inputValue?this.functionsUtil.BNify(this.state.inputValue).toFixed():""}),h.a.createElement(f.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},[25,50,75,100].map(function(t){return h.a.createElement(oe.a,{percentage:t,key:"selector_".concat(t),onMouseDown:function(){return e.setFastBalanceSelector(t)},isActive:e.state.fastBalanceSelector===parseInt(t)})})),h.a.createElement(f.h,{mt:2,justifyContent:"center"},h.a.createElement(j.a,{buttonProps:{mt:2,width:[1,.5],disabled:this.state.buttonDisabled},handleClick:this.deposit.bind(this)},"Deposit")))):this.state.processing.loading?h.a.createElement(f.h,{mt:3,flexDirection:"column"},h.a.createElement(D.a,{web3:this.props.web3,waitText:"Approve estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing approve request...",cancelTransaction:this.cancelTransaction.bind(this)})):h.a.createElement(E.a,{cardProps:{p:3,mt:3}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",name:"LockOpen",color:"cellText"}),h.a.createElement(f.u,{mt:1,fontSize:2,color:"cellText",textAlign:"center"},"To deposit your ",this.props.selectedToken," in the Curve Pool you need to approve the Smart-Contract first."),h.a.createElement(j.a,{buttonProps:{mt:3,width:[1,.5]},handleClick:this.approve.bind(this)},"Approve"))))))}}]),t}(p.Component),ke=n(773),ve=n(501),xe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={startDate:null,chartData:null,chartProps:null,chartwidth:null,chartHeight:null},n.functionsUtil=null,n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),this.loadChartData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils(),a=t.quickDateSelection!==this.props.quickDateSelection,(JSON.stringify(t.enabledTokens)!==JSON.stringify(this.props.enabledTokens)||a)&&this.setState({chartData:null},function(){i.componentDidMount()}),t.isMobile!==this.props.isMobile&&this.loadChartData();case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadChartData",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,d,m,f,g,b,k,v,x,y,w,T,C,E,S,U,M,j,D,O,A,I,P,B=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.props.enabledTokens)&&t.length||(t=Object.keys(this.props.availableTokens)),e.next=4,this.functionsUtil.getCurveTxs(this.props.account,0,"latest",t);case 4:n=e.sent,a=[],i=[],s={},r=null,l=this.functionsUtil.BNify(0),c=this.functionsUtil.getGlobalConfig(["curve","poolContract"]),n&&n.length&&n.forEach(function(e,t){if(s[e.hash]||(s[e.hash]=[]),!s[e.hash].includes(e.action)){r=r?Math.min(r,parseInt(e.timeStamp)):parseInt(e.timeStamp);var n=B.functionsUtil.BNify(e.curveTokens);switch(e.action){case"CurveIn":case"CurveZapIn":case"CurveDepositIn":case"CurveTransferIn":l=l.plus(n);break;case"CurveOut":case"CurveZapOut":case"CurveDepositOut":case"CurveTransferOut":l=l.minus(n)}l.lt(0)&&(l=B.functionsUtil.BNify(0));var a=e.action,o=l,u=parseInt(e.timeStamp),p=B.functionsUtil.fixTokenDecimals(e.curveTokenPrice,c.decimals);p.isNaN()||p.isNaN()||(i.push({action:a,balance:o,timeStamp:u,curveTokens:n,curveTokenPrice:p}),s[e.hash].push(a))}}),u=null,p=this.functionsUtil.strToMoment(new Date),e.t0=this.props.quickDateSelection,e.next="week"===e.t0?17:"month"===e.t0?19:"month3"===e.t0?21:"month6"===e.t0?23:25;break;case 17:return u=p.clone().subtract(1,"week"),e.abrupt("break",27);case 19:return u=p.clone().subtract(1,"month"),e.abrupt("break",27);case 21:return u=p.clone().subtract(3,"month"),e.abrupt("break",27);case 23:return u=p.clone().subtract(6,"month"),e.abrupt("break",27);case 25:return u=null,e.abrupt("break",27);case 27:return d={},m={},f=null,g=null,b=null,k={},v={},x=this.functionsUtil.BNify(0),y=parseInt((new Date).getTime()/1e3)+86400,e.next=38,this.functionsUtil.getTokenApiData(Object.values(this.props.availableTokens)[0].address,!1,r,null,!1,3600);case 38:w=e.sent,T=o.a.mark(function e(t){var n,a,s,l,p,h,T,E,S,U,M,j,D;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},a={},t=Math.min(y,t),s=B.functionsUtil.strToMoment(1e3*t),l=w.filter(function(e){return e.timestamp>=f&&e.timestamp<=t}),(p=i.filter(function(e){return e.timeStamp<=t&&(!f||e.timeStamp>f)})).length){e.next=21;break}if(!m){e.next=20;break}if(p=m,h=Object.values(p).pop(),T=parseFloat(h.balance),E=Object.values(l).pop(),S=null,!E){e.next=17;break}return e.next=16,B.functionsUtil.getCurveTokenPrice(E.blocknumber);case 16:S=e.sent;case 17:T>0&&t>r&&S&&(h.curveTokenPrice=S,p=[h]),e.next=21;break;case 20:p=[{balance:B.functionsUtil.BNify(0),curveTokenPrice:B.functionsUtil.BNify(0)}];case 21:U=Object.assign([],p).pop(),M=B.functionsUtil.BNify(U.balance).times(U.curveTokenPrice),a[c.token]=B.functionsUtil.BNify(U.balance),x=M,n=p,(null===u||s.isSameOrAfter(u))&&(s.isAfter(new Date,"day")&&(s=B.functionsUtil.strToMoment(new Date)),j=s.format("YYYY/MM/DD 00:00"),d[s.format("YYYY/MM/DD")]=1,D=parseFloat(parseFloat(x.toFixed(6))),k[j]=D,v[j]=a,g=null===g?D:Math.min(g,D),b=null===b?D:Math.max(b,D)),f=t,m=n,C=t;case 30:case"end":return e.stop()}},e,this)}),C=r;case 41:if(!(C<=y)){e.next=46;break}return e.delegateYield(T(C),"t1",43);case 43:C+=this.props.frequencySeconds,e.next=41;break;case 46:for(E=Object.keys(k).map(function(e){return{x:e,y:k[e],balances:v[e]}}),S=0,E.forEach(function(e,t){var n=Math.floor(S/E.length*100);E[t].itemPos=n,S++}),a.push({id:"USD",color:"hsl("+this.functionsUtil.getGlobalConfig(["stats","tokens","USD","color","hsl"]).join(",")+")",data:E}),U=2,b-g<1&&(U=4),b===g&&(g=Math.max(0,b-1)),5,M=(b-g)/5,j=[],D=0;D<=5;D++)O=parseFloat(parseFloat(g+D*M).toFixed(6)),j.push(O);10,A=Object.values(d).length,I=Math.max(1,Math.ceil(A/10)),P={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},yScale:{type:"linear",stacked:!1,min:g,max:b},xFormat:"time:%b %d %Y",yFormat:function(e){return B.functionsUtil.formatMoney(e,U)},axisBottom:this.props.isMobile?null:{legend:"",tickSize:0,format:"%b %d",tickPadding:15,orient:"bottom",legendOffset:36,legendPosition:"middle",tickValues:"every "+I+" days"},gridYValues:j,pointSize:0,useMesh:!0,axisLeft:this.props.isMobile?null:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:j,legendPosition:"middle",format:function(e){return B.functionsUtil.abbreviateNumber(e,2)}},animate:!0,pointLabel:"y",areaOpacity:.1,enableArea:!0,enableSlices:"x",enableGridY:!0,curve:"monotoneX",enableGridX:!1,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,areaBaselineValue:g,pointColor:{from:"color",modifiers:[]},theme:{axis:{ticks:{text:{fontSize:12,fontWeight:600,fill:he.a.colors.legend,fontFamily:he.a.fonts.sansSerif}}},grid:{line:{stroke:"#dbdbdb",strokeDasharray:"8 4"}}},margin:this.props.isMobile?{top:20,right:25,bottom:25,left:20}:{top:30,right:50,bottom:45,left:50},sliceTooltip:function(e){var t=e.slice.points[0];return h.a.createElement(ke.a,{point:t},h.a.createElement(ve.a,{color:t.color,label:t.serieId,value:"$ ".concat(t.data.yFormatted)}),"object"===typeof t.data.balances&&Object.keys(t.data.balances).length>0&&Object.keys(t.data.balances).map(function(e){if(e===t.serieId)return null;var n=B.functionsUtil.getGlobalConfig(["stats","tokens",e]);if(n){var a=n.name?n.name:e,o=n.color.hex,i=t.data.balances[e],s=B.functionsUtil.formatMoney(i,2);if(parseFloat(i)>=.01)return h.a.createElement(ve.a,{label:a,color:o,key:"row_".concat(e),value:"".concat(s)})}return null}))}},this.setState({chartData:a,chartProps:P});case 62:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return h.a.createElement(C.a,Object.assign({type:w.a,showLoader:!0},this.state.chartProps,{data:this.state.chartData,parentId:this.props.parentId,height:this.props.chartHeight,parentIdHeight:this.props.parentIdHeight}))}}]),t}(p.Component),ye=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={compAPR:null,aggregatedValues:[],govTokensUserBalance:null},n.functionsUtil=null,n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.functionsUtil.getCurveAvgBuyPrice();case 2:return e.next=4,this.functionsUtil.getCurveAvgSlippage();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return h.a.createElement(f.h,{width:1,flexDirection:"column"},this.state.aggregatedValues.length>0&&h.a.createElement(f.h,{width:1,mb:[0,3],mt:[2,0],alignItems:"center",flexDirection:["column","row"],justifyContent:"space-between"},this.state.aggregatedValues.map(function(e,t){return h.a.createElement(f.h,Object.assign({},e.flexProps,{flexDirection:"column",key:"aggregatedValue_".concat(t)}),h.a.createElement(E.a,{cardProps:{py:[2,3],mb:[3,0]}},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},e.props.children?e.props.children:h.a.createElement(f.u,{lineHeight:1,fontWeight:[3,4],color:"copyColor",fontFamily:"counter",fontSize:[4,"1.7em"],dangerouslySetInnerHTML:{__html:e.props.value}}),h.a.createElement(f.u,{mt:2,fontWeight:2,fontSize:[1,2],color:"cellText"},e.props.title))))})),h.a.createElement(E.a,{cardProps:{px:2,py:3}},h.a.createElement(f.h,{width:1,ml:[0,3],id:"funds-overview"},h.a.createElement(xe,Object.assign({},this.props,{chartHeight:350,parentId:"funds-overview",frequencySeconds:this.functionsUtil.getFrequencySeconds("day",1)}))),h.a.createElement(f.h,{width:1,flexDirection:["column","row"]},h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Deposited"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"amountLentCurve",props:{decimals:4,maxPrecision:8,fontWeight:300,fontSize:["1.8em","1.9em"],color:he.a.colors.counter,flexProps:{justifyContent:"center"}}}}))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Redeemable"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"redeemableBalanceCounterCurve",props:{decimals:7,maxPrecision:8,style:{fontWeight:300,color:he.a.colors.counter,fontSize:this.props.isMobile?"1.8em":"1.9em"},flexProps:{justifyContent:"center"}}}})),h.a.createElement(f.h,{width:1,mt:"-9px"},h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"earningsPercCurve",props:{fontSize:1,fontWeight:2,color:"cellText",flexProps:{justifyContent:"center"}}}})))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Earnings"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"earningsCounterCurve",props:{decimals:7,maxPrecision:8,style:{fontWeight:300,fontSize:this.props.isMobile?"1.8em":"1.9em",color:he.a.colors.counter},flexProps:{justifyContent:"center"}}}}))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Current APY"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"curveApy",props:{decimals:2,fontWeight:300,fontSize:["1.8em","1.9em"],color:he.a.colors.counter,flexProps:{justifyContent:"center"}}}}))),h.a.createElement(f.h,{mb:[2,0],width:[1,.2],alignItems:"center",flexDirection:"column",justifyContent:"flex-start"},h.a.createElement(v.a,{mb:2,fontSize:[3,4],component:f.j.h3},"Avg Slippage"),h.a.createElement($.a,Object.assign({},this.props,{token:this.props.selectedToken,fieldInfo:{name:"curveAvgSlippage",props:{decimals:2,fontWeight:300,fontSize:["1.8em","1.9em"],color:he.a.colors.counter,flexProps:{justifyContent:"center"}}}}))))))}}]),t}(p.Component),we=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:{},processing:{},tokenFees:null,canRedeem:null,canDeposit:null,action:"deposit",activeModal:null,tokenConfig:null,tokenBalance:null,tokenApproved:null,selectedToken:null,availableTokens:{},redeemBalance:null,depositBalance:null,buttonDisabled:!1,curveTokenPrice:null,depositSlippage:null,idleTokenBalance:null,withdrawSlippage:null,govTokensBalance:null,curveZapContract:null,curveTokenConfig:null,curveTokensAmounts:{},govTokensDisabled:null,componentMounted:!1,curvePoolContract:null,curveSwapContract:null,curveTokenBalance:null,redeemableBalance:null,fastBalanceSelector:{},curveAvailableTokens:{},tokenFeesPercentage:null,redeemUnevenAmounts:!1,curveDepositContract:null},n.functionsUtil=null,n.resetModal=function(){n.setState({activeModal:null})},n.setActiveModal=function(e){n.setState({activeModal:e})},n.toggleUnevenAmounts=function(e){n.setState({redeemUnevenAmounts:e})},n.changeFromToken=function(e){var t=n.functionsUtil.getGlobalConfig(["curve"]);n.props.goToSection("".concat(t.params.route,"/").concat(e))},n.setSelectedToken=function(){var e=Object(i.a)(o.a.mark(function e(t){var a,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.functionsUtil.getCurveAvailableTokens(),i=n.functionsUtil.getGlobalConfig(["curve","availableTokens"]),s=i[t],r=a[s.baseToken],n.setState({tokenConfig:r,selectedToken:t,availableTokens:a,curveTokenConfig:s});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.loadTokensInfo=Object(i.a)(o.a.mark(function e(){var t,a,i,s,r,l,c,u,p,h,d,m,f,g;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.functionsUtil.getGlobalConfig(["curve","availableTokens"]),n.setState({curveAvailableTokens:t}),!(a=n.getSelectedToken())||a===n.props.urlParams.param1){e.next=10;break}return n.changeFromToken(a),e.next=7,n.setSelectedToken(a);case 7:return e.abrupt("return",e.sent);case 10:if(a===n.state.selectedToken){e.next=13;break}return e.next=13,n.setSelectedToken(a);case 13:return i=Object(x.a)({},n.state),s=n.functionsUtil.getCurveAvailableTokens(),i.selectedToken!==a&&(i.selectedToken=a),r=t[a],l=s[r.baseToken],e.next=20,Promise.all([n.functionsUtil.getCurveZapContract(),n.functionsUtil.getCurvePoolContract(),n.functionsUtil.getCurveSwapContract(),n.functionsUtil.getCurveDepositContract()]);case 20:if(c=e.sent,u=Object(X.a)(c,4),p=u[0],h=u[1],d=u[2],m=u[3],i.curveZapContract=p,i.curvePoolContract=h,i.curveSwapContract=d,i.curveDepositContract=m,i.availableTokens=s,{}[a]=l,i.tokenConfig=l,i.curveTokenConfig=r,!n.props.account){e.next=57;break}return e.next=38,Promise.all([n.functionsUtil.getCurveTokenPrice(),n.functionsUtil.getCurveTokenBalance(),n.functionsUtil.getTokenFees(l),n.functionsUtil.getUserTokenFees(l,n.props.account),n.functionsUtil.getTokenBalance(a,n.props.account),n.functionsUtil.getTokenBalance(l.idle.token,n.props.account),n.functionsUtil.checkTokenApproved(a,m.address,n.props.account)]);case 38:f=e.sent,g=Object(X.a)(f,7),i.curveTokenPrice=g[0],i.curveTokenBalance=g[1],i.tokenFeesPercentage=g[2],i.tokenFees=g[3],i.tokenBalance=g[4],i.idleTokenBalance=g[5],i.tokenApproved=g[6],i.processing={redeem:{txHash:null,loading:!1},deposit:{txHash:null,loading:!1},approve:{txHash:null,loading:!1}},i.inputValue={redeem:null,deposit:null},i.fastBalanceSelector={redeem:null,deposit:null},i.componentMounted=!0,i.depositBalance=i.tokenBalance,i.redeemBalance=i.redeemableBalance,i.govTokensDisabled=l.govTokensDisabled,i.canRedeem=i.curveTokenBalance&&i.curveTokenBalance.gt(0),i.canDeposit=i.idleTokenBalance&&i.idleTokenBalance.gt(0),i.redeemableBalance=i.curveTokenBalance?i.curveTokenBalance.times(i.curveTokenPrice):n.functionsUtil.BNify(0);case 57:n.setState(i);case 58:case"end":return e.stop()}},e,this)})),n.updateAssetSelector=Object(i.a)(o.a.mark(function e(){var t,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},e.t0=n.state.action,e.next="deposit"===e.t0?4:"redeem"===e.t0?6:12;break;case 4:return n.loadTokensInfo(),e.abrupt("break",13);case 6:return a=n.functionsUtil.getGlobalConfig(["curve","poolContract"]),t.curveAvailableTokens={},t.curveTokenConfig=a,t.selectedToken=a.token,t.curveAvailableTokens[a.token]=a,e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:n.setState(t);case 14:case"end":return e.stop()}},e,this)})),n.getFastBalanceSelector=function(){return null!==n.state.fastBalanceSelector[n.state.action]&&n.functionsUtil.BNify(n.state.fastBalanceSelector[n.state.action]).div(100)},n.setFastBalanceSelector=function(e){if(!n.state.action)return!1;n.setState(function(t){return{fastBalanceSelector:Object(x.a)({},t.fastBalanceSelector,Object(te.a)({},n.state.action,e))}})},n.setInputValue=function(){if(!n.state.action||null===n.state.fastBalanceSelector[n.state.action])return!1;var e=n.functionsUtil.BNify(n.state.fastBalanceSelector[n.state.action]).div(100),t=null;switch(n.state.action){case"deposit":t=n.state.tokenBalance?n.functionsUtil.BNify(n.state.tokenBalance).times(e):null;break;case"redeem":t=n.state.redeemUnevenAmounts?n.state.curveTokenBalance?n.functionsUtil.BNify(n.state.curveTokenBalance).times(e):null:n.state.redeemableBalance?n.functionsUtil.BNify(n.state.redeemableBalance).times(e):null}n.checkButtonDisabled(t),n.setState(function(e){return{inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,t))}})},n.changeInputValue=function(e){if(!n.state.action)return!1;var t=e.target.value.length&&!isNaN(e.target.value)?n.functionsUtil.BNify(e.target.value):n.functionsUtil.BNify(0);n.checkButtonDisabled(t),n.setState(function(e){return{fastBalanceSelector:Object(x.a)({},e.fastBalanceSelector,Object(te.a)({},n.state.action,null)),inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,t))}})},n.checkButtonDisabled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!n.state.action)return!1;e||(e=n.state.inputValue[n.state.action]);var t=!1;switch(n.state.action){case"deposit":t=t||e&&e.gt(n.state.tokenBalance);break;case"redeem":t=n.state.redeemUnevenAmounts?!n.state.canRedeem||t||e&&e.gt(n.state.curveTokenBalance):!n.state.canRedeem||t||e&&e.gt(n.state.redeemableBalance)}n.setState({buttonDisabled:t})},n.cancelTransaction=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({approve:{txHash:null,loading:!1}},n.state.action,{txHash:null,loading:!1}))}});case 1:case"end":return e.stop()}},e,this)})),n.approveToken=Object(i.a)(o.a.mark(function e(){var t,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n.state.tokenApproved)){e.next=3;break}return e.abrupt("return",n.setState(function(e){return{tokenApproved:t,processing:Object(x.a)({},e.processing,{approve:{txHash:null,loading:!1}})}}));case 3:a=function(e,t){var a={eventCategory:"Approve",eventAction:n.state.selectedToken,eventLabel:e.status};t&&(a.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==a.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(a),n.setState(function(t){return{tokenApproved:"success"===e.status,processing:Object(x.a)({},t.processing,{approve:{txHash:null,loading:!1}})}})},i=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,{approve:Object(x.a)({},e.processing.approve,{txHash:t})})}})},n.functionsUtil.enableERC20(n.state.selectedToken,n.state.curveDepositContract.address,a,i),n.setState(function(e){return{processing:Object(x.a)({},e.processing,{approve:{txHash:null,loading:!0}})}});case 7:case"end":return e.stop()}},e,this)})),n.executeAction=Object(i.a)(o.a.mark(function e(){var t,a,i,s,r,l,c,u,p,h,d,m,f,g,b,k,v;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,a=n.state.inputValue[n.state.action],i=n.getFastBalanceSelector(),s=!0,e.t0=n.state.action,e.next="deposit"===e.t0?7:"redeem"===e.t0?23:56;break;case 7:if(!n.state.buttonDisabled&&a&&!n.functionsUtil.BNify(a).lte(0)){e.next=9;break}return e.abrupt("return",!1);case 9:return r=n.functionsUtil.normalizeTokenAmount(a,n.state.curvePoolContract.decimals),l=function(e,t){!e&&t&&(e={status:"error"});var o="error"===e.status,i="success"===e.status,s={eventCategory:"Deposit",eventAction:n.state.selectedToken,eventLabel:e.status,eventValue:parseInt(a)};t&&(s.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==s.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(s),n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,{txHash:null,loading:!1}))}}),i?n.setState(function(e){return{activeModal:"share",inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,n.functionsUtil.BNify(0)))}}):n.state.metaTransactionsEnabled&&o&&n.setState({txError:Object(te.a)({},n.state.action,!0)})},c=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,Object(x.a)({},e.processing[n.state.action],{txHash:t})))}})},e.next=14,n.functionsUtil.getCurveAmounts(n.state.tokenConfig.idle.token,r);case 14:return u=e.sent,e.next=17,n.functionsUtil.genericContractCall(n.state.curveSwapContract.name,"calc_token_amount",[u,!0]);case 17:return p=e.sent,h=[u,p],e.next=21,n.props.contractMethodSendWrapper(n.state.curveDepositContract.name,"add_liquidity",h,null,l,c);case 21:return t=e.sent,e.abrupt("break",58);case 23:if(!n.state.buttonDisabled&&a&&!n.functionsUtil.BNify(a).lte(0)){e.next=25;break}return e.abrupt("return",!1);case 25:if(d=null,!i){e.next=30;break}d=n.functionsUtil.BNify(n.state.curveTokenBalance).times(i),e.next=36;break;case 30:if(d=n.functionsUtil.BNify(n.functionsUtil.normalizeTokenAmount(a,n.state.curvePoolContract.decimals)),n.state.redeemUnevenAmounts){e.next=36;break}return e.next=34,n.functionsUtil.getCurveTokenPrice();case 34:m=e.sent,d=d.div(m);case 36:if(d){e.next=38;break}return e.abrupt("return",!1);case 38:return f=function(e,t){var a="success"===e.status,o={eventLabel:e.status,eventCategory:"CurveRedeem",eventAction:n.state.selectedToken,eventValue:d.toFixed()};t&&(o.eventLabel=n.functionsUtil.getTransactionError(t)),(t||"error"!==o.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(o),n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,{txHash:null,loading:!1}))}}),a&&n.setState(function(e){return{inputValue:Object(x.a)({},e.inputValue,Object(te.a)({},n.state.action,n.functionsUtil.BNify(0)))}})},g=function(e){var t=e.transactionHash;n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,Object(x.a)({},e.processing[n.state.action],{txHash:t})))}})},b=n.functionsUtil.normalizeTokenAmount(d,n.state.curvePoolContract.decimals).toString(),e.next=43,n.functionsUtil.getCurveAmounts(n.state.tokenConfig.idle.token,0);case 43:if(k=e.sent,v=n.state.curveDepositContract.name,!n.state.redeemUnevenAmounts){e.next=50;break}console.log("remove_liquidity_imbalance",n.functionsUtil.BNify(a).toString(),b.toString(),k),n.props.contractMethodSendWrapper(v,"remove_liquidity_imbalance",[k,b],null,f,g),e.next=55;break;case 50:return e.next=52,n.functionsUtil.getCurveAmounts(n.state.tokenConfig.idle.token,b);case 52:k=e.sent,console.log("remove_liquidity",n.functionsUtil.BNify(a).toString(),b.toString(),k),n.props.contractMethodSendWrapper(v,"remove_liquidity",[b,k],null,f,g);case 55:return e.abrupt("break",58);case 56:return s=!1,e.abrupt("break",58);case 58:!1!==t&&n.setState(function(e){return{processing:Object(x.a)({},e.processing,Object(te.a)({},n.state.action,Object(x.a)({},e.processing[n.state.action],{loading:s})))}});case 59:case"end":return e.stop()}},e,this)})),n.setAction=function(e){switch(e.toLowerCase()){case"deposit":break;case"redeem":n.state.canRedeem||(e=null);break;default:e=null}null!==e&&n.setState({action:e})},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"getSelectedToken",value:function(){var e=this.functionsUtil.getGlobalConfig(["curve","availableTokens"]);return this.props.urlParams.param1&&e[this.props.urlParams.param1]?this.props.urlParams.param1:Object.keys(e)[0]}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUtils(),e.next=3,this.loadTokensInfo();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"calculateSlippage",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.state.inputValue[this.state.action]?this.functionsUtil.BNify(this.state.inputValue[this.state.action]):null)&&!t.lte(0)){e.next=3;break}return e.abrupt("return",!1);case 3:n=this.functionsUtil.normalizeTokenAmount(t,this.state.curvePoolContract.decimals),a={},e.t0=this.state.action,e.next="deposit"===e.t0?8:"redeem"===e.t0?13:18;break;case 8:return a.depositBalance=t,e.next=11,this.functionsUtil.getCurveSlippage(this.state.tokenConfig.idle.token,n,!0);case 11:return a.depositSlippage=e.sent,e.abrupt("break",19);case 13:return a.redeemBalance=t,e.next=16,this.functionsUtil.getCurveSlippage(this.state.tokenConfig.idle.token,n,!0);case 16:return a.withdrawSlippage=e.sent,e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:this.setState(a);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i,s,r,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadUtils(),a=t.account!==this.props.account,i=t.urlParams.param1!==this.props.urlParams.param1,s=t.transactions&&this.props.transactions&&Object.values(t.transactions).filter(function(e){return"success"===e.status}).length!==Object.values(this.props.transactions).filter(function(e){return"success"===e.status}).length,!(a||s||i)){e.next=7;break}return e.next=7,this.loadTokensInfo();case 7:r=this.state.action!==n.action,l=this.state.redeemUnevenAmounts!==n.redeemUnevenAmounts,c=this.state.fastBalanceSelector[this.state.action]!==n.fastBalanceSelector[this.state.action],(r||c||l)&&this.setInputValue(),r&&this.updateAssetSelector(),n.inputValue[this.state.action]!==this.state.inputValue[this.state.action]&&this.calculateSlippage();case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.account&&this.state.curveTokenBalance&&this.functionsUtil.BNify(this.state.curveTokenBalance).gt(0);return h.a.createElement(f.b,{width:1},h.a.createElement(f.h,{width:1,mb:[3,4],alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},h.a.createElement(f.h,{width:.5},h.a.createElement(P.a,Object.assign({},this.props,{isMobile:this.props.isMobile,path:["Boost",this.state.selectedToken],handleClick:function(t){return e.props.goToSection("best")},text:this.functionsUtil.getGlobalConfig(["strategies","best","title"])})))),h.a.createElement(v.a,{mb:[3,4]},"Curve Pool"),h.a.createElement(f.h,{width:1},h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.h,{width:[1,.36],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},h.a.createElement(f.b,{width:1},h.a.createElement(f.u,{mb:1},"Select your asset:"),h.a.createElement(F.a,Object.assign({},this.props,{id:"token-from",onChange:this.changeFromToken,selectedToken:this.state.selectedToken,tokenConfig:this.state.curveTokenConfig,showBalance:"deposit"===this.state.action,availableTokens:this.state.curveAvailableTokens}))),h.a.createElement(f.b,{width:1},h.a.createElement(f.h,{mt:2,flexDirection:"column"},h.a.createElement(f.u,{mb:2},"Choose the action:"),h.a.createElement(f.h,{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},h.a.createElement(E.a,{cardProps:{p:[2,3],width:.48,onMouseDown:function(){e.setAction("deposit")}},isInteractive:!0,isActive:"deposit"===this.state.action},h.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(le.a,{transaction:{action:"deposit"},fieldInfo:{name:"icon",props:{mr:[1,3]}}}),h.a.createElement(f.u,{fontSize:3,fontWeight:3},"Deposit"))),h.a.createElement(E.a,{cardProps:{p:[2,3],width:.48,onMouseDown:function(){e.setAction("redeem")}},isInteractive:!0,isDisabled:!this.state.canRedeem,isActive:"redeem"===this.state.action},h.a.createElement(f.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},h.a.createElement(le.a,{transaction:{action:"redeem"},fieldInfo:{name:"icon",props:{mr:[1,3]}}}),h.a.createElement(f.u,{fontSize:3,fontWeight:3},"Redeem"))))))),h.a.createElement(f.h,{width:1,mt:this.props.account?3:0},"deposit"===this.state.action?h.a.createElement(be,Object.assign({},this.props,this.state)):"redeem"===this.state.action&&h.a.createElement(ie,Object.assign({},this.props,this.state))))),t&&h.a.createElement(f.h,{mb:[0,4],width:1,flexDirection:"column",id:"funds-overview-container"},h.a.createElement(v.a,{my:[3,4]},"Funds Overview"),h.a.createElement(ye,Object.assign({},this.props,{tokenFees:this.state.tokenFees,tokenConfig:this.state.tokenConfig,selectedToken:this.state.selectedToken,availableTokens:this.state.availableTokens,enabledTokens:Object.keys(this.state.availableTokens)}))),this.props.account&&h.a.createElement(f.h,{mb:[3,4],width:1,flexDirection:"column",id:"transactions-container"},h.a.createElement(v.a,{my:[3,4]},"Transactions"),h.a.createElement(pe.a,Object.assign({},this.props,{availableTokens:this.state.availableTokens,enabledTokens:Object.keys(this.state.availableTokens),enabledActions:["CurveIn","CurveOut","CurveZapIn","CurveZapOut","CurveTransferIn","CurveTransferOut","CurveDepositIn","CurveDepositOut"],cols:[{title:this.props.isMobile?"":"HASH",props:{width:[.15,.24]},fields:[{name:"icon",props:{mr:[0,2]}},{name:"hash",mobile:!1}]},{title:"ACTION",mobile:!1,props:{width:.15},fields:[{name:"action"}]},{title:"DATE",props:{width:[.32,.23]},fields:[{name:"date"}]},{title:"STATUS",props:{width:[.18,.22],justifyContent:["center","flex-start"]},fields:[{name:"statusIcon",props:{mr:[0,2]}},{mobile:!1,name:"status"}]},{title:"AMOUNT",props:{width:.19},fields:[{name:"amount"}]},{title:"ASSET",props:{width:[.15,.2],justifyContent:["center","flex-start"]},fields:[{name:"tokenIcon",props:{mr:[0,2],height:["1.4em","1.6em"]}},{mobile:!1,name:"tokenName"}]}]}))),h.a.createElement(K.a,Object.assign({},this.props,{closeModal:this.resetModal,buyToken:this.state.selectedToken,isOpen:"buy"===this.state.activeModal})))}}]),t}(p.Component),Te=n(85),Ce=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={},n.functionsUtil=null,n.componentDidUpdate=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.loadUtils();case 1:case"end":return e.stop()}},e,this)})),n.closeModal=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.functionsUtil.setLocalStorage("polygonApproved",!0),n.props.closeModal();case 2:case"end":return e.stop()}},e,this)})),n.loadUtils(),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}}]),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.functionsUtil.getGlobalConfig(["tools","polygonBridge"]);return h.a.createElement(f.p,{isOpen:this.props.isOpen},h.a.createElement(H.a,{maxWidth:["960px","650px"],closeFunc:this.props.closeModal},h.a.createElement(H.a.Header,{pt:3,iconHeight:"2em",title:"Welcome to Idle <> Polygon",icon:"images/protocols/polygon.svg"}),h.a.createElement(H.a.Body,null,h.a.createElement(f.h,{width:1,flexDirection:"column"},h.a.createElement(f.u,{fontSize:2,textAlign:"left",color:"dark-gray"},"You're about to enter Idle Finance in the Polygon Network, make sure to have some ",h.a.createElement(Te.a,{color:"link",fontSize:2,href:this.functionsUtil.getEtherscanAddressUrl(this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.currentNetwork.baseToken,"address"]))},this.props.currentNetwork.baseToken)," tokens in your wallet to send your transactions! Also you can use our ",h.a.createElement(f.n,{color:"link",fontSize:2,mainColor:"link",onClick:function(n){return e.props.goToSection("tools/".concat(t.route,"/").concat(e.props.currentNetwork.baseToken))}},t.label)," to transfer your tokens from Mainnet to Polygon.",h.a.createElement("br",null),"If you are not confident with this just switch to Mainnet using your wallet provider.")),h.a.createElement(f.h,{my:3,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(j.a,{handleClick:this.closeModal,buttonProps:{width:["100%","40%"]}},"Let Me In")))))}}]),t}(h.a.Component),Ee=n(12),Se=n(608),Ue=n.n(Se),Me=n(61),je=n(219),De=n.n(je),Oe=n(1153),Ae=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={email:null,error:!1,subscribed:!1,sendingForm:!1},n.functionsUtil=null,n.componentDidUpdate=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.functionsUtil.setProps(n.props);case 1:case"end":return e.stop()}},e,this)})),n.sendUserInfo=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.functionsUtil.getWalletProvider(),a={address:n.props.account,provider:t};e&&null!==n.state.email&&(a.email=n.state.email),n.functionsUtil.simpleIDPassUserInfo(a)},n.closeModal=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){n.props.closeModal()};try{n.sendUserInfo(!1),T.a.analytics.google.events.enabled?(n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:"continue_without_email",eventLabel:"WelcomeModal"},t),setTimeout(t,1e3)):t()}catch(a){t()}case 2:case"end":return e.stop()}},e,this)})),n.functionsUtil=new m.a(e),n.handleSubmit=n.handleSubmit.bind(Object(Ee.a)(Object(Ee.a)(n))),n.handleValidation=n.handleValidation.bind(Object(Ee.a)(Object(Ee.a)(n))),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.email)return!1;var n=function(){t.setState({sendingForm:!1,subscribed:!0}),window.setTimeout(t.props.closeModal,2500)};if(this.sendUserInfo(),this.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:"send_email",eventLabel:"WelcomeModal"}),Ue.a.post(T.a.newsletterSubscription.endpoint,{email:this.state.email}).then(function(e){n()}).catch(function(e){n()}),localStorage){var a=this.props.account.toLowerCase(),o=localStorage.getItem("lastLogin")?JSON.parse(localStorage.getItem("lastLogin")):null;o&&o[a]&&!o[a].signedUp&&(o[a].signedUp=!0,this.functionsUtil.setLocalStorage("lastLogin",JSON.stringify(o)))}this.setState({sendingForm:!0})}},{key:"handleValidation",value:function(e){e&&e.target&&(this.setState({email:e.target.value}),e.target.parentNode.classList.add("was-validated"))}},{key:"render",value:function(){return h.a.createElement(f.p,{isOpen:this.props.isOpen},this.state.subscribed?h.a.createElement(H.a,{closeFunc:this.closeModal},h.a.createElement(H.a.Header,{title:"All done",icon:"images/done.svg"}),h.a.createElement(H.a.Body,null,h.a.createElement(f.h,{width:1,flexDirection:"column",mb:3},h.a.createElement(f.u,{color:"dark-gray",textAlign:"center",fontSize:3,my:0},"Thanks for subscribing!"),h.a.createElement(f.c,{my:3,width:"100%",borderRadius:4,onClick:this.closeModal},"CLOSE")))):h.a.createElement(H.a,{closeFunc:this.closeModal},h.a.createElement(H.a.Header,{title:"Stay up-to-date!",icon:"images/notification.svg"}),h.a.createElement(H.a.Body,null,h.a.createElement(f.i,{onSubmit:this.handleSubmit},h.a.createElement(f.h,{width:1,flexDirection:"column",mb:3},h.a.createElement(f.u,{color:"mid-gray",textAlign:"left",fontSize:3,my:0},"Add your e-mail to receive updates about:")),h.a.createElement(f.h,{width:1,flexDirection:"column",mt:2},h.a.createElement(f.h,{my:2,flexDirection:"row",alignItems:"center"},h.a.createElement(f.k,{name:"CheckCircle",color:Me.b.green,size:"32"}),h.a.createElement(f.u,{color:"dark-gray",textAlign:"left",fontSize:3,fontWeight:2,my:0,ml:2},"Performance reports")),h.a.createElement(f.h,{my:2,flexDirection:"row"},h.a.createElement(f.k,{name:"CheckCircle",color:Me.b.green,size:"32"}),h.a.createElement(f.u,{color:"dark-gray",textAlign:"left",fontSize:3,fontWeight:2,my:0,ml:2},"New Protocols & Tokens")),h.a.createElement(f.h,{my:2,flexDirection:"row"},h.a.createElement(f.k,{name:"CheckCircle",color:Me.b.green,size:"32"}),h.a.createElement(f.u,{color:"dark-gray",textAlign:"left",fontSize:3,fontWeight:2,my:0,ml:2},"Latest updates")),h.a.createElement(f.i.Field,{width:1,label:""},h.a.createElement(f.i.Input,{px:3,py:4,required:!0,width:1,border:0,fontSize:3,type:"email",name:"EMAIL",outline:"none",borderColor:"cardBorder",backgroundColor:"cardBg",textAlign:["center","left"],className:De.a.input,placeholder:"Enter your e-mail",onChange:this.handleValidation})),h.a.createElement(f.h,{mb:3,flexDirection:"column",alignItems:"center",justifyContent:"center"},h.a.createElement(Oe.a,{buttonText:"SUBMIT",isLoading:this.state.sendingForm,buttonProps:{className:De.a.gradientButton,width:"100%",type:"submit"}}),h.a.createElement(f.n,{mt:2,onClick:this.closeModal,hoverColor:"blue"},"continue without e-mail")))))))}}]),t}(h.a.Component),Ie=n(5092),Pe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={dontShowAgain:!1},n.functionsUtil=null,n.componentDidUpdate=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.loadUtils();case 1:case"end":return e.stop()}},e,this)})),n.closeModal=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.functionsUtil.getGlobalConfig(["globalConfigs","analytics","google","events","enabled"])){e.next=7;break}return e.next=4,n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:"continue_without_migrate",eventLabel:"MigrateModal"});case 4:n.props.closeModal(),e.next=8;break;case 7:n.props.closeModal();case 8:case"end":return e.stop()}},e,this)})),n.toggleDontShowAgain=function(e){e?n.functionsUtil.setLocalStorage("dontShowMigrateModal","true"):n.functionsUtil.removeStoredItem("dontShowMigrateModal"),n.setState({dontShowAgain:e})},n.migrate=function(){var e=n.functionsUtil.getGlobalConfig(["tools","tokenMigration","route"]);n.props.goToSection("tools/"+e),n.props.closeModal()},n.loadUtils(),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}}]),Object(r.a)(t,[{key:"render",value:function(){var e=this,t={fontWeight:3,fontSize:[2,3],color:"cellText",flexProps:{justifyContent:"flex-start"}};return h.a.createElement(f.p,{isOpen:this.props.isOpen},h.a.createElement(H.a,{maxWidth:["960px","750px"],closeFunc:this.props.closeModal},h.a.createElement(H.a.Header,{iconHeight:"40px",title:"Migrate to Idle",icon:"images/migrate.svg"}),h.a.createElement(H.a.Body,null,h.a.createElement(f.h,{mb:0,width:1,flexDirection:"column"},h.a.createElement(f.u,{my:0,fontSize:3,color:"mid-gray",textAlign:"center"},"You can migrate your funds from Compound, Aave, Fulcrum, Yearn and Idle V2 with just one transaction.")),h.a.createElement(f.h,{width:1,flexDirection:"column"},h.a.createElement(f.h,{my:2,alignItems:"center",flexDirection:"column"},this.props.protocolsTokensBalances&&Object.keys(this.props.protocolsTokensBalances).map(function(n){return h.a.createElement(f.h,{mb:2,alignItems:"center",flexDirection:"row",key:"token_".concat(n),justifyContent:"space-between"},h.a.createElement($.a,{token:n,fieldInfo:{name:"icon",props:{mr:2,height:"2.3em"}},tokenConfig:e.props.protocolsTokensBalances[n].tokenConfig}),h.a.createElement(B.a,Object.assign({mr:2},t,{minPrecision:5,number:e.props.protocolsTokensBalances[n].balance})),h.a.createElement($.a,{token:n,fieldInfo:{name:"tokenName",props:t},tokenConfig:e.props.protocolsTokensBalances[n].tokenConfig}))}),h.a.createElement(f.u,{mb:0,fontSize:1,color:"red",fontWeight:500,textAlign:"center"},"Please be aware that by migrating your tokens from other protocols, your open positions might be liquidated if collateralized with migrated tokens.")),h.a.createElement(f.h,{mb:3,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(Oe.a,{buttonText:"MIGRATE",handleClick:this.migrate,isLoading:this.state.sendingForm,buttonProps:{width:["100%","50%"],className:De.a.gradientButton}}),h.a.createElement(f.e,{mt:2,required:!1,color:"mid-gray",checked:this.state.dontShowAgain,label:"Don't show this popup again",onChange:function(t){return e.toggleDontShowAgain(t.target.checked)}}))))))}}]),t}(h.a.Component),Be=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={dontShowAgain:!1},n.functionsUtil=null,n.componentDidUpdate=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.loadUtils();case 1:case"end":return e.stop()}},e,this)})),n.closeModal=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.functionsUtil.getGlobalConfig(["globalConfigs","analytics","google","events","enabled"])){e.next=7;break}return e.next=4,n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:"close_upgrade_modal",eventLabel:"UpgradeModal"});case 4:n.props.closeModal(),e.next=8;break;case 7:n.props.closeModal();case 8:case"end":return e.stop()}},e,this)})),n.toggleDontShowAgain=function(e){e?n.functionsUtil.setLocalStorage("dontShowUpgradeModal","true"):n.functionsUtil.removeStoredItem("dontShowUpgradeModal"),n.setState({dontShowAgain:e})},n.migrate=function(){var e=Object(i.a)(o.a.mark(function e(t){var a,i=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=i.length>1&&void 0!==i[1]?i[1]:null)||(a=n.props.selectedStrategy),!n.functionsUtil.getGlobalConfig(["globalConfigs","analytics","google","events","enabled"])){e.next=10;break}return e.next=6,n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UpgradeModal",eventAction:"migrate",eventLabel:"".concat(n.props.selectedStrategy,"_").concat(t)});case 6:n.props.goToSection("".concat(a,"/").concat(t)),n.props.closeModal(),e.next=12;break;case 10:n.props.goToSection("".concat(a,"/").concat(t)),n.props.closeModal();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convert=function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.functionsUtil.getGlobalConfig(["tools","tokenMigration"]),!n.functionsUtil.getGlobalConfig(["globalConfigs","analytics","google","events","enabled"])){e.next=9;break}return e.next=5,n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UpgradeModal",eventAction:"migrate",eventLabel:"".concat(n.props.selectedStrategy,"_").concat(t)});case 5:n.props.goToSection("tools/".concat(a.route,"/").concat(t)),n.props.closeModal(),e.next=11;break;case 9:n.props.goToSection("tools/".concat(a.route,"/").concat(t)),n.props.closeModal();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.loadUtils(),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}}]),Object(r.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.availableStrategies||!this.props.availableTokens)return null;var t={fontWeight:3,fontSize:[2,3],color:"cellText",flexProps:{justifyContent:"flex-start"}};return h.a.createElement(f.p,{isOpen:this.props.isOpen},h.a.createElement(H.a,{maxWidth:["960px","750px"],closeFunc:this.props.closeModal},h.a.createElement(H.a.Header,{icon:"images/migrate.svg",title:"Upgrade Available",iconHeight:["35px","40px"]}),h.a.createElement(H.a.Body,null,h.a.createElement(f.h,{mb:0,width:1,flexDirection:"column"},h.a.createElement(f.u,{my:0,fontSize:[2,3],color:"mid-gray",textAlign:"center"},"Idle now supports yield farming and governance tokens distribution, migrate now your portfolio with just one click!")),h.a.createElement(f.h,{width:1,flexDirection:"column"},h.a.createElement(f.h,{mt:[2,3],alignItems:"center",flexDirection:"row"},h.a.createElement(f.h,{fontSize:[2,3],width:[.5,.28],fontWeight:[4,5],color:"copyColor"},this.props.isMobile?"ASSET":"ASSET TO MIGRATE"),!this.props.isMobile&&h.a.createElement(f.h,{width:.19,fontWeight:[4,5],color:"copyColor",justifyContent:"center"},"BALANCE"),!this.props.isMobile&&h.a.createElement(f.h,{width:.19,fontWeight:[4,5],color:"copyColor",justifyContent:"center"},"OLD APY"),h.a.createElement(f.h,{fontSize:[2,3],fontWeight:[4,5],width:[.25,.19],color:"copyColor",justifyContent:"center"},this.props.isMobile?"APY":"NEW APY"),h.a.createElement(f.h,{width:[.25,.15]})),h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column"},this.props.tokensToMigrate&&Object.keys(this.props.tokensToMigrate).map(function(n){var a=e.props.tokensToMigrate[n].token,o=e.props.tokensToMigrate[n].strategy,i=e.props.tokensToMigrate[n].tokenConfig,s=e.props.tokensToMigrate[n].oldContractBalanceFormatted;return h.a.createElement(f.h,{mt:2,width:1,alignItems:"center",flexDirection:"row",key:"token_".concat(n),justifyContent:"space-between"},h.a.createElement(f.h,{width:[.5,.28],alignItems:"center",flexDirection:"row"},h.a.createElement($.a,{fieldInfo:{name:"icon",props:{mr:2,height:["1.8em","2.3em"]}},tokenConfig:i,token:i.idle.token}),h.a.createElement($.a,{fieldInfo:{name:"tokenName",props:t},tokenConfig:i,token:i.idle.token})),!e.props.isMobile&&h.a.createElement(f.h,{width:.19,alignItems:"center",justifyContent:"center"},h.a.createElement(B.a,Object.assign({},t,{minPrecision:5,number:s,flexProps:{justifyContent:"center"}}))),!e.props.isMobile&&h.a.createElement(f.h,{width:.19,alignItems:"center",justifyContent:"center"},h.a.createElement($.a,Object.assign({},e.props,{fieldInfo:{name:"oldApy",props:t},token:a,tokenConfig:i}))),h.a.createElement(f.h,{width:[.25,.19],alignItems:"center",justifyContent:"center"},h.a.createElement($.a,Object.assign({},e.props,{fieldInfo:{name:"apy",props:t},token:a,tokenConfig:i}))),h.a.createElement(f.h,{width:[.25,.15],alignItems:"center",justifyContent:"center"},h.a.createElement(j.a,{handleClick:function(t){return e.migrate(a,o)},buttonProps:{size:"small",width:"100%",className:De.a.gradientButton}},"MIGRATE")))})),h.a.createElement(f.h,{width:1,alignItems:"center",flexDirection:"column"},this.props.oldIdleTokensToMigrate&&Object.keys(this.props.oldIdleTokensToMigrate).map(function(n){var a=e.props.oldIdleTokensToMigrate[n].tokenConfig;if(!a)return null;var o=e.props.oldIdleTokensToMigrate[n].balance,i=null;return i=a.availableStrategies&&!e.props.availableTokens[a.baseToken]?e.props.availableStrategies[a.availableStrategies[0]][a.baseToken]:e.props.availableTokens[a.baseToken],h.a.createElement(f.h,{mt:2,width:1,alignItems:"center",flexDirection:"row",key:"token_".concat(n),justifyContent:"space-between"},h.a.createElement(f.h,{width:.28,alignItems:"center",flexDirection:"row"},h.a.createElement($.a,{fieldInfo:{name:"icon",props:{mr:2,height:"2.3em"}},tokenConfig:a,token:n}),h.a.createElement($.a,{fieldInfo:{name:"tokenName",props:t},tokenConfig:a,token:n})),h.a.createElement(f.h,{width:.19,alignItems:"center",justifyContent:"center"},h.a.createElement(B.a,Object.assign({},t,{minPrecision:5,number:o,flexProps:{justifyContent:"center"}}))),h.a.createElement(f.h,{width:.19,alignItems:"center",justifyContent:"center"},h.a.createElement($.a,Object.assign({},e.props,{fieldInfo:{name:"oldApy",props:t},token:i.token,tokenConfig:i}))),h.a.createElement(f.h,{width:.19,alignItems:"center",justifyContent:"center"},h.a.createElement($.a,Object.assign({},e.props,{fieldInfo:{name:"apy",props:t},token:i.token,tokenConfig:i}))),h.a.createElement(f.h,{width:.15,alignItems:"center",justifyContent:"center"},h.a.createElement(j.a,{handleClick:function(t){return e.convert(n)},buttonProps:{size:"small",width:"100%",className:De.a.gradientButton}},"MIGRATE")))})),h.a.createElement(f.h,{my:3,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(j.a,{handleClick:this.closeModal,buttonProps:{fontSize:[2,3],width:["100%","40%"]}},"MIGRATE LATER"),h.a.createElement(f.e,{mt:2,required:!1,color:"mid-gray",checked:this.state.dontShowAgain,label:"Don't show this popup again",onChange:function(t){return e.toggleDontShowAgain(t.target.checked)}}))))))}}]),t}(h.a.Component),Fe=n(5097),ze=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={},n.functionsUtil=null,n.componentDidUpdate=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.loadUtils();case 1:case"end":return e.stop()}},e,this)})),n.closeModal=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.closeModal();case 1:case"end":return e.stop()}},e,this)})),n.loadUtils(),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}}]),Object(r.a)(t,[{key:"render",value:function(){return h.a.createElement(f.p,{isOpen:this.props.isOpen},h.a.createElement(H.a,{maxWidth:["960px","650px"],closeFunc:this.props.closeModal},h.a.createElement(H.a.Header,{pt:3,iconHeight:"40px",icon:"images/warning.svg",title:"Risk Adjusted Dismissed"}),h.a.createElement(H.a.Body,null,h.a.createElement(f.h,{width:1,flexDirection:"column"},h.a.createElement(f.u,{fontSize:2,textAlign:"left",color:"dark-gray"},"The Risk Adjusted strategy has been dismissed after the execution of ",h.a.createElement(Te.a,{fontSize:2,href:this.functionsUtil.getAppUrl("#/governance/proposals/14")},"IIP-14")," on the 13th October 2021. An incentive program has been released to let users migrate their funds in the ",h.a.createElement(Te.a,{fontSize:2,href:"https://beta.idle.finance/#/dashboard/tranches/senior/idle"},"Senior Tranche")," in order to keep a similar risk profile as the Risk-Adjusted strategy. Read the ",h.a.createElement(Te.a,{fontSize:2,href:"https://gov.idle.finance/t/risk-adjusted-removal-for-tranches-migration/673"},"Governance Forum Post")," for further information about the migration program.")),h.a.createElement(f.h,{my:3,alignItems:"center",flexDirection:"column",justifyContent:"center"},h.a.createElement(j.a,{handleClick:this.closeModal,buttonProps:{width:["100%","40%"]}},"Got it")))))}}]),t}(h.a.Component),Ye=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={menu:[],baseRoute:null,clickEvent:null,activeModal:null,menuOpened:!1,currentRoute:null,pageComponent:null,currentSection:null,currentNetwork:null,selectedSection:null,tokensToMigrate:null,showResetButton:!1,selectedSubsection:null,pageComponentProps:null,oldIdleTokensToMigrate:null,protocolsTokensBalances:null},n.timeoutId=null,n.functionsUtil=null,n.resetModal=function(){n.setState({activeModal:null})},n.openTooltipModal=function(e,t){n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:e,eventLabel:"TooltipModal"}),n.setState({modalTitle:e,modalContent:t},function(){n.setActiveModal("tooltip")})},n.setActiveModal=function(e){n.setState({activeModal:e})},n.logout=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setConnector("Infura","Infura"),e.next=3,n.props.initWeb3("Infura");case 3:case"end":return e.stop()}},e,this)})),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props),window.functionsUtil=this.functionsUtil}},{key:"loadMenu",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.functionsUtil.getGlobalConfig(["extraicons"]),n=this.functionsUtil.getGlobalConfig(["dashboard","baseRoute"]),a=[],i=this.functionsUtil.getRequiredNetwork(),!(s=this.functionsUtil.getGlobalConfig(["tools","stakePolygon"])).enabled||s.availableNetworks&&!s.availableNetworks.includes(i.id)||a.push({submenu:[],label:"Stake",selected:!1,color:"dark-gray",route:"/dashboard/stake",image:t.stake.icon,imageDark:t.stake.iconDark,bgColor:this.props.theme.colors.primary,imageInactive:t.stake.iconInactive,imageInactiveDark:t.stake.iconInactiveDark,component:J,componentProps:{showBreadCrumb:!1,toolProps:s.props,selectedSubsection:s}}),r=this.functionsUtil.getGlobalConfig(["strategies"]),Object.keys(r).filter(function(e){return!r[e].comingSoon&&(!r[e].availableNetworks||r[e].availableNetworks.includes(i.id))&&(!r[e].enabledEnvs.length||r[e].enabledEnvs.includes(h.props.currentEnv))}).forEach(function(e){var o=r[e],i=t[e];a.push({submenu:[],color:"#fff",selected:!1,image:i.icon,label:o.title,bgColor:o.color,route:n+"/"+e,visible:o.visible,imageDark:i.iconDark,component:o.component,imageInactive:i.iconInactive,imageInactiveDark:i.iconInactiveDark})}),(l=this.functionsUtil.getGlobalConfig(["curve"])).enabled&&(c=Object.assign({submenu:[],selected:!1,component:we},l.params),a.push(c)),!(u=this.functionsUtil.getGlobalConfig(["tools","stake"])).enabled||u.availableNetworks&&!u.availableNetworks.includes(i.id)||a.push({submenu:[],label:"Stake",selected:!1,color:"dark-gray",route:"/dashboard/stake",image:t.stake.icon,imageDark:t.stake.iconDark,bgColor:this.props.theme.colors.primary,imageInactive:t.stake.iconInactive,imageInactiveDark:t.stake.iconInactiveDark,component:J,componentProps:{showBreadCrumb:!1,toolProps:u.props,selectedSubsection:u}}),(p=this.functionsUtil.getGlobalConfig(["stats"])).availableNetworks&&!p.availableNetworks.includes(i.id)||a.push({submenu:[],label:"Stats",selected:!1,component:_,bgColor:"#21f36b",color:"dark-gray",route:"/dashboard/stats",image:t.stats.icon,imageDark:t.stats.iconDark,imageInactive:t.stats.iconInactive,imageInactiveDark:t.stats.iconInactiveDark}),a.push({label:"Tools",selected:!1,component:J,color:"dark-gray",route:"/dashboard/tools",image:t.tools.icon,imageDark:t.tools.iconDark,bgColor:this.props.theme.colors.primary,imageInactive:t.tools.iconInactive,imageInactiveDark:t.tools.iconInactiveDark,submenu:Object.values(this.functionsUtil.getGlobalConfig(["tools"])).filter(function(e){return e.enabled&&(!e.availableNetworks||e.availableNetworks.includes(i.id))})}),a.push({submenu:[],mobile:!1,label:"Forum",selected:!1,component:null,color:"dark-gray",bgColor:"#ff0000",isExternalLink:!0,image:t.forum.icon,imageDark:t.forum.iconDark,imageInactive:t.forum.iconInactive,imageInactiveDark:t.forum.iconInactiveDark,route:this.functionsUtil.getGlobalConfig(["forumURL"])}),e.next=18,this.setState({menu:a,currentNetwork:i});case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadParams",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l,c,u,p,h,d,m,f,g,b,k,v,x;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.networkInitialized){e.next=2;break}return e.abrupt("return");case 2:if(t=this.props.match.params,n=this.functionsUtil.getGlobalConfig(["dashboard","baseRoute"]),a=n,i=null,s=null,r=null,l=null,c=null,t.section&&(r=t.section,u=t.param1,p=t.param2,h=Object.keys(this.props.availableStrategies).includes(r.toLowerCase()),d=u&&Object.keys(this.props.availableStrategies).includes(u.toLowerCase()),h||d?(h||(a+="/"+r),a+="/"+(l=h?r:u),m=u&&Object.keys(this.props.availableStrategies[l]).includes(u.toUpperCase()),f=p&&Object.keys(this.props.availableStrategies[l]).includes(p.toUpperCase()),(m||f)&&(s=m?u.toUpperCase():p.toUpperCase(),a+="/"+s,h&&(i=me))):(a+="/"+t.section,t.param1&&t.param1.length&&(a+="/"+t.param1))),g=this.state.menu,b=null,k=null,g.forEach(function(e){e.selected=!1;var o=n+"/"+t.section;a.toLowerCase()===e.route.toLowerCase()||!e.submenu.length&&e.route.toLowerCase()===o.toLowerCase()?(e.selected=!0,null===i&&(i=e.component,c=e.componentProps)):e.submenu.length&&e.submenu.forEach(function(t){t.selected=!1,(e.route+"/"+t.route).toLowerCase()===a.toLowerCase()&&(e.selected=!0,t.selected=!0,null===i&&(t.component?(i=t.component,c=e.componentProps):(i=e.component,c=e.componentProps))),t.selected&&(k=t)}),e.selected&&(b=e)}),i){e.next=18;break}return v=Object.keys(this.props.availableStrategies)[0],e.abrupt("return",this.goToSection(v));case 18:return e.next=20,this.props.setStrategyToken(l,s);case 20:return this.functionsUtil.sendGoogleAnalyticsPageview(a),x={menu:g,params:t,baseRoute:n,currentRoute:a,pageComponent:i,currentSection:r,selectedSection:b,pageComponentProps:c,selectedSubsection:k},e.next=24,this.setState(x);case 24:return e.abrupt("return",x);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setCurrentSection("dashboard"),this.loadUtils(),e.next=4,this.loadMenu();case 4:this.loadParams();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.timeoutId=window.setTimeout(function(){t.props.accountInizialized&&t.props.contractsInitialized||t.setState({showResetButton:!0})},6e4),this.props.web3){e.next=5;break}return e.abrupt("return",this.props.initWeb3());case 5:if(this.props.accountInizialized){e.next=9;break}return e.abrupt("return",this.props.initAccount());case 9:if(this.props.contractsInitialized){e.next=11;break}return e.abrupt("return",this.props.initializeContracts());case 11:return this.loadUtils(),e.next=14,this.loadMenu();case 14:this.loadParams(),"custom"===this.props.connectorName||this.checkModals();case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(o.a.mark(function e(t,n){var a,i,s,r,l,c,u,p,h,d,m=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadUtils(),a=t.match.params,i=this.props.match.params,t.isMobile!==this.props.isMobile&&this.setState({menuOpened:!1}),JSON.stringify(a)===JSON.stringify(i)){e.next=8;break}return e.next=8,this.setState({pageComponent:null},function(){m.loadParams()});case 8:if(s=JSON.stringify(t.network.required)!==JSON.stringify(this.props.network.required),!(r=!t.networkInitialized&&this.props.networkInitialized||s)){e.next=14;break}return e.next=13,this.loadMenu();case 13:this.loadParams();case 14:l="custom"===this.props.connectorName,c=t.account!==this.props.account,u=this.props.selectedStrategy&&t.selectedStrategy!==this.props.selectedStrategy,p=JSON.stringify(t.availableTokens)!==JSON.stringify(this.props.availableTokens),h=this.props.accountInizialized&&t.accountInizialized!==this.props.accountInizialized,d=this.props.contractsInitialized&&t.contractsInitialized!==this.props.contractsInitialized,!l&&(r||c||h||d||u||p)&&this.checkModals();case 21:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkModals",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.selectedToken&&this.props.accountInizialized&&this.props.contractsInitialized&&this.props.availableStrategies&&this.props.availableTokens){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.checkRiskAdjusted();case 4:return e.next=6,this.checkPolygonModal();case 6:return e.next=8,this.checkBetaApproval();case 8:return e.next=10,this.checkTokensToMigrate();case 10:return e.next=12,this.checkWelcomeModal();case 12:return e.next=14,this.checkProtocolsTokensBalances();case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkRiskAdjusted",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("risk"===this.props.selectedStrategy)){e.next=7;break}if((t="risk")===this.state.activeModal){e.next=7;break}return e.next=6,this.setState({activeModal:t});case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkPolygonModal",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="polygon"===this.state.currentNetwork.provider,n=this.functionsUtil.getStoredItem("polygonApproved",!1,!1),!t||n){e.next=8;break}if((a="polygon")===this.state.activeModal){e.next=8;break}return e.next=7,this.setState({activeModal:a});case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkBetaApproval",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.functionsUtil.checkUrlOrigin(),n="polygon"===this.state.currentNetwork.provider,a=this.functionsUtil.getStoredItem("betaApproved",!1,!1),t||a||n||null!==this.state.activeModal){e.next=9;break}if((i="beta")===this.state.activeModal){e.next=9;break}return e.next=8,this.setState({activeModal:i});case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkTokensToMigrate",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===this.functionsUtil.getStoredItem("dontShowUpgradeModal",!1,null),!this.props.selectedToken&&t&&this.props.availableTokens&&null===this.state.activeModal){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,this.functionsUtil.getTokensToMigrate();case 5:return n=e.sent,e.next=8,this.functionsUtil.getProtocolsTokensBalances("idle");case 8:if(a=e.sent,!(n&&Object.keys(n).length>0||a&&Object.keys(a).length>0)){e.next=15;break}if((i="upgrade")===this.state.activeModal){e.next=15;break}return e.next=14,this.setState({activeModal:i,tokensToMigrate:n,oldIdleTokensToMigrate:a});case 14:return e.abrupt("return",i);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkWelcomeModal",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.account&&this.props.accountInizialized&&this.props.contractsInitialized){e.next=2;break}return e.abrupt("return",null);case 2:if(!this.props.account||null!==this.state.activeModal){e.next=11;break}if(t=!1,(n=this.functionsUtil.getGlobalConfig(["modals","welcome"])).enabled&&localStorage&&(a=(new Date).getTime(),i=this.props.account.toLowerCase(),(s=localStorage.getItem("lastLogin")?JSON.parse(localStorage.getItem("lastLogin")):{})[i]?s[i].signedUp||(r=parseInt(s[i].lastTime),t=(a-r)/1e3>=n.frequency):(s[i]={signedUp:!1,lastTime:a},t=!0),t&&(s[i].lastTime=a,this.functionsUtil.setLocalStorage("lastLogin",JSON.stringify(s)))),l=t?"welcome":this.state.activeModal,this.state.activeModal===l){e.next=11;break}return e.next=10,this.setState({activeModal:l});case 10:return e.abrupt("return",l);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkProtocolsTokensBalances",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i,s,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.account&&this.props.accountInizialized&&this.props.contractsInitialized){e.next=2;break}return e.abrupt("return",null);case 2:if(t=this.functionsUtil.getGlobalConfig(["modals","migrate"]),n=t.enabled&&t.availableNetworks.includes(this.state.currentNetwork.id),a=null===this.functionsUtil.getStoredItem("dontShowMigrateModal",!1,null),null!==this.state.activeModal||!n||!a||this.state.protocolsTokensBalances){e.next=14;break}return e.next=8,this.functionsUtil.getProtocolsTokensBalances();case 8:return i=e.sent,s=i&&Object.keys(i).length>0?"migrate":null,r={activeModal:s,protocolsTokensBalances:i},e.next=13,this.setState(r);case 13:return e.abrupt("return",s);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"goToSection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e=e.replace(this.state.baseRoute+"/",""));var n=t?this.state.baseRoute+"/"+e:e;window.location.hash=n,this.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:"goToSection",eventLabel:n}),window.scrollTo(0,0)}},{key:"changeToken",value:function(e){if(e=e.toUpperCase(),Object.keys(this.props.availableTokens).includes(e)){var t=[];this.state.currentSection.toLowerCase()!==this.props.selectedStrategy.toLowerCase()&&t.push(this.state.currentSection),t.push(this.props.selectedStrategy),t.push(e),this.goToSection(t.join("/"))}}},{key:"propagateClickEvent",value:function(e){this.setState({clickEvent:e.target})}},{key:"setMenu",value:function(e){this.setState({menuOpened:e})}},{key:"toggleMenu",value:function(){var e=!this.state.menuOpened;this.setMenu(e)}},{key:"swipeCallback",value:function(e){"Right"===e.dir?this.setMenu(!0):"Left"===e.dir&&this.setMenu(!1)}},{key:"render",value:function(){var e=this,t=this.state.pageComponent?this.state.pageComponent:null,n=this.props.networkInitialized&&this.props.network.current.id&&this.props.network.required.id,a=this.props.network.isCorrectNetwork,o=this.props.network.isSupportedNetwork;return h.a.createElement(fe.a,{callback:this.swipeCallback.bind(this)},h.a.createElement(f.h,{height:"100vh",position:"fixed",flexDirection:"row",className:this.props.themeMode,backgroundColor:["dashboardBg","white"],width:this.props.isMobile&&this.state.menuOpened?"180vw":"100vw"},(!this.props.isMobile||this.state.menuOpened)&&h.a.createElement(f.h,{bottom:0,zIndex:99999,width:["80vw",1/6],position:"relative",flexDirection:"column"},h.a.createElement(f.d,{p:3,border:0,width:"auto",height:"100vh",backgroundColor:"menuBg",borderColor:this.props.theme.colors.menuRightBorder,borderRight:"1px solid ".concat(this.props.theme.colors.menuRightBorder)},h.a.createElement(g.a,Object.assign({},this.props,{menu:this.state.menu,closeMenu:function(t){return e.setMenu(!1)}})))),h.a.createElement(f.h,{py:3,mb:0,px:[3,5],width:["100vw",5/6],style:{overflowY:"scroll",overflowX:"hidden"},height:["100vh","auto"],flexDirection:"column",backgroundColor:"dashboardBg"},h.a.createElement(Fe.a,Object.assign({menuOpened:this.state.menuOpened,clickEvent:this.state.clickEvent,toggleMenu:this.toggleMenu.bind(this),goToSection:this.goToSection.bind(this)},this.props)),n&&this.props.accountInizialized&&this.props.contractsInitialized&&t&&a&&o?h.a.createElement(f.h,{width:1,flexDirection:"column"},t&&h.a.createElement(t,Object.assign({},this.props,{match:{params:{}},urlParams:this.state.params,changeToken:this.changeToken.bind(this),goToSection:this.goToSection.bind(this),selectedSection:this.state.selectedSection,selectedSubsection:this.state.selectedSubsection,openTooltipModal:this.openTooltipModal.bind(this)},this.state.pageComponentProps))):h.a.createElement(f.h,{width:1,minHeight:"50vh",alignItems:"center",flexDirection:"column",justifyContent:"center"},n&&!a?h.a.createElement(E.a,{cardProps:{p:3,mt:3,width:[1,.35]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",name:"Warning",color:"cellText"}),h.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"You should be on the ",h.a.createElement("strong",null,this.functionsUtil.capitalize(this.props.network.required.name)," network"),". You are currently connected to the ",h.a.createElement("strong",null,this.functionsUtil.capitalize(this.props.network.current.name)," network"),", please switch to the correct network."),1!==parseInt(this.props.network.required.id)?h.a.createElement(j.a,{buttonProps:{mt:3,width:[1,.5]},handleClick:function(t){return e.functionsUtil.addEthereumChain(e.props.network.required.id)}},"Switch Network"):h.a.createElement(f.h,{alignItems:"center",justifyContent:"center",flexDirection:"column"},h.a.createElement(f.u,{my:2,fontSize:1,color:"alert",textAlign:"center"},"To switch to ",this.functionsUtil.capitalize(this.props.network.required.name)," you need to manually change the network through your Wallet Provider (eg. Metamask):"),h.a.createElement(f.l,{mt:1,width:[1,"80%"],src:"images/metamask-mainnet.png"})))):n&&!o?h.a.createElement(E.a,{cardProps:{p:3,mt:3,width:[1,.35]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",name:"Warning",color:"cellText"}),h.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"The ",h.a.createElement("strong",null,this.functionsUtil.capitalize(this.props.network.current.name)," Network")," is not supported, please switch to the correct network."))):this.state.showResetButton?h.a.createElement(E.a,{cardProps:{p:3,mt:3,width:[1,.35]}},h.a.createElement(f.h,{alignItems:"center",flexDirection:"column"},h.a.createElement(f.k,{size:"2.3em",name:"Warning",color:"cellText"}),h.a.createElement(f.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Idle can't connect to your wallet!",h.a.createElement("br",null),"Make sure that your wallet is unlocked and try again."),h.a.createElement(j.a,{buttonProps:{mt:3,width:[1,.5]},handleClick:this.logout.bind(this)},"Logout"))):h.a.createElement(d.a,{textProps:{textSize:4,fontWeight:2},loaderProps:{mb:3,size:"40px"},flexProps:{my:3,flexDirection:"column"},text:this.props.networkInitialized?this.props.accountInizialized?this.props.contractsInitialized?"Loading assets...":"Loading contracts...":"Loading account...":"Loading network..."}))),this.state.currentNetwork&&h.a.createElement(Ce,{closeModal:this.resetModal,goToSection:this.goToSection.bind(this),currentNetwork:this.state.currentNetwork,isOpen:"polygon"===this.state.activeModal}),h.a.createElement(ge,{closeModal:this.resetModal,isOpen:"beta"===this.state.activeModal}),h.a.createElement(ze,{closeModal:this.resetModal,isOpen:"risk"===this.state.activeModal}),h.a.createElement(Be,Object.assign({},this.props,{closeModal:this.resetModal,goToSection:this.goToSection.bind(this),tokensToMigrate:this.state.tokensToMigrate,isOpen:"upgrade"===this.state.activeModal,oldIdleTokensToMigrate:this.state.oldIdleTokensToMigrate})),h.a.createElement(Pe,Object.assign({},this.props,{closeModal:this.resetModal,goToSection:this.goToSection.bind(this),isOpen:"migrate"===this.state.activeModal,protocolsTokensBalances:this.state.protocolsTokensBalances})),h.a.createElement(Ie.a,{closeModal:this.resetModal,title:this.state.modalTitle,content:this.state.modalContent,isOpen:"tooltip"===this.state.activeModal}),h.a.createElement(Ae,{closeModal:this.resetModal,account:this.props.account,simpleID:this.props.simpleID,network:this.props.network.current,tokenName:this.props.selectedToken,initSimpleID:this.props.initSimpleID,baseTokenName:this.props.selectedToken,isOpen:"welcome"===this.state.activeModal})))}}]),t}(p.Component);t.default=Ye}}]);
//# sourceMappingURL=4.79ade2a2.chunk.js.map